/*! For license information please see main.b1d824e4.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,j=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case S:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ge=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ie=null;function Se(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ee(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,je=null,Fe=!1,Ue=null,Ve={onError:function(e){Me=!0,je=e}};function ze(e,t,n,r,i,a,o,s,u){Me=!1,je=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ft(s):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,It,St,Et=!1,Tt=[],Ct=null,Nt=null,At=null,Rt=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Et=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==At&&Ft(At)&&(At=null),Rt.forEach(Ut),Pt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)jt(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Gt=!0;function Kt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Gt){var i=Yt(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Gr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=j({},cn,{view:0,detail:0}),hn=an(fn),dn=j({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(j({},dn,{dataTransfer:0})),mn=an(j({},fn,{relatedTarget:0})),gn=an(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(yn),bn=an(j({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return In}var En=j({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Cn=an(j({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(j({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=j({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Rn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,jn=l&&(!On||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ee(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Qn(e){Fr(e,0)}function Yn(e){if(H(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Kn(t,Hn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Wr(gr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Ir={};function Sr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Er=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),u(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Er,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=je;Me=!1,je=null,Fe||(Fe=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;jr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;jr(i,s,c),a=u}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Kt;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var s=Ar.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Er:case Tr:case Cr:u=gn;break;case Nr:u=An;break;case"scroll":u=hn;break;case"wheel":u=Pn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,yi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=$n;else if(Gn(s))if(Xn)m=or;else{m=ir;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?bi(r):window,e){case"focusin":(Gn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(jn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(y=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(g=Wr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:g}),y?k.data=y:null!==(y=zn(n))&&(k.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Fr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Pe(n,a))&&o.unshift(Kr(n,u,s)):i||null!=(u=Pe(n,a))&&o.push(Kr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,gi="__reactHandles$"+fi;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ii(e){return{current:e}}function Si(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ei(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Ai=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Si(Ni),Si(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ei(Ci,t),Ei(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return j({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Ei(Ci,e),Ei(Ni,Ni.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ci),Ei(Ci,e)):Si(Ni),Ei(Ni,n)}var Fi=null,Ui=!1,Vi=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),He(Ze,Bi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Gi=0,Ki=null,Wi=0,Hi=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(e,t){qi[Gi++]=Wi,qi[Gi++]=Ki,Ki=e,Wi=t}function Zi(e,t,n){Hi[Qi++]=$i,Hi[Qi++]=Xi,Hi[Qi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else $i=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=qi[--Gi],qi[Gi]=null,Wi=qi[--Gi],qi[Gi]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,Xi=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=Ii(null),ya=null,ka=null,ba=null;function wa(){ba=ka=ya=null}function _a(e){var t=ga.current;Si(ga),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ya=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ya)throw Error(a(308));ka=e,ya.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ea=null;function Ta(e){null===Ea?Ea=[e]:Ea.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ja(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var f=i.baseState;for(o=0,l=c=u=null,s=a;;){var h=s.lane,d=s.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=j({},f,h);break e;case 2:Aa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=f):l=l.next=d,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);ju|=o,e.lanes=o,e.memoizedState=f}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Pi(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Pi(t)?Ai:Ci.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),ja(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=d(i,f,s[v],u);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(i,f),a=o(g,a,v),null===l?c=g:l.sibling=g,l=g,f=m}if(v===s.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<s.length;v++)null!==(m=p(f,i,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var f=l=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var k=d(i,v,y.value,c);if(null===k){null===v&&(v=g);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,m),null===f?l=k:f.sibling=k,f=k,v=g}if(y.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=h(i,y.value,c))&&(s=o(y,s,m),null===f?l=y:f.sibling=y,f=y);return ia&&Ji(i,m),l}for(v=r(i,v);!y.done;m++,y=u.next())null!==(y=p(v,i,m,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===f?l=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Wa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Lc(o.type,o.key,o.props,null,r.mode,u)).ref=Wa(r,a,o),u.return=r,r=u)}return s(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,u)).return=r,r=a}return s(r);case P:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return m(r,a,o,u);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var $a=Ya(!0),Xa=Ya(!1),Ja={},Za=Ii(Ja),eo=Ii(Ja),to=Ii(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ei(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var so=Ii(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,go=null,yo=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,go=mo=null,t.updateQueue=null,fo.current=cs,e=n(r,i)}while(ko)}if(fo.current=os,t=null!==mo&&null!==mo.next,po=0,go=mo=vo=null,yo=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?vo.memoizedState=go=e:go=go.next=e,go}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===go?vo.memoizedState:go.next;if(null!==t)go=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===go?vo.memoizedState=go=e:go=go.next=e}return go}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=h,s=r):c=c.next=h,vo.lanes|=f,ju|=f}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,ju|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Po(e,t){var n=vo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Go(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Au)throw Error(a(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&jo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&jo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function jo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function Fo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function zo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Go(e,t){return Bo(2048,8,e,t)}function Ko(e,t){return Bo(4,2,e,t)}function Wo(e,t){return Bo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,ju|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),as(n,t,r)}}function ns(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ta(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Sa,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},ss={readContext:Sa,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Fo,useDebugValue:Yo,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Au)throw Error(a(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Au.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Wo,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:es,unstable_isNewReconciler:!1},cs={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Wo,useMemo:Xo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ku||(Ku=!0,Wu=r),hs(0,t)},n}function vs(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Xa(t,null,n,r):$a(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=So(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ks(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Is(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ks(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Is(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ks(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ts(e,t,n,r,i)}function Ss(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ou,Du),Du|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Ou,Du),Du|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Ou,Du),Du|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Ou,Du),Du|=r;return ws(e,t,i,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Pi(n)?Ai:Ci.current;return a=Ri(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=So(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ks(e,t,i))}function Cs(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Gs(e,t),qa(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Ri(t,c=Pi(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Ga(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,ja(t,r,o,i),u=t.memoizedState,s!==r||h!==u||Ni.current||Aa?("function"===typeof l&&(Va(t,n,l,r),u=t.memoizedState),(s=Aa||Ba(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ma(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Sa(u):u=Ri(t,u=Pi(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&Ga(t,o,r,u),Aa=!1,h=t.memoizedState,o.state=h,ja(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Aa||Ba(t,n,c,r,h,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Es(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&ji(t,n,!1),Ks(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Rs(e,t,n,r,i){return da(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var Ps,Ds,Os,Ls,Ms={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=jc(u,i,0,null),e=Mc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Ms,e):Us(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Vs(e,t,s,r=fs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Ms,o);if(0===(1&t.mode))return Vs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Vs(e,t,s,r=fs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Au)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),Vs(e,t,s,r=fs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=$i,Hi[Qi++]=Xi,Hi[Qi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),t=Us(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Oc(r,s):(s=Mc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?js(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,i}return e=(s=e.child).sibling,i=Oc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vs(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Bs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bs(t,!0,n,null,a);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ks(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ju|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Pi(t.type)&&Di(),Hs(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Ds(e,t),Hs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hs(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ye(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hi]=t,e[di]=r,Ps(e,t,!1,!1),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hs(t),null;case 13:if(Si(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),o=!1}else null!==aa&&(sc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Lu&&(Lu=3):mc())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return io(),Ds(e,t),null===e&&Br(t.stateNode.containerInfo),Hs(t),null;case 10:return _a(t.type._context),Hs(t),null;case 19:if(Si(so),null===(o=t.memoizedState))return Hs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ws(o,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ws(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>qu&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Hs(t),null}else 2*Xe()-o.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=so.current,Ei(so,r?1&n|2:1&n),t):(Hs(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Du)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(so),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ps=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(){},Os=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ye(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var $s=!1,Xs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tu(t,n,a)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var fu=null,hu=!1;function du(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Xs||eu(n,t);case 6:var r=fu,i=hu;fu=null,du(e,t,n),hu=i,null!==(fu=r)&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fu.removeChild(n.stateNode));break;case 18:null!==fu&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Bt(e)):ui(fu,n.stateNode));break;case 4:r=fu,i=hu,fu=n.stateNode.containerInfo,hu=!0,du(e,t,n),fu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tu(n,t,o),i=i.next}while(i!==r)}du(e,t,n);break;case 1:if(!Xs&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sc(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,du(e,t,n),Xs=r):du(e,t,n);break;default:du(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:fu=u.stateNode,hu=!1;break e;case 3:case 4:fu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===fu)throw Error(a(160));pu(o,s,i),fu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gu(t,e),t=t.sibling}function gu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),yu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(m){Sc(e,e.return,m)}try{ru(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:mu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(mu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&X(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(u){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Sc(e,e.return,m)}}break;case 6:if(mu(t,e),yu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Sc(e,e.return,m)}}break;case 3:if(mu(t,e),yu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:mu(t,e),yu(e);break;case 13:mu(t,e),yu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bu=Xe())),4&r&&vu(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(l=Xs)||f,mu(t,e),Xs=l):mu(t,e),yu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zs=e,f=e.child;null!==f;){for(h=Zs=f;null!==Zs;){switch(p=(d=Zs).child,d.tag){case 0:case 11:case 14:case 15:ru(4,d,d.return);break;case 1:eu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:eu(d,d.return);break;case 22:if(null!==d.memoizedState){_u(h);continue}}null!==p?(p.return=d,Zs=p):_u(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(m){Sc(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mu(t,e),yu(e),4&r&&vu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),lu(e,uu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cu(e,uu(e),o);break;default:throw Error(a(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ku(e,t,n){Zs=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$s;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Xs;s=$s;var c=Xs;if($s=o,(Xs=u)&&!c)for(Zs=i;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?xu(i):null!==u?(u.return=o,Zs=u):xu(i);for(;null!==a;)Zs=a,bu(a,t,n),a=a.sibling;Zs=i,$s=s,Xs=c}wu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):wu(e)}}function wu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Xs||512&t.flags&&au(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function _u(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function xu(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){Sc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Sc(t,i,u)}}var a=t.return;try{au(t)}catch(u){Sc(t,a,u)}break;case 5:var o=t.return;try{au(t)}catch(u){Sc(t,o,u)}}}catch(u){Sc(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Iu,Su=Math.ceil,Eu=b.ReactCurrentDispatcher,Tu=b.ReactCurrentOwner,Cu=b.ReactCurrentBatchConfig,Nu=0,Au=null,Ru=null,Pu=0,Du=0,Ou=Ii(0),Lu=0,Mu=null,ju=0,Fu=0,Uu=0,Vu=null,zu=null,Bu=0,qu=1/0,Gu=null,Ku=!1,Wu=null,Hu=null,Qu=!1,Yu=null,$u=0,Xu=0,Ju=null,Zu=-1,ec=0;function tc(){return 0!==(6&Nu)?Xe():-1!==Zu?Zu:Zu=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nu)&&0!==Pu?Pu&-Pu:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Xu)throw Xu=0,Ju=null,Error(a(185));gt(e,n,r),0!==(2&Nu)&&e===Au||(e===Au&&(0===(2&Nu)&&(Fu|=n),4===Lu&&uc(e,Pu)),ic(e,r),1===n&&0===Nu&&0===(1&t.mode)&&(qu=Xe()+500,Ui&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Au?Pu:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Nu)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zu=-1,ec=0,0!==(6&Nu))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Au?Pu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Nu;Nu|=2;var o=vc();for(Au===e&&Pu===t||(Gu=null,qu=Xe()+500,dc(e,t));;)try{kc();break}catch(u){pc(e,u)}wa(),Eu.current=o,Nu=i,null!==Ru?t=0:(Au=null,Pu=0,t=Lu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Mu,dc(e,0),uc(e,r),ic(e,Xe()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Mu,dc(e,0),uc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,zu,Gu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bu+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,zu,Gu),t);break}_c(e,zu,Gu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Su(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,zu,Gu),r);break}_c(e,zu,Gu);break;default:throw Error(a(329))}}}return ic(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zu,zu=n,null!==t&&sc(t)),e}function sc(e){null===zu?zu=e:zu.push.apply(zu,e)}function uc(e,t){for(t&=~Uu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nu))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Mu,dc(e,0),uc(e,t),ic(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,zu,Gu),ic(e,Xe()),null}function lc(e,t){var n=Nu;Nu|=1;try{return e(t)}finally{0===(Nu=n)&&(qu=Xe()+500,Ui&&Bi())}}function fc(e){null!==Yu&&0===Yu.tag&&0===(6&Nu)&&xc();var t=Nu;Nu|=1;var n=Cu.transition,r=kt;try{if(Cu.transition=null,kt=1,e)return e()}finally{kt=r,Cu.transition=n,0===(6&(Nu=t))&&Bi()}}function hc(){Du=Ou.current,Si(Ou)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Si(Ni),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(so);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Au=e,Ru=e=Oc(e.current,null),Pu=Du=t,Lu=0,Mu=null,Uu=Fu=ju=0,zu=Vu=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function pc(e,t){for(;;){var n=Ru;try{if(wa(),fo.current=os,yo){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,go=mo=vo=null,ko=!1,bo=0,Tu.current=null,null===n||null===n.return){Lu=1,Mu=t,Ru=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Pu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&ms(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){ms(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Lu&&(Lu=2),null===Vu?Vu=[o]:Vu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,ps(0,c,t));break e;case 1:u=c;var y=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hu||!Hu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function vc(){var e=Eu.current;return Eu.current=os,null===e?os:e}function mc(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Au||0===(268435455&ju)&&0===(268435455&Fu)||uc(Au,Pu)}function gc(e,t){var n=Nu;Nu|=2;var r=vc();for(Au===e&&Pu===t||(Gu=null,dc(e,t));;)try{yc();break}catch(i){pc(e,i)}if(wa(),Nu=n,Eu.current=r,null!==Ru)throw Error(a(261));return Au=null,Pu=0,Lu}function yc(){for(;null!==Ru;)bc(Ru)}function kc(){for(;null!==Ru&&!Ye();)bc(Ru)}function bc(e){var t=Iu(e.alternate,e,Du);e.memoizedProps=e.pendingProps,null===t?wc(e):Ru=t,Tu.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Du)))return void(Ru=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Ru=n);if(null===e)return Lu=6,void(Ru=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Lu&&(Lu=5)}function _c(e,t,n){var r=kt,i=Cu.transition;try{Cu.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Yu);if(0!==(6&Nu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Au&&(Ru=Au=null,Pu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qu||(Qu=!0,Ac(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cu.transition,Cu.transition=null;var s=kt;kt=1;var u=Nu;Nu|=4,Tu.current=null,function(e,t){if(ei=Gt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(u=s+i),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++f===r&&(c=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,k=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=nu,nu=!1}(e,n),gu(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,ku(n,e,i),$e(),Nu=u,kt=s,Cu.transition=o}else e.current=n;if(Qu&&(Qu=!1,Yu=e,$u=i),o=e.pendingLanes,0===o&&(Hu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ku)throw Ku=!1,e=Wu,Wu=null,e;0!==(1&$u)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Ju?Xu++:(Xu=0,Ju=e):Xu=0,Bi()}(e,t,n,r)}finally{Cu.transition=i,kt=r}return null}function xc(){if(null!==Yu){var e=bt($u),t=Cu.transition,n=kt;try{if(Cu.transition=null,kt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,$u=0,0!==(6&Nu))throw Error(a(331));var i=Nu;for(Nu|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Zs=l;null!==Zs;){var f=Zs;switch(f.tag){case 0:case 11:case 15:ru(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zs=h;else for(;null!==Zs;){var d=(f=Zs).sibling,p=f.return;if(ou(f),f===l){Zs=null;break}if(null!==d){d.return=p,Zs=d;break}Zs=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Zs=y;break e}Zs=o.return}}var k=e.current;for(Zs=k;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else e:for(s=k;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(_){Sc(u,u.return,_)}if(u===s){Zs=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Zs=w;break e}Zs=u.return}}if(Nu=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cu.transition=t}}return!1}function Ic(e,t,n){e=Oa(e,t=ps(0,t=ls(n,t),1),1),t=tc(),null!==e&&(gt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){t=Oa(t,e=vs(t,e=ls(n,e),1),1),e=tc(),null!==t&&(gt(t,1,e),ic(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Au===e&&(Pu&n)===n&&(4===Lu||3===Lu&&(130023424&Pu)===Pu&&500>Xe()-Bu?dc(e,0):Uu|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(gt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return He(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Rc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Dc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case I:s=8,i|=8;break;case S:return(e=Pc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return jc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case T:s=9;break e;case C:s=11;break e;case R:s=14;break e;case P:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,s,u){return e=new Vc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,s,u){return(e=zc(n,r,!0,e,0,a,0,s,u)).context=Bc(null),n=e.current,(a=Da(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,gt(e,i,r),ic(e,r),e}function Gc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Iu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:As(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ga,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ei(so,1&so.current),null!==(e=Ks(e,t,n))?e.sibling:null);Ei(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Ks(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gs(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(As(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),ja(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Rs(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ks(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Es(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ei(ga,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Ks(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Da(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Sa(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xs(e,t,r,i=ma(r.type,i),n);case 15:return Is(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Gs(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),qa(t,r,i),Ka(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return Ss(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Kc(o);s.call(e)}}Gc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Kc(u);s.call(e)}}var u=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,Br(8===e.nodeType?e.parentNode:e),fc((function(){Gc(t,u,n,r)})),u}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Gc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Xe()),0===(6&Nu)&&(qu=Xe()+500,Bi()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},It=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ee,Te,lc]},nl={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=k.prototype=new y;b.constructor=k,v(b,g.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+C(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(s=e[c],c);u+=N(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,l=a+C(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,D(_);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,y(E),E=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var u=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),u=!1}return u}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,S=null,E=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?x():(I=!1,S=null)}}else I=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,x=function(){P.postMessage(null)}}else x=function(){g(A,0)};function D(e){S=e,I||(I=!0,x())}function O(e,n){E=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(y(E),E=-1):m=!0,O(w,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,D(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}!function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return H},SDK_VERSION:function(){return dt},_DEFAULT_ENTRY_NAME:function(){return $e},_addComponent:function(){return tt},_addOrOverwriteComponent:function(){return nt},_apps:function(){return Je},_clearComponents:function(){return ut},_components:function(){return et},_getProvider:function(){return it},_isFirebaseApp:function(){return ot},_isFirebaseServerApp:function(){return st},_registerComponent:function(){return rt},_removeServiceInstance:function(){return at},_serverApps:function(){return Ze},deleteApp:function(){return yt},getApp:function(){return mt},getApps:function(){return gt},initializeApp:function(){return pt},initializeServerApp:function(){return vt},onLog:function(){return wt},registerVersion:function(){return bt},setLogLevel:function(){return _t}});var t=n(791),r=n.t(t,2),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||s(e,t)||u()}var l=n(184);var f=function(e){var n=c((0,t.useState)(""),2),r=n[0],i=n[1],a=c((0,t.useState)(""),2),o=a[0],s=a[1],u=c((0,t.useState)(!1),2),f=u[0],h=u[1],d=c((0,t.useState)(!1),2),p=(d[0],d[1]),v=c((0,t.useState)(!1),2),m=v[0],g=v[1];(0,t.useEffect)((function(){var e=setTimeout((function(){console.log("Checking form validity!"),p(r.includes("@")&&o.trim().length>8)}),500);return function(){console.log("CLEANUP"),clearTimeout(e)}}),[r,o]);var y=function(){console.log("register btn clicked"),e.onRegisterClicked()};return(0,l.jsxs)("div",{className:"register__div",children:[(0,l.jsxs)("nav",{className:"mobile__nav",children:[(0,l.jsx)("h1",{className:"nav__logo",children:"Ur'sBook"}),(0,l.jsx)("button",{onClick:y,children:"Register"})]}),(0,l.jsx)("div",{className:"login-container",children:(0,l.jsxs)("div",{className:"card",children:[(0,l.jsxs)("div",{className:"card-left",children:[(0,l.jsxs)("h1",{children:["HELLO",(0,l.jsx)("br",{}),"WORLD"]}),(0,l.jsx)("p",{children:"Upload images and videos online to share with your friends across the world. Communicate with new people everyday."}),(0,l.jsx)("span",{children:"Don't have an account?"}),(0,l.jsx)("button",{onClick:y,children:"Register"})]}),(0,l.jsxs)("div",{className:"card-right",children:[(0,l.jsx)("h1",{children:"Login"}),(0,l.jsxs)("form",{children:[(0,l.jsxs)("div",{className:"input ".concat(f?"invalidEmail":""),children:[(0,l.jsx)("input",{type:"email",placeholder:"Email",value:r,onChange:function(e){i(e.target.value)},onBlur:function(){r.includes("@")||h(!0)}}),(0,l.jsxs)("p",{className:"error ".concat(f?"errorEmailMsg":""),children:[" ","Please enter a valid email adress."]})]}),(0,l.jsxs)("div",{className:"input ".concat(m?"invalidPassword":""),children:[(0,l.jsx)("input",{type:"password",placeholder:"Password",value:o,onChange:function(e){s(e.target.value)},onBlur:function(){o.trim().length>8||g(!0)}}),(0,l.jsxs)("p",{className:"error ".concat(m?"errorPasswordMsg":""),children:[" ","Password must have atleast 8 characters."]})]}),(0,l.jsx)("button",{disabled:!r&&!o,type:"submit",onClick:function(t){console.log("login form valid.... calling login page"),t.preventDefault(),e.onLogin(r,o)},children:"Login"})]})]})]})})]})};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}function p(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function g(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function I(e,t){if(t&&("object"===h(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function S(e){var t=x();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return I(this,n)}}function E(e,t,n){return E=x()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&b(i,n.prototype),i},E.apply(null,arguments)}function T(e){var t="function"===typeof Map?new Map:void 0;return T=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return E(e,arguments,_(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,e)},T(e)}var C=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},N={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(C(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new A;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},A=function(e){w(n,e);var t=S(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return g(n)}(T(Error)),R=function(e){return function(e){var t=C(e);return N.encodeByteArray(t,!0)}(e).replace(/\./g,"")},P=function(e){try{return N.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function D(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=D(e[n],t[n]));return e}var O=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},L=function(){try{return O()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/ur-s-book",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&P(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},M=function(){var e;return null===(e=L())||void 0===e?void 0:e.config},j=function(){function e(){var t=this;v(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return g(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function F(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[R(JSON.stringify({alg:"none",type:"JWT"})),R(JSON.stringify(a)),""].join(".")}function U(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function V(){var e,t=null===(e=L())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function z(){return"object"===typeof self&&self.self===self}function B(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function q(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function G(){var e=U();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function K(){return!V()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W(){try{return"object"===typeof indexedDB}catch(e){return!1}}var H=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(k(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(k(a),Q.prototype.create),a}return g(n)}(T(Error)),Q=function(){function e(t,n,r){v(this,e),this.service=t,this.serviceName=n,this.errors=r}return g(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Y,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new H(n,a,t)}}]),e}();var Y=/\{\$([^}]+)}/g;function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function X(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function J(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Z(s)&&Z(u)){if(!J(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Z(e){return null!==e&&"object"===typeof e}function ee(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function te(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ne(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function re(e,t){var n=new ie(e,t);return n.subscribe.bind(n)}var ie=function(){function e(t,n){var r=this;v(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return g(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=y(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ae),void 0===r.error&&(r.error=ae),void 0===r.complete&&(r.complete=ae);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ae(){}function oe(e){return e&&e._delegate?e._delegate:e}function se(){se=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(N){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),s=new E(i||[]);return r(o,"_invoke",{value:_(e,n,s)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var f={};function d(){}function p(){}function v(){}var m={};u(m,a,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(T([])));y&&y!==t&&n.call(y,a)&&(m=y);var k=v.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,s){var u=l(e[r],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==h(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),u(k,s,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function ue(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ce(e){return function(e){if(Array.isArray(e))return o(e)}(e)||ue(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function fe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){le(a,r,i,o,s,"next",e)}function s(e){le(a,r,i,o,s,"throw",e)}o(void 0)}))}}var he=function(){function e(t,n,r){v(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return g(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),de="[DEFAULT]",pe=function(){function e(t,n){v(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return g(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new j;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:de})}catch(u){}var t,n=y(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=fe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ce(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ce(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=y(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=c(i.value,2),u=s[0],l=s[1];r===this.normalizeInstanceIdentifier(u)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ve(t),options:r}),this.instances.set(t,i),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(a){}return i||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;return this.component?this.component.multipleInstances?e:de:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();function ve(e){return e===de?void 0:e}var me,ge,ye=function(){function e(t){v(this,e),this.name=t,this.providers=new Map}return g(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new pe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ke=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ge||(ge={}));var be={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},we=ge.INFO,_e=(p(me={},ge.DEBUG,"log"),p(me,ge.VERBOSE,"log"),p(me,ge.INFO,"info"),p(me,ge.WARN,"warn"),p(me,ge.ERROR,"error"),me),xe=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=_e[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Ie=function(){function e(t){v(this,e),this.name=t,this._logLevel=we,this._logHandler=xe,this._userLogHandler=null,ke.push(this)}return g(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ge))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?be[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ge.DEBUG].concat(t)),this._logHandler.apply(this,[this,ge.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ge.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ge.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ge.INFO].concat(t)),this._logHandler.apply(this,[this,ge.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ge.WARN].concat(t)),this._logHandler.apply(this,[this,ge.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ge.ERROR].concat(t)),this._logHandler.apply(this,[this,ge.ERROR].concat(t))}}]),e}();function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Te,Ce,Ne=function(e,t){return t.some((function(t){return e instanceof t}))};var Ae=new WeakMap,Re=new WeakMap,Pe=new WeakMap,De=new WeakMap,Oe=new WeakMap;var Le={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Re.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Pe.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fe(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Me(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ce||(Ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ue(this),n),Fe(Ae.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Fe(e.apply(Ue(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ue(this),t].concat(r));return Pe.set(a,t.sort?t.sort():[t]),Fe(a)}}function je(e){return"function"===typeof e?Me(e):(e instanceof IDBTransaction&&function(e){if(!Re.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Re.set(e,t)}}(e),Ne(e,Te||(Te=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Le):e)}function Fe(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Fe(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Ae.set(t,e)})).catch((function(){})),Oe.set(t,e),t}(e);if(De.has(e))return De.get(e);var t=je(e);return t!==e&&(De.set(e,t),Oe.set(t,e)),t}var Ue=function(e){return Oe.get(e)};var Ve,ze,Be=["get","getKey","getAll","getAllKeys","count"],qe=["put","add","delete","clear"],Ge=new Map;function Ke(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Ge.get(t))return Ge.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=qe.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Be.includes(n))){var a=function(){var e=fe(se().mark((function e(t){var a,o,s,u,c,l,f=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=f.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=f[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Ge.set(t,a),a}}}Le=function(e){return Ee(Ee({},e),{},{get:function(t,n,r){return Ke(t,n)||e.get(t,n,r)},has:function(t,n){return!!Ke(t,n)||e.has(t,n)}})}(Le);var We=function(){function e(t){v(this,e),this.container=t}return g(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var He="@firebase/app",Qe="0.10.0",Ye=new Ie("@firebase/app"),$e="[DEFAULT]",Xe=(p(Ve={},He,"fire-core"),p(Ve,"@firebase/app-compat","fire-core-compat"),p(Ve,"@firebase/analytics","fire-analytics"),p(Ve,"@firebase/analytics-compat","fire-analytics-compat"),p(Ve,"@firebase/app-check","fire-app-check"),p(Ve,"@firebase/app-check-compat","fire-app-check-compat"),p(Ve,"@firebase/auth","fire-auth"),p(Ve,"@firebase/auth-compat","fire-auth-compat"),p(Ve,"@firebase/database","fire-rtdb"),p(Ve,"@firebase/database-compat","fire-rtdb-compat"),p(Ve,"@firebase/functions","fire-fn"),p(Ve,"@firebase/functions-compat","fire-fn-compat"),p(Ve,"@firebase/installations","fire-iid"),p(Ve,"@firebase/installations-compat","fire-iid-compat"),p(Ve,"@firebase/messaging","fire-fcm"),p(Ve,"@firebase/messaging-compat","fire-fcm-compat"),p(Ve,"@firebase/performance","fire-perf"),p(Ve,"@firebase/performance-compat","fire-perf-compat"),p(Ve,"@firebase/remote-config","fire-rc"),p(Ve,"@firebase/remote-config-compat","fire-rc-compat"),p(Ve,"@firebase/storage","fire-gcs"),p(Ve,"@firebase/storage-compat","fire-gcs-compat"),p(Ve,"@firebase/firestore","fire-fst"),p(Ve,"@firebase/firestore-compat","fire-fst-compat"),p(Ve,"fire-js","fire-js"),p(Ve,"firebase","fire-js-all"),Ve),Je=new Map,Ze=new Map,et=new Map;function tt(e,t){try{e.container.addComponent(t)}catch(n){Ye.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function nt(e,t){e.container.addOrOverwriteComponent(t)}function rt(e){var t=e.name;if(et.has(t))return Ye.debug("There were multiple attempts to register component ".concat(t,".")),!1;et.set(t,e);var n,r=y(Je.values());try{for(r.s();!(n=r.n()).done;){tt(n.value,e)}}catch(o){r.e(o)}finally{r.f()}var i,a=y(Ze.values());try{for(a.s();!(i=a.n()).done;){tt(i.value,e)}}catch(o){a.e(o)}finally{a.f()}return!0}function it(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function at(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$e;it(e,t).clearInstance(n)}function ot(e){return void 0!==e.options}function st(e){return void 0!==e.settings}function ut(){et.clear()}var ct=(p(ze={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),p(ze,"bad-app-name","Illegal App name: '{$appName}'"),p(ze,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),p(ze,"app-deleted","Firebase App named '{$appName}' already deleted"),p(ze,"server-app-deleted","Firebase Server App has been deleted"),p(ze,"no-options","Need to provide options, when not being deployed to hosting via source."),p(ze,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),p(ze,"invalid-log-argument","First argument to `onLog` must be null or a function."),p(ze,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),p(ze,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),p(ze,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),p(ze,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),p(ze,"finalization-registry-not-supported","FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry."),p(ze,"invalid-server-app-environment","FirebaseServerApp is not for use in browser environments."),ze),lt=new Q("app","Firebase",ct),ft=function(){function e(t,n,r){var i=this;v(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new he("app",(function(){return i}),"PUBLIC"))}return g(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw lt.create("app-deleted",{appName:this._name})}}]),e}(),ht=function(e){w(n,e);var t=S(n);function n(e,r,i,a){var o;v(this,n);var s=void 0!==r.automaticDataCollectionEnabled&&r.automaticDataCollectionEnabled,u={name:i,automaticDataCollectionEnabled:s};if(void 0!==e.apiKey)o=t.call(this,e,u,a);else{var c=e;o=t.call(this,c.options,u,a)}return o._serverConfig=Object.assign({automaticDataCollectionEnabled:s},r),o._finalizationRegistry=new FinalizationRegistry((function(){o.automaticCleanup()})),o._refCount=0,o.incRefCount(o._serverConfig.releaseOnDeref),o._serverConfig.releaseOnDeref=void 0,r.releaseOnDeref=void 0,bt(He,Qe,"serverapp"),I(o)}return g(n,[{key:"refCount",get:function(){return this._refCount}},{key:"incRefCount",value:function(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}},{key:"decRefCount",value:function(){return this.isDeleted?0:--this._refCount}},{key:"automaticCleanup",value:function(){yt(this)}},{key:"settings",get:function(){return this.checkDestroyed(),this._serverConfig}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw lt.create("server-app-deleted")}}]),n}(ft),dt="10.10.0";function pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:$e,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw lt.create("bad-app-name",{appName:String(i)});if(n||(n=M()),!n)throw lt.create("no-options");var a=Je.get(i);if(a){if(J(n,a.options)&&J(r,a.config))return a;throw lt.create("duplicate-app",{appName:i})}var o,s=new ye(i),u=y(et.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new ft(n,r,s);return Je.set(i,l),l}function vt(e,t){if(z())throw lt.create("invalid-server-app-environment");var n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=ot(e)?e.options:e;var r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw lt.create("finalization-registry-not-supported",{});var i=""+ce(JSON.stringify(r)).reduce((function(e,t){return Math.imul(31,e)+t.charCodeAt(0)|0}),0),a=Ze.get(i);if(a)return a.incRefCount(t.releaseOnDeref),a;var o,s=new ye(i),u=y(et.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new ht(n,t,i,s);return Ze.set(i,l),l}function mt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=Je.get(e);if(!t&&e===$e&&M())return pt();if(!t)throw lt.create("no-app",{appName:e});return t}function gt(){return Array.from(Je.values())}function yt(e){return kt.apply(this,arguments)}function kt(){return(kt=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,r=t.name,Je.has(r)?(n=!0,Je.delete(r)):Ze.has(r)&&t.decRefCount()<=0&&(Ze.delete(r),n=!0),!n){e.next=7;break}return e.next=6,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 6:t.isDeleted=!0;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(e,t,n){var r,i=null!==(r=Xe[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ye.warn(s.join(" "))}rt(new he("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function wt(e,t){if(null!==e&&"function"!==typeof e)throw lt.create("invalid-log-argument");!function(e,t){var n,r=y(ke);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=be[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ge[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function _t(e){var t;t=e,ke.forEach((function(e){e.setLogLevel(t)}))}var xt="firebase-heartbeat-database",It=1,St="firebase-heartbeat-store",Et=null;function Tt(){return Et||(Et=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Fe(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Fe(s.result),e.oldVersion,e.newVersion,Fe(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}(xt,It,{upgrade:function(e,t){if(0===t)try{e.createObjectStore(St)}catch(n){console.warn(n)}}}).catch((function(e){throw lt.create("idb-open",{originalErrorMessage:e.message})}))),Et}function Ct(e){return Nt.apply(this,arguments)}function Nt(){return Nt=fe(se().mark((function e(t){var n,r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Tt();case 3:return n=e.sent,r=n.transaction(St),e.next=7,r.objectStore(St).get(Pt(t));case 7:return i=e.sent,e.next=10,r.done;case 10:return e.abrupt("return",i);case 13:e.prev=13,e.t0=e.catch(0),e.t0 instanceof H?Ye.warn(e.t0.message):(a=lt.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ye.warn(a.message));case 16:case"end":return e.stop()}}),e,null,[[0,13]])}))),Nt.apply(this,arguments)}function At(e,t){return Rt.apply(this,arguments)}function Rt(){return Rt=fe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Tt();case 3:return r=e.sent,i=r.transaction(St,"readwrite"),a=i.objectStore(St),e.next=8,a.put(n,Pt(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof H?Ye.warn(e.t0.message):(o=lt.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ye.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Rt.apply(this,arguments)}function Pt(e){return"".concat(e.name,"!").concat(e.options.appId)}var Dt=function(){function e(t){var n=this;v(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ft(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return g(e,[{key:"triggerHeartbeat",value:function(){var e=fe(se().mark((function e(){var t,n,r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.container.getProvider("platform-logger").getImmediate(),i=r.getPlatformInfoString(),a=Ot(),null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)){e.next=9;break}return e.next=6,this._heartbeatsCachePromise;case 6:if(this._heartbeatsCache=e.sent,null!=(null===(n=this._heartbeatsCache)||void 0===n?void 0:n.heartbeats)){e.next=9;break}return e.abrupt("return");case 9:if(this._heartbeatsCache.lastSentHeartbeatDate!==a&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===a}))){e.next=13;break}return e.abrupt("return");case 13:this._heartbeatsCache.heartbeats.push({date:a,agent:i});case 14:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=fe(se().mark((function e(){var t,n,r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(n=Ot(),r=Lt(this._heartbeatsCache.heartbeats),i=r.heartbeatsToSend,a=r.unsentEntries,o=R(JSON.stringify({version:2,heartbeats:i})),this._heartbeatsCache.lastSentHeartbeatDate=n,!(a.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=a,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ot(){return(new Date).toISOString().substring(0,10)}function Lt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=y(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Ut(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Ut(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Mt,jt,Ft=function(){function e(t){v(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return g(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=fe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Ct(this.app);case 9:if(!(null===(t=e.sent)||void 0===t?void 0:t.heartbeats)){e.next=14;break}return e.abrupt("return",t);case 14:return e.abrupt("return",{heartbeats:[]});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",At(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",At(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(ce(r.heartbeats),ce(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ut(e){return R(JSON.stringify({version:2,heartbeats:e})).length}Mt="",rt(new he("platform-logger",(function(e){return new We(e)}),"PRIVATE")),rt(new he("heartbeat",(function(e){return new Dt(e)}),"PRIVATE")),bt(He,Qe,Mt),bt(He,Qe,"esm2017"),bt("fire-js","");var Vt=function(){function e(t,n){var r=this;v(this,e),this._delegate=t,this.firebase=n,tt(t,new he("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return g(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),yt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$e;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$e;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){tt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){nt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),zt=(p(jt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),p(jt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),jt),Bt=new Q("app-compat","Firebase",zt);var qt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=pt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if($(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:bt,setLogLevel:_t,onLog:wt,apps:null,SDK_VERSION:dt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(rt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Bt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&D(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!$(n,e=e||$e))throw Bt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Vt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){D(n,e)},createSubscribe:re,ErrorFactory:Q,deepExtend:D}),n}(),Gt=new Ie("@firebase/app-compat");if(z()&&void 0!==self.firebase){Gt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Kt=self.firebase.SDK_VERSION;Kt&&Kt.indexOf("LITE")>=0&&Gt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Wt=qt;!function(e){bt("@firebase/app-compat","0.2.30",e)}();function Ht(){return Ht="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ht.apply(this,arguments)}Wt.registerVersion("firebase","10.10.0","app-compat");var Qt,Yt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},$t={},Xt=Xt||{},Jt=Yt||self;function Zt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function en(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var tn="closure_uid_"+(1e9*Math.random()>>>0),nn=0;function rn(e,t,n){return e.call.apply(e.bind,arguments)}function an(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function on(e,t,n){return(on=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rn:an).apply(null,arguments)}function sn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function un(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function cn(){this.s=this.s,this.o=this.o}cn.prototype.s=!1,cn.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,tn)&&e[tn]||(e[tn]=++nn))},cn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ln=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function fn(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function hn(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Zt(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function dn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}dn.prototype.h=function(){this.defaultPrevented=!0};var pn=function(){if(!Jt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{var n=function(){};Jt.addEventListener("test",n,t),Jt.removeEventListener("test",n,t)}catch(n){}return e}();function vn(e){return/^[\s\xa0]*$/.test(e)}function mn(){var e=Jt.navigator;return e&&(e=e.userAgent)?e:""}function gn(e){return-1!=mn().indexOf(e)}function yn(e){return yn[" "](e),e}yn[" "]=function(){};var kn,bn,wn=gn("Opera"),_n=gn("Trident")||gn("MSIE"),xn=gn("Edge"),In=xn||_n,Sn=gn("Gecko")&&!(-1!=mn().toLowerCase().indexOf("webkit")&&!gn("Edge"))&&!(gn("Trident")||gn("MSIE"))&&!gn("Edge"),En=-1!=mn().toLowerCase().indexOf("webkit")&&!gn("Edge");function Tn(){var e=Jt.document;return e?e.documentMode:void 0}e:{var Cn="",Nn=function(){var e=mn();return Sn?/rv:([^\);]+)(\)|;)/.exec(e):xn?/Edge\/([\d\.]+)/.exec(e):_n?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):En?/WebKit\/(\S+)/.exec(e):wn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Nn&&(Cn=Nn?Nn[1]:""),_n){var An=Tn();if(null!=An&&An>parseFloat(Cn)){kn=String(An);break e}}kn=Cn}if(Jt.document&&_n){var Rn=Tn();bn=Rn||(parseInt(kn,10)||void 0)}else bn=void 0;var Pn=bn;function Dn(e,t){if(dn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Sn){e:{try{yn(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:On[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Dn.$.h.call(this)}}un(Dn,dn);var On={2:"touch",3:"pen",4:"mouse"};Dn.prototype.h=function(){Dn.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ln="closure_listenable_"+(1e6*Math.random()|0),Mn=0;function jn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Mn,this.fa=this.ia=!1}function Fn(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Un(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Vn(e){var t={};for(var n in e)t[n]=e[n];return t}var zn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bn(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<zn.length;a++)n=zn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function qn(e){this.src=e,this.g={},this.h=0}function Gn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=ln(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Fn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Kn(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}qn.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Kn(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new jn(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Wn="closure_lm_"+(1e6*Math.random()|0),Hn={};function Qn(e,t,n,r,i){if(r&&r.once)return $n(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Qn(e,t[a],n,r,i);return null}return n=rr(n),e&&e[Ln]?e.O(t,n,en(r)?!!r.capture:!!r,i):Yn(e,t,n,!1,r,i)}function Yn(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=en(i)?!!i.capture:!!i,s=tr(e);if(s||(e[Wn]=s=new qn(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=er;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)pn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Zn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function $n(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)$n(e,t[a],n,r,i);return null}return n=rr(n),e&&e[Ln]?e.P(t,n,en(r)?!!r.capture:!!r,i):Yn(e,t,n,!0,r,i)}function Xn(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Xn(e,t[a],n,r,i);else r=en(r)?!!r.capture:!!r,n=rr(n),e&&e[Ln]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Kn(a=e.g[t],n,r,i))&&(Fn(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=tr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Kn(t,n,r,i)),(n=-1<e?t[e]:null)&&Jn(n))}function Jn(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Ln])Gn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Zn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=tr(t))?(Gn(n,e),0==n.h&&(n.src=null,t[Wn]=null)):Fn(e)}}}function Zn(e){return e in Hn?Hn[e]:Hn[e]="on"+e}function er(e,t){if(e.fa)e=!0;else{t=new Dn(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Jn(e),e=n.call(r,t)}return e}function tr(e){return(e=e[Wn])instanceof qn?e:null}var nr="__closure_events_fn_"+(1e9*Math.random()>>>0);function rr(e){return"function"===typeof e?e:(e[nr]||(e[nr]=function(t){return e.handleEvent(t)}),e[nr])}function ir(){cn.call(this),this.i=new qn(this),this.S=this,this.J=null}function ar(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new dn(t,e);else if(t instanceof dn)t.target=t.target||e;else{var i=t;Bn(t=new dn(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=or(o,r,!0,t)&&i}if(i=or(o=t.g=e,r,!0,t)&&i,i=or(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=or(o=t.g=n[a],r,!1,t)&&i}function or(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&Gn(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}un(ir,cn),ir.prototype[Ln]=!0,ir.prototype.removeEventListener=function(e,t,n,r){Xn(this,e,t,n,r)},ir.prototype.N=function(){if(ir.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Fn(n[r]);delete t.g[e],t.h--}}this.J=null},ir.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ir.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var sr=Jt.JSON.stringify,ur=function(){function e(t,n){v(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return g(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function cr(){var e=gr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var lr=function(){function e(){v(this,e),this.h=this.g=null}return g(e,[{key:"add",value:function(e,t){var n=fr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),fr=new ur((function(){return new hr}),(function(e){return e.reset()})),hr=function(){function e(){v(this,e),this.next=this.g=this.h=null}return g(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function dr(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function pr(e){Jt.setTimeout((function(){throw e}),0)}var vr,mr=!1,gr=new lr,yr=function(){var e=Jt.Promise.resolve(void 0);vr=function(){e.then(kr)}},kr=function(){for(var e;e=cr();){try{e.h.call(e.g)}catch(n){pr(n)}var t=fr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}mr=!1};function br(e,t){ir.call(this),this.h=e||1,this.g=t||Jt,this.j=on(this.qb,this),this.l=Date.now()}function wr(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function _r(e,t,n){if("function"===typeof e)n&&(e=on(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=on(e.handleEvent,e)}return 2147483647<Number(t)?-1:Jt.setTimeout(e,t||0)}function xr(e){e.g=_r((function(){e.g=null,e.i&&(e.i=!1,xr(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}un(br,ir),(Qt=br.prototype).ga=!1,Qt.T=null,Qt.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ar(this,"tick"),this.ga&&(wr(this),this.start()))}},Qt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qt.N=function(){br.$.N.call(this),wr(this),delete this.g};var Ir=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return g(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:xr(this)}},{key:"N",value:function(){Ht(_(n.prototype),"N",this).call(this),this.g&&(Jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(cn);function Sr(e){cn.call(this),this.h=e,this.g={}}un(Sr,cn);var Er=[];function Tr(e,t,n,r){Array.isArray(n)||(n&&(Er[0]=n.toString()),n=Er);for(var i=0;i<n.length;i++){var a=Qn(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Cr(e){Un(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Jn(e)}),e),e.g={}}function Nr(){this.g=!0}function Ar(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return sr(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Sr.prototype.N=function(){Sr.$.N.call(this),Cr(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Nr.prototype.Ea=function(){this.g=!1},Nr.prototype.info=function(){};var Rr={},Pr=null;function Dr(){return Pr=Pr||new ir}function Or(e){dn.call(this,Rr.Ta,e)}function Lr(e){var t=Dr();ar(t,new Or(t))}function Mr(e,t){dn.call(this,Rr.STAT_EVENT,e),this.stat=t}function jr(e){var t=Dr();ar(t,new Mr(t,e))}function Fr(e,t){dn.call(this,Rr.Ua,e),this.size=t}function Ur(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Jt.setTimeout((function(){e()}),t)}Rr.Ta="serverreachability",un(Or,dn),Rr.STAT_EVENT="statevent",un(Mr,dn),Rr.Ua="timingevent",un(Fr,dn);var Vr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},zr={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Br(){}function qr(e){return e.h||(e.h=e.i())}function Gr(){}Br.prototype.h=null;var Kr,Wr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Hr(){dn.call(this,"d")}function Qr(){dn.call(this,"c")}function Yr(){}function $r(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Sr(this),this.P=Jr,e=In?125:void 0,this.V=new br(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Xr}function Xr(){this.i=null,this.g="",this.h=!1}un(Hr,dn),un(Qr,dn),un(Yr,Br),Yr.prototype.g=function(){return new XMLHttpRequest},Yr.prototype.i=function(){return{}},Kr=new Yr;var Jr=45e3,Zr={},ei={};function ti(e,t,n){e.L=1,e.A=bi(vi(t)),e.u=n,e.S=!0,ni(e,null)}function ni(e,t){e.G=Date.now(),oi(e),e.B=vi(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Di(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Xr,e.g=Oa(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Ir(on(e.Pa,e,e.g),e.O)),Tr(e.U,e.g,"readystatechange",e.nb),t=e.I?Vn(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Lr(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function ri(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function ii(e,t,n){for(var r,i=!0;!e.J&&e.o<n.length;){if((r=ai(e,n))==ei){4==t&&(e.s=4,jr(14),i=!1),Ar(e.j,e.m,null,"[Incomplete Response]");break}if(r==Zr){e.s=4,jr(15),Ar(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ar(e.j,e.m,r,null),fi(e,r)}ri(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,jr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ea(t),t.M=!0,jr(11))):(Ar(e.j,e.m,n,"[Invalid Chunked Response]"),li(e),ci(e))}function ai(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?ei:(n=Number(t.substring(n,r)),isNaN(n)?Zr:(r+=1)+n>t.length?ei:(t=t.slice(r,r+n),e.o=r+n,t))}function oi(e){e.Y=Date.now()+e.P,si(e,e.P)}function si(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Ur(on(e.lb,e),t)}function ui(e){e.C&&(Jt.clearTimeout(e.C),e.C=null)}function ci(e){0==e.l.H||e.J||Na(e.l,e)}function li(e){ui(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,wr(e.V),Cr(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function fi(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Vi(n.i,e)))if(!e.K&&Vi(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ca(n),ya(n)}Sa(n),jr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ur(on(n.ib,n),6e3));if(1>=Ui(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else Ra(n,11)}else if((e.K||n.g==e)&&Ca(n),!vn(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var s=a[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(zi(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,ki(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Da(r,r.J?r.pa:null,r.Y),d.K){Bi(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.C&&(ui(p),oi(p)),r.g=d}else Ia(r);0<n.j.length&&ba(n)}else"stop"!=a[0]&&"close"!=a[0]||Ra(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Ra(n,7):ga(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Lr()}catch(a){}}function hi(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Zt(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Zt(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Zt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Qt=$r.prototype).setTimeout=function(e){this.P=e},Qt.nb=function(e){e=e.target;var t=this.M;t&&3==fa(e)?t.l():this.Pa(e)},Qt.Pa=function(e){try{if(e==this.g)e:{var t=fa(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||In||this.g&&(this.h.h||this.g.ja()||ha(this.g)))){this.J||4!=t||7==n||Lr(),ui(this);var r=this.g.da();this.ca=r;t:if(ri(this)){var i=ha(this.g);e="";var a=i.length,o=4==fa(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){li(this),ci(this);var s="";break t}this.h.i=new Jt.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.v,this.B,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vn(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.s=3,jr(12),li(this),ci(this);break e}Ar(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fi(this,r)}this.S?(ii(this,t,s),In&&this.i&&3==t&&(Tr(this.U,this.V,"tick",this.mb),this.V.start())):(Ar(this.j,this.m,s,null),fi(this,s)),4==t&&li(this),this.i&&!this.J&&(4==t?Na(this.l,this):(this.i=!1,oi(this)))}else(function(e){var t={};e=(e.g&&2<=fa(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!vn(e[n])){var r=dr(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.s=3,jr(12)):(this.s=0,jr(13)),li(this),ci(this)}}}catch(t){}},Qt.mb=function(){if(this.g){var e=fa(this.g),t=this.g.ja();this.o<t.length&&(ui(this),ii(this,e,t),this.i&&4!=e&&oi(this))}},Qt.cancel=function(){this.J=!0,li(this)},Qt.lb=function(){this.C=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Lr(),jr(17)),li(this),this.s=2,ci(this)):si(this,this.Y-e)};var di=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pi(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof pi){this.h=e.h,mi(this,e.j),this.s=e.s,this.g=e.g,gi(this,e.m),this.l=e.l;var t=e.i,n=new Ni;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),yi(this,n),this.o=e.o}else e&&(t=String(e).match(di))?(this.h=!1,mi(this,t[1]||"",!0),this.s=wi(t[2]||""),this.g=wi(t[3]||"",!0),gi(this,t[4]),this.l=wi(t[5]||"",!0),yi(this,t[6]||"",!0),this.o=wi(t[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}function vi(e){return new pi(e)}function mi(e,t,n){e.j=n?wi(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function gi(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function yi(e,t,n){t instanceof Ni?(e.i=t,function(e,t){t&&!e.j&&(Ai(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ri(this,t),Di(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=_i(t,Ti)),e.i=new Ni(t,e.h))}function ki(e,t,n){e.i.set(t,n)}function bi(e){return ki(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function wi(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function _i(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,xi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function xi(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}pi.prototype.toString=function(){var e=[],t=this.j;t&&e.push(_i(t,Ii,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(_i(t,Ii,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(_i(n,"/"==n.charAt(0)?Ei:Si,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",_i(n,Ci)),e.join("")};var Ii=/[#\/\?@]/g,Si=/[#\?:]/g,Ei=/[#\?]/g,Ti=/[#\?@]/g,Ci=/#/g;function Ni(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ai(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ri(e,t){Ai(e),t=Oi(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Pi(e,t){return Ai(e),t=Oi(e,t),e.g.has(t)}function Di(e,t,n){Ri(e,t),0<n.length&&(e.i=null,e.g.set(Oi(e,t),fn(n)),e.h+=n.length)}function Oi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Qt=Ni.prototype).add=function(e,t){Ai(this),this.i=null,e=Oi(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Qt.forEach=function(e,t){Ai(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Qt.ta=function(){Ai(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Qt.Z=function(e){Ai(this);var t=[];if("string"===typeof e)Pi(this,e)&&(t=t.concat(this.g.get(Oi(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Qt.set=function(e,t){return Ai(this),this.i=null,Pi(this,e=Oi(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Qt.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Qt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Li=g((function e(t,n){v(this,e),this.g=t,this.map=n}));function Mi(e){this.l=e||ji,Jt.PerformanceNavigationTiming?e=0<(e=Jt.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Jt.g&&Jt.g.Ka&&Jt.g.Ka()&&Jt.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ji=10;function Fi(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ui(e){return e.h?1:e.g?e.g.size:0}function Vi(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function zi(e,t){e.g?e.g.add(t):e.h=t}function Bi(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function qi(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=y(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return fn(e.i)}Mi.prototype.cancel=function(){if(this.i=qi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=y(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var Gi,Ki=function(){function e(){v(this,e)}return g(e,[{key:"stringify",value:function(e){return Jt.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Jt.JSON.parse(e,void 0)}}]),e}();function Wi(){this.g=new Ki}function Hi(e,t,n){var r=n||"";try{hi(e,(function(e,n){var i=e;en(e)&&(i=sr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Qi(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Yi(e){this.l=e.ec||null,this.j=e.ob||!1}function $i(e,t){ir.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Xi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}un(Yi,Br),Yi.prototype.g=function(){return new $i(this.l,this.j)},Yi.prototype.i=(Gi={},function(){return Gi}),un($i,ir);var Xi=0;function Ji(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Zi(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ea(e)}function ea(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Qt=$i.prototype).open=function(e,t){if(this.readyState!=Xi)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ea(this)},Qt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Jt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Qt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zi(this)),this.readyState=Xi},Qt.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ea(this)),this.g&&(this.readyState=3,ea(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Jt.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ji(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Qt.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Zi(this):ea(this),3==this.readyState&&Ji(this)}},Qt.Za=function(e){this.g&&(this.response=this.responseText=e,Zi(this))},Qt.Ya=function(e){this.g&&(this.response=e,Zi(this))},Qt.ka=function(){this.g&&Zi(this)},Qt.setRequestHeader=function(e,t){this.v.append(e,t)},Qt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Qt.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty($i.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ta=Jt.JSON.parse;function na(e){ir.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ra,this.L=this.M=!1}un(na,ir);var ra="",ia=/^https?$/i,aa=["POST","PUT"];function oa(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,sa(e),ca(e)}function sa(e){e.F||(e.F=!0,ar(e,"complete"),ar(e,"error"))}function ua(e){if(e.h&&"undefined"!=typeof Xt&&(!e.C[1]||4!=fa(e)||2!=e.da()))if(e.v&&4==fa(e))_r(e.La,0,e);else if(ar(e,"readystatechange"),4==fa(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(di)[1]||null;!a&&Jt.self&&Jt.self.location&&(a=Jt.self.location.protocol.slice(0,-1)),i=!ia.test(a?a.toLowerCase():"")}t=i}if(t)ar(e,"complete"),ar(e,"success");else{e.m=6;try{var o=2<fa(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",sa(e)}}finally{ca(e)}}}function ca(e,t){if(e.g){la(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||ar(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function la(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Jt.clearTimeout(e.A),e.A=null)}function fa(e){return e.g?e.g.readyState:0}function ha(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ra:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(bo){return null}}function da(e){var t="";return Un(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function pa(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=da(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ki(e,t,n))}function va(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ma(e){this.Ga=0,this.j=[],this.l=new Nr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=va("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=va("baseRetryDelayMs",5e3,e),this.hb=va("retryDelaySeedMs",1e4,e),this.eb=va("forwardChannelMaxRetries",2,e),this.xa=va("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Mi(e&&e.concurrentRequestLimit),this.Ja=new Wi,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ga(e){if(ka(e),3==e.H){var t=e.W++,n=vi(e.I);if(ki(n,"SID",e.K),ki(n,"RID",t),ki(n,"TYPE","terminate"),_a(e,n),(t=new $r(e,e.l,t)).L=2,t.A=bi(vi(n)),n=!1,Jt.navigator&&Jt.navigator.sendBeacon)try{n=Jt.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Jt.Image&&((new Image).src=t.A,n=!0),n||(t.g=Oa(t.l,null),t.g.ha(t.A)),t.G=Date.now(),oi(t)}Pa(e)}function ya(e){e.g&&(Ea(e),e.g.cancel(),e.g=null)}function ka(e){ya(e),e.u&&(Jt.clearTimeout(e.u),e.u=null),Ca(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Jt.clearTimeout(e.m),e.m=null)}function ba(e){if(!Fi(e.i)&&!e.m){e.m=!0;var t=e.Na;vr||yr(),mr||(vr(),mr=!0),gr.add(t,e),e.C=0}}function wa(e,t){var n;n=t?t.m:e.W++;var r=vi(e.I);ki(r,"SID",e.K),ki(r,"RID",n),ki(r,"AID",e.V),_a(e,r),e.o&&e.s&&pa(r,e.o,e.s),n=new $r(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=xa(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),zi(e.i,n),ti(n,r,t)}function _a(e,t){e.na&&Un(e.na,(function(e,n){ki(t,n,e)})),e.h&&hi({},(function(e,n){ki(t,n,e)}))}function xa(e,t,n){n=Math.min(e.j.length,n);var r=e.h?on(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].g,l=i[u].map;if(0>(c-=a))a=Math.max(0,i[u].g-100),s=!1;else try{Hi(l,o,"req"+c+"_")}catch(js){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function Ia(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;vr||yr(),mr||(vr(),mr=!0),gr.add(t,e),e.A=0}}function Sa(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Ur(on(e.Ma,e),Aa(e,e.A)),e.A++,!0)}function Ea(e){null!=e.B&&(Jt.clearTimeout(e.B),e.B=null)}function Ta(e){e.g=new $r(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=vi(e.wa);ki(t,"RID","rpc"),ki(t,"SID",e.K),ki(t,"AID",e.V),ki(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ki(t,"TO",e.qa),ki(t,"TYPE","xmlhttp"),_a(e,t),e.o&&e.s&&pa(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=bi(vi(t)),n.u=null,n.S=!0,ni(n,e)}function Ca(e){null!=e.v&&(Jt.clearTimeout(e.v),e.v=null)}function Na(e,t){var n=null;if(e.g==t){Ca(e),Ea(e),e.g=null;var r=2}else{if(!Vi(e.i,t))return;n=t.F,Bi(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;ar(r=Dr(),new Fr(r,n)),ba(e)}else Ia(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Ui(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Ur(on(e.Na,e,t),Aa(e,e.C)),e.C++,!0))}(e,t)||2==r&&Sa(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ra(e,5);break;case 4:Ra(e,10);break;case 3:Ra(e,6);break;default:Ra(e,2)}}function Aa(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Ra(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=on(e.pb,e);n||(n=new pi("//www.google.com/images/cleardot.gif"),Jt.location&&"http"==Jt.location.protocol||mi(n,"https"),bi(n)),function(e,t){var n=new Nr;if(Jt.Image){var r=new Image;r.onload=sn(Qi,n,r,"TestLoadImage: loaded",!0,t),r.onerror=sn(Qi,n,r,"TestLoadImage: error",!1,t),r.onabort=sn(Qi,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=sn(Qi,n,r,"TestLoadImage: timeout",!1,t),Jt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else jr(2);e.H=0,e.h&&e.h.za(t),Pa(e),ka(e)}function Pa(e){if(e.H=0,e.ma=[],e.h){var t=qi(e.i);0==t.length&&0==e.j.length||(hn(e.ma,t),hn(e.ma,e.j),e.i.i.length=0,fn(e.j),e.j.length=0),e.h.ya()}}function Da(e,t,n){var r=n instanceof pi?vi(n):new pi(n);if(""!=r.g)t&&(r.g=t+"."+r.g),gi(r,r.m);else{var i=Jt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new pi(null);r&&mi(a,r),t&&(a.g=t),i&&gi(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&ki(r,n,t),ki(r,"VER",e.ra),_a(e,r),r}function Oa(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new na(new Yi({ob:n})):new na(e.va)).Oa(e.J),t}function La(){}function Ma(){if(_n&&!(10<=Number(Pn)))throw Error("Environmental error: no available transport.")}function ja(e,t){ir.call(this),this.g=new ma(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!vn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!vn(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Va(this)}function Fa(e){Hr.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ua(){Qr.call(this),this.status=1}function Va(e){this.g=e}function za(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ba(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function qa(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Qt=na.prototype).Oa=function(e){this.M=e},Qt.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Kr.g(),this.C=this.u?qr(this.u):qr(Kr),this.g.onreadystatechange=on(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void oa(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=y(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Jt.FormData&&e instanceof Jt.FormData,!(0<=ln(aa,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,l=y(n);try{for(l.s();!(u=l.n()).done;){var f=c(u.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{la(this),0<this.B&&((this.L=function(e){return _n&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=on(this.ua,this)):this.A=_r(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){oa(this,s)}},Qt.ua=function(){"undefined"!=typeof Xt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ar(this,"timeout"),this.abort(8))},Qt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ar(this,"complete"),ar(this,"abort"),ca(this))},Qt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ca(this,!0)),na.$.N.call(this)},Qt.La=function(){this.s||(this.G||this.v||this.l?ua(this):this.kb())},Qt.kb=function(){ua(this)},Qt.isActive=function(){return!!this.g},Qt.da=function(){try{return 2<fa(this)?this.g.status:-1}catch(Gi){return-1}},Qt.ja=function(){try{return this.g?this.g.responseText:""}catch(Gi){return""}},Qt.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ta(t)}},Qt.Ia=function(){return this.m},Qt.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Qt=ma.prototype).ra=8,Qt.H=1,Qt.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new $r(this,this.l,e),n=this.s;if(this.U&&(n?Bn(n=Vn(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=xa(this,t,r),ki(i=vi(this.I),"RID",e),ki(i,"CVER",22),this.F&&ki(i,"X-HTTP-Session-Id",this.F),_a(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(da(n)))+"&"+r:this.o&&pa(i,this.o,n)),zi(this.i,t),this.bb&&ki(i,"TYPE","init"),this.P?(ki(i,"$req",r),ki(i,"SID","null"),t.aa=!0,ti(t,i,null)):ti(t,i,r),this.H=2}}else 3==this.H&&(e?wa(this,e):0==this.j.length||Fi(this.i)||wa(this))},Qt.Ma=function(){if(this.u=null,Ta(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ur(on(this.jb,this),e)}},Qt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,jr(10),ya(this),Ta(this))},Qt.ib=function(){null!=this.v&&(this.v=null,ya(this),Sa(this),jr(19))},Qt.pb=function(e){e?(this.l.info("Successfully pinged google.com"),jr(2)):(this.l.info("Failed to ping google.com"),jr(1))},Qt.isActive=function(){return!!this.h&&this.h.isActive(this)},(Qt=La.prototype).Ba=function(){},Qt.Aa=function(){},Qt.za=function(){},Qt.ya=function(){},Qt.isActive=function(){return!0},Qt.Va=function(){},Ma.prototype.g=function(e,t){return new ja(e,t)},un(ja,ir),ja.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;jr(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Da(e,null,e.Y),ba(e)},ja.prototype.close=function(){ga(this.g)},ja.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=sr(e),e=n);t.j.push(new Li(t.fb++,e)),3==t.H&&ba(t)},ja.prototype.N=function(){this.g.h=null,delete this.j,ga(this.g),delete this.g,ja.$.N.call(this)},un(Fa,Hr),un(Ua,Qr),un(Va,La),Va.prototype.Ba=function(){ar(this.g,"a")},Va.prototype.Aa=function(e){ar(this.g,new Fa(e))},Va.prototype.za=function(e){ar(this.g,new Ua)},Va.prototype.ya=function(){ar(this.g,"b")},un(za,(function(){this.blockSize=-1})),za.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},za.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Ba(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Ba(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Ba(this,r),i=0;break}}this.h=i,this.i+=t},za.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Ga={};function Ka(e){return-128<=e&&128>e?function(e,t){var n=Ga;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new qa([0|e],0>e?-1:0)})):new qa([0|e],0>e?-1:0)}function Wa(e){if(isNaN(e)||!isFinite(e))return Qa;if(0>e)return Za(Wa(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Ha;return new qa(t,0)}var Ha=4294967296,Qa=Ka(0),Ya=Ka(1),$a=Ka(16777216);function Xa(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Ja(e){return-1==e.h}function Za(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new qa(n,~e.h).add(Ya)}function eo(e,t){return e.add(Za(t))}function to(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function no(e,t){this.g=e,this.h=t}function ro(e,t){if(Xa(t))throw Error("division by zero");if(Xa(e))return new no(Qa,Qa);if(Ja(e))return t=ro(Za(e),t),new no(Za(t.g),Za(t.h));if(Ja(t))return t=ro(e,Za(t)),new no(Za(t.g),t.h);if(30<e.g.length){if(Ja(e)||Ja(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Ya,r=t;0>=r.X(e);)n=io(n),r=io(r);var i=ao(n,1),a=ao(r,1);for(r=ao(r,2),n=ao(n,2);!Xa(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=ao(r,1),n=ao(n,1)}return t=eo(e,i.R(t)),new no(i,t)}for(i=Qa;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Wa(n)).R(t);Ja(o)||0<o.X(e);)o=(a=Wa(n-=r)).R(t);Xa(a)&&(a=Ya),i=i.add(a),e=eo(e,o)}return new no(i,e)}function io(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new qa(n,e.h)}function ao(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new qa(i,e.h)}(Qt=qa.prototype).ea=function(){if(Ja(this))return-Za(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Ha+r)*t,t*=Ha}return e},Qt.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Xa(this))return"0";if(Ja(this))return"-"+Za(this).toString(e);for(var t=Wa(Math.pow(e,6)),n=this,r="";;){var i=ro(n,t).g,a=((0<(n=eo(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Xa(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Qt.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Qt.X=function(e){return Ja(e=eo(this,e))?-1:Xa(e)?0:1},Qt.abs=function(){return Ja(this)?Za(this):this},Qt.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new qa(n,-2147483648&n[n.length-1]?-1:0)},Qt.R=function(e){if(Xa(this)||Xa(e))return Qa;if(Ja(this))return Ja(e)?Za(this).R(Za(e)):Za(Za(this).R(e));if(Ja(e))return Za(this.R(Za(e)));if(0>this.X($a)&&0>e.X($a))return Wa(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),s=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=o*u,to(n,2*r+2*i),n[2*r+2*i+1]+=a*u,to(n,2*r+2*i+1),n[2*r+2*i+1]+=o*s,to(n,2*r+2*i+1),n[2*r+2*i+2]+=a*s,to(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new qa(n,0)},Qt.gb=function(e){return ro(this,e).h},Qt.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new qa(n,this.h&e.h)},Qt.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new qa(n,this.h|e.h)},Qt.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new qa(n,this.h^e.h)},Ma.prototype.createWebChannel=Ma.prototype.g,ja.prototype.send=ja.prototype.u,ja.prototype.open=ja.prototype.m,ja.prototype.close=ja.prototype.close,Vr.NO_ERROR=0,Vr.TIMEOUT=8,Vr.HTTP_ERROR=6,zr.COMPLETE="complete",Gr.EventType=Wr,Wr.OPEN="a",Wr.CLOSE="b",Wr.ERROR="c",Wr.MESSAGE="d",ir.prototype.listen=ir.prototype.O,na.prototype.listenOnce=na.prototype.P,na.prototype.getLastError=na.prototype.Sa,na.prototype.getLastErrorCode=na.prototype.Ia,na.prototype.getStatus=na.prototype.da,na.prototype.getResponseJson=na.prototype.Wa,na.prototype.getResponseText=na.prototype.ja,na.prototype.send=na.prototype.ha,na.prototype.setWithCredentials=na.prototype.Oa,za.prototype.digest=za.prototype.l,za.prototype.reset=za.prototype.reset,za.prototype.update=za.prototype.j,qa.prototype.add=qa.prototype.add,qa.prototype.multiply=qa.prototype.R,qa.prototype.modulo=qa.prototype.gb,qa.prototype.compare=qa.prototype.X,qa.prototype.toNumber=qa.prototype.ea,qa.prototype.toString=qa.prototype.toString,qa.prototype.getBits=qa.prototype.D,qa.fromNumber=Wa,qa.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Za(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Wa(Math.pow(n,8)),i=Qa,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+o),n);8>o?(o=Wa(Math.pow(n,o)),i=i.R(o).add(Wa(s))):i=(i=i.R(r)).add(Wa(s))}return i};var oo=$t.createWebChannelTransport=function(){return new Ma},so=$t.getStatEventTarget=function(){return Dr()},uo=$t.ErrorCode=Vr,co=$t.EventType=zr,lo=$t.Event=Rr,fo=$t.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ho=($t.FetchXmlHttpFactory=Yi,$t.WebChannel=Gr),po=$t.XhrIo=na,vo=$t.Md5=za,mo=$t.Integer=qa,go="@firebase/firestore",yo=function(){function e(t){v(this,e),this.uid=t}return g(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();yo.UNAUTHENTICATED=new yo(null),yo.GOOGLE_CREDENTIALS=new yo("google-credentials-uid"),yo.FIRST_PARTY=new yo("first-party-uid"),yo.MOCK_USER=new yo("mock-user");var ko="10.10.0",bo=new Ie("@firebase/firestore");function wo(){return bo.logLevel}function _o(e){if(bo.logLevel<=ge.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(So);bo.debug.apply(bo,["Firestore (".concat(ko,"): ").concat(e)].concat(ce(i)))}}function xo(e){if(bo.logLevel<=ge.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(So);bo.error.apply(bo,["Firestore (".concat(ko,"): ").concat(e)].concat(ce(i)))}}function Io(e){if(bo.logLevel<=ge.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(So);bo.warn.apply(bo,["Firestore (".concat(ko,"): ").concat(e)].concat(ce(i)))}}function So(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Eo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ko,") INTERNAL ASSERTION FAILED: ")+e;throw xo(t),new Error(t)}function To(e,t){e||Eo()}function Co(e,t){return e}var No={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ao=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return g(n)}(H),Ro=g((function e(){var t=this;v(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Po=g((function e(t,n){v(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Do=function(){function e(){v(this,e)}return g(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(yo.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Oo=function(){function e(t){v(this,e),this.token=t,this.changeListener=null}return g(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Lo=function(){function e(t){v(this,e),this.t=t,this.currentUser=yo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return g(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Ro;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Ro,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){_o("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(_o("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ro)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(_o("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(To("string"==typeof n.accessToken),new Po(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return To(null===e||"string"==typeof e),new yo(e)}}]),e}(),Mo=function(){function e(t,n,r){v(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=yo.FIRST_PARTY,this.I=new Map}return g(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),jo=function(){function e(t,n,r){v(this,e),this.l=t,this.h=n,this.P=r}return g(e,[{key:"getToken",value:function(){return Promise.resolve(new Mo(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(yo.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Fo=g((function e(t){v(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Uo=function(){function e(t){v(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return g(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&_o("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,_o("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){_o("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):_o("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(To("string"==typeof t.token),e.R=t.token,new Fo(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Vo(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var zo=function(){function e(){v(this,e)}return g(e,null,[{key:"newId",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Vo(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Bo(e,t){return e<t?-1:e>t?1:0}function qo(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Go(e){return e+"\0"}var Ko=function(){function e(t,n){if(v(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Ao(No.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ao(No.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Ao(No.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ao(No.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return g(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Bo(this.nanoseconds,e.nanoseconds):Bo(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Wo=function(){function e(t){v(this,e),this.timestamp=t}return g(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Ko(0,0))}},{key:"max",value:function(){return new e(new Ko(253402300799,999999999))}}]),e}(),Ho=function(){function e(t,n,r){v(this,e),void 0===n?n=0:n>t.length&&Eo(),void 0===r?r=t.length-n:r>t.length-n&&Eo(),this.segments=t,this.offset=n,this.len=r}return g(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Qo=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"toUriEncodedString",value:function(){return this.toArray().map(encodeURIComponent).join("/")}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Ao(No.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,ce(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ho),Yo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$o=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Yo.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Ao(No.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Ao(No.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ao(No.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Ao(No.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ho),Xo=function(){function e(t){v(this,e),this.path=t}return g(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Qo.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Qo.fromString(t))}},{key:"fromName",value:function(t){return new e(Qo.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Qo.emptyPath())}},{key:"comparator",value:function(e,t){return Qo.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Qo(t.slice()))}}]),e}(),Jo=g((function e(t,n,r,i){v(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Zo(e){return e.fields.find((function(e){return 2===e.kind}))}function es(e){return e.fields.filter((function(e){return 2!==e.kind}))}Jo.UNKNOWN_ID=-1;var ts=g((function e(t,n){v(this,e),this.fieldPath=t,this.kind=n}));var ns=function(){function e(t,n){v(this,e),this.sequenceNumber=t,this.offset=n}return g(e,null,[{key:"empty",value:function(){return new e(0,as.min())}}]),e}();function rs(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Wo.fromTimestamp(1e9===r?new Ko(n+1,0):new Ko(n,r));return new as(i,Xo.empty(),t)}function is(e){return new as(e.readTime,e.key,-1)}var as=function(){function e(t,n,r){v(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return g(e,null,[{key:"min",value:function(){return new e(Wo.min(),Xo.empty(),-1)}},{key:"max",value:function(){return new e(Wo.max(),Xo.empty(),-1)}}]),e}();function os(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Xo.comparator(e.documentKey,t.documentKey))?n:Bo(e.largestBatchId,t.largestBatchId)}var ss="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",us=function(){function e(){v(this,e),this.onCommittedListeners=[]}return g(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function cs(e){return ls.apply(this,arguments)}function ls(){return(ls=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===No.FAILED_PRECONDITION&&t.message===ss){e.next=2;break}throw t;case 2:_o("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fs=function(){function e(t){var n=this;v(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return g(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Eo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=y(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),hs=function(){function e(t,n){var r=this;v(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.V=new Ro,this.transaction.oncomplete=function(){r.V.resolve()},this.transaction.onabort=function(){n.error?r.V.reject(new vs(t,n.error)):r.V.resolve()},this.transaction.onerror=function(e){var n=bs(e.target.error);r.V.reject(new vs(t,n))}}return g(e,[{key:"m",get:function(){return this.V.promise}},{key:"abort",value:function(e){e&&this.V.reject(e),this.aborted||(_o("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"g",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new gs(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new vs(n,t)}}}]),e}(),ds=function(){function e(t,n,r){v(this,e),this.name=t,this.version=n,this.p=r,12.2===e.S(U())&&xo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return g(e,[{key:"O",value:function(){var e=fe(se().mark((function e(t){var n=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return _o("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new vs(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Ao(No.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Ao(No.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new vs(t,n))},i.onupgradeneeded=function(e){_o("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.p.N(t,i.transaction,e.oldVersion,n.version).next((function(){_o("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.L&&(this.db.onversionchange=function(e){return n.L(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.L=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=fe(se().mark((function e(t,n,r,i){var a,o,s,u,c=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,s=se().mark((function e(){var n,s,u,l;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.O(t);case 4:return c.db=e.sent,n=hs.open(c.db,t,a?"readonly":"readwrite",r),s=i(n).next((function(e){return n.g(),e})).catch((function(e){return n.abort(e),fs.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.m;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),u=e.t1,l="FirebaseError"!==u.name&&o<3,_o("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(u)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if("object"!==typeof(u=e.t0)){e.next=7;break}return e.abrupt("return",u.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return _o("SimpleDb","Removing database:",e),ys(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!W())return!1;if(e.C())return!0;var t=U(),n=e.S(t),r=0<n&&n<10,i=e.v(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"v",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),ps=function(){function e(t){v(this,e),this.k=t,this.q=!1,this.K=null}return g(e,[{key:"isDone",get:function(){return this.q}},{key:"$",get:function(){return this.K}},{key:"cursor",set:function(e){this.k=e}},{key:"done",value:function(){this.q=!0}},{key:"U",value:function(e){this.K=e}},{key:"delete",value:function(){return ys(this.k.delete())}}]),e}(),vs=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,No.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return g(n)}(Ao);function ms(e){return"IndexedDbTransactionError"===e.name}var gs=function(){function e(t){v(this,e),this.store=t}return g(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(_o("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(_o("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ys(n)}},{key:"add",value:function(e){return _o("SimpleDb","ADD",this.store.name,e,e),ys(this.store.add(e))}},{key:"get",value:function(e){var t=this;return ys(this.store.get(e)).next((function(n){return void 0===n&&(n=null),_o("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return _o("SimpleDb","DELETE",this.store.name,e),ys(this.store.delete(e))}},{key:"count",value:function(){return _o("SimpleDb","COUNT",this.store.name),ys(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){var i=r.getAll(n.range);return new fs((function(e,t){i.onerror=function(e){t(e.target.error)},i.onsuccess=function(t){e(t.target.result)}}))}var a=this.cursor(n),o=[];return this.G(a,(function(e,t){o.push(t)})).next((function(){return o}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new fs((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){_o("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.J=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"Y",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new fs((function(n,r){t.onerror=function(e){var t=bs(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new fs((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new ps(i),o=t(i.primaryKey,i.value,a);if(o instanceof fs){var s=o.catch((function(e){return a.done(),fs.reject(e)}));n.push(s)}a.isDone?r():null===a.$?i.continue():i.continue(a.$)}else r()}})).next((function(){return fs.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function ys(e){return new fs((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=bs(e.target.error);n(t)}}))}var ks=!1;function bs(e){var t=ds.S(U());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Ao("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return ks||(ks=!0,setTimeout((function(){throw r}),0)),r}}return e}var ws=function(){function e(t,n){v(this,e),this.asyncQueue=t,this.X=n,this.task=null}return g(e,[{key:"start",value:function(){this.ee(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"ee",value:function(e){var t=this;_o("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=_o,e.t1="Documents written: ",e.next=6,t.X.te();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackfiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!ms(e.t4)){e.next=17;break}_o("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,cs(e.t4);case 19:return e.next=21,t.ee(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),_s=function(){function e(t,n){v(this,e),this.localStore=t,this.persistence=n}return g(e,[{key:"te",value:function(){var e=fe(se().mark((function e(){var t,n=this,r=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.ne(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ne",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return fs.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return _o("IndexBackfiller","Processing collection: ".concat(t)),n.re(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"re",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ie(i,n)})).next((function(n){return _o("IndexBackfiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ie",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=is(t);os(r,n)>0&&(n=r)})),new as(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),xs=function(){function e(t,n){var r=this;v(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.se(e)},this.oe=function(e){return n.writeSequenceNumber(e)})}return g(e,[{key:"se",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.oe&&this.oe(e),e}}]),e}();function Is(e){return null==e}function Ss(e){return 0===e&&1/e==-1/0}function Es(e){return"number"==typeof e&&Number.isInteger(e)&&!Ss(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Ts(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Ns(t)),t=Cs(e.get(n),t);return Ns(t)}function Cs(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Ns(e){return e+"\x01\x01"}function As(e){var t=e.length;if(To(t>=2),2===t)return To("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Qo.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Eo(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Eo()}a=o+2}return new Qo(r)}xs._e=-1;var Rs=["userId","batchId"];function Ps(e,t){return[e,Ts(t)]}function Ds(e,t,n){return[e,Ts(t),n]}var Os={},Ls=["prefixPath","collectionGroup","readTime","documentId"],Ms=["prefixPath","collectionGroup","documentId"],js=["collectionGroup","readTime","prefixPath","documentId"],Fs=["canonicalId","targetId"],Us=["targetId","path"],Vs=["path","targetId"],zs=["collectionId","parent"],Bs=["indexId","uid"],qs=["uid","sequenceNumber"],Gs=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ks=["indexId","uid","orderedDocumentKey"],Ws=["userId","collectionPath","documentId"],Hs=["userId","collectionPath","largestBatchId"],Qs=["userId","collectionGroup","largestBatchId"],Ys=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),$s=[].concat(ce(Ys),["documentOverlays"]),Xs=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Js=Xs,Zs=[].concat(Js,["indexConfiguration","indexState","indexEntries"]),eu=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).ae=e,i.currentSequenceNumber=r,i}return g(n)}(us);function tu(e,t){var n=Co(e);return ds.M(n.ae,t)}function nu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ru(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function iu(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var au=function(){function e(t,n){v(this,e),this.comparator=t,this.root=n||su.EMPTY}return g(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,su.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,su.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new ou(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new ou(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new ou(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new ou(this.root,e,this.comparator,!0)}}]),e}(),ou=function(){function e(t,n,r,i){v(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return g(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),su=function(){function e(t,n,r,i,a){v(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return g(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Eo();if(this.right.isRed())throw Eo();var e=this.left.check();if(e!==this.right.check())throw Eo();return e+(this.isRed()?0:1)}}]),e}();su.EMPTY=null,su.RED=!0,su.BLACK=!1,su.EMPTY=new(function(){function e(){v(this,e),this.size=0}return g(e,[{key:"key",get:function(){throw Eo()}},{key:"value",get:function(){throw Eo()}},{key:"color",get:function(){throw Eo()}},{key:"left",get:function(){throw Eo()}},{key:"right",get:function(){throw Eo()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new su(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var uu=function(){function e(t){v(this,e),this.comparator=t,this.data=new au(this.comparator)}return g(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new cu(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new cu(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),cu=function(){function e(t){v(this,e),this.iter=t}return g(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function lu(e){return e.hasNext()?e.getNext():void 0}var fu=function(){function e(t){v(this,e),this.fields=t,t.sort($o.comparator)}return g(e,[{key:"unionWith",value:function(t){var n,r=new uu($o.comparator),i=y(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=y(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=y(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return qo(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),hu=function(e){w(n,e);var t=S(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return g(n)}(T(Error));var du=function(e){function t(e){v(this,t),this.binaryString=e}return g(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Bo(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new hu("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();du.EMPTY_BYTE_STRING=new du("");var pu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vu(e){if(To(!!e),"string"==typeof e){var t=0,n=pu.exec(e);if(To(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:mu(e.seconds),nanos:mu(e.nanos)}}function mu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function gu(e){return"string"==typeof e?du.fromBase64String(e):du.fromUint8Array(e)}function yu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ku(e){var t=e.mapValue.fields.__previous_value__;return yu(t)?ku(t):t}function bu(e){var t=vu(e.mapValue.fields.__local_write_time__.timestampValue);return new Ko(t.seconds,t.nanos)}var wu=g((function e(t,n,r,i,a,o,s,u,c){v(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=c})),_u=function(){function e(t,n){v(this,e),this.projectId=t,this.database=n||"(default)"}return g(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),xu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Iu={nullValue:"NULL_VALUE"};function Su(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?yu(e)?4:Uu(e)?9007199254740991:10:Eo()}function Eu(e,t){if(e===t)return!0;var n=Su(e);if(n!==Su(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return bu(e).isEqual(bu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=vu(e.timestampValue),r=vu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return gu(e.bytesValue).isEqual(gu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return mu(e.geoPointValue.latitude)===mu(t.geoPointValue.latitude)&&mu(e.geoPointValue.longitude)===mu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return mu(e.integerValue)===mu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=mu(e.doubleValue),r=mu(t.doubleValue);return n===r?Ss(n)===Ss(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return qo(e.arrayValue.values||[],t.arrayValue.values||[],Eu);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(nu(n)!==nu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Eu(n[i],r[i])))return!1;return!0}(e,t);default:return Eo()}}function Tu(e,t){return void 0!==(e.values||[]).find((function(e){return Eu(e,t)}))}function Cu(e,t){if(e===t)return 0;var n=Su(e),r=Su(t);if(n!==r)return Bo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Bo(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=mu(e.integerValue||e.doubleValue),r=mu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Nu(e.timestampValue,t.timestampValue);case 4:return Nu(bu(e),bu(t));case 5:return Bo(e.stringValue,t.stringValue);case 6:return function(e,t){var n=gu(e),r=gu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Bo(n[i],r[i]);if(0!==a)return a}return Bo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Bo(mu(e.latitude),mu(t.latitude));return 0!==n?n:Bo(mu(e.longitude),mu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Cu(n[i],r[i]);if(a)return a}return Bo(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===xu.mapValue&&t===xu.mapValue)return 0;if(e===xu.mapValue)return 1;if(t===xu.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Bo(r[o],a[o]);if(0!==s)return s;var u=Cu(n[r[o]],i[a[o]]);if(0!==u)return u}return Bo(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Eo()}}function Nu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Bo(e,t);var n=vu(e),r=vu(t),i=Bo(n.seconds,r.seconds);return 0!==i?i:Bo(n.nanos,r.nanos)}function Au(e){return Ru(e)}function Ru(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=vu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return gu(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Xo.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=y(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Ru(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=y(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Ru(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Eo()}function Pu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Du(e){return!!e&&"integerValue"in e}function Ou(e){return!!e&&"arrayValue"in e}function Lu(e){return!!e&&"nullValue"in e}function Mu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ju(e){return!!e&&"mapValue"in e}function Fu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return ru(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Fu(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Fu(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Uu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Vu(e){return"nullValue"in e?Iu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Pu(_u.empty(),Xo.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Eo()}function zu(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Pu(_u.empty(),Xo.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?xu:Eo()}function Bu(e,t){var n=Cu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function qu(e,t){var n=Cu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Gu=function(){function e(t){v(this,e),this.value=t}return g(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ju(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fu(t)}},{key:"setAll",value:function(e){var t=this,n=$o.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Fu(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ju(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Eu(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ju(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){ru(t,(function(t,n){return e[t]=n}));var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Fu(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Ku(e){var t=[];return ru(e.fields,(function(e,n){var r=new $o([e]);if(ju(n)){var i=Ku(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=y(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new fu(t)}var Wu=function(){function e(t,n,r,i,a,o,s){v(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return g(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Wo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Gu.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Gu.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Wo.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Wo.min(),Wo.min(),Wo.min(),Gu.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Wo.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Wo.min(),Wo.min(),Gu.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Wo.min(),Wo.min(),Gu.empty(),2)}}]),e}(),Hu=g((function e(t,n){v(this,e),this.position=t,this.inclusive=n}));function Qu(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Xo.comparator(Xo.fromName(o.referenceValue),n.key):Cu(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Yu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Eu(e.position[n],t.position[n]))return!1;return!0}var $u=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";v(this,e),this.field=t,this.dir=n}));function Xu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Ju=g((function e(){v(this,e)})),Zu=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return g(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Cu(t,this.value)):null!==t&&Su(this.value)===Su(t)&&this.matchesComparison(Cu(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Eo()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new cc(e,t,r):"array-contains"===t?new dc(e,r):"in"===t?new pc(e,r):"not-in"===t?new vc(e,r):"array-contains-any"===t?new mc(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new lc(e,n):new fc(e,n)}}]),n}(Ju),ec=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).filters=e,i.op=r,i.ue=null,i}return g(n,[{key:"matches",value:function(e){return tc(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ue||(this.ue=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ue}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Ju);function tc(e){return"and"===e.op}function nc(e){return"or"===e.op}function rc(e){return ic(e)&&tc(e)}function ic(e){var t,n=y(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof ec)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function ac(e){if(e instanceof Zu)return e.field.canonicalString()+e.op.toString()+Au(e.value);if(rc(e))return e.filters.map((function(e){return ac(e)})).join(",");var t=e.filters.map((function(e){return ac(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function oc(e,t){return e instanceof Zu?function(e,t){return t instanceof Zu&&e.op===t.op&&e.field.isEqual(t.field)&&Eu(e.value,t.value)}(e,t):e instanceof ec?function(e,t){return t instanceof ec&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&oc(n,t.filters[r])}),!0)}(e,t):void Eo()}function sc(e,t){var n=e.filters.concat(t);return ec.create(n,e.op)}function uc(e){return e instanceof Zu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Au(e.value))}(e):e instanceof ec?function(e){return e.op.toString()+" {"+e.getFilters().map(uc).join(" ,")+"}"}(e):"Filter"}var cc=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,r,i)).key=Xo.fromName(i.referenceValue),a}return g(n,[{key:"matches",value:function(e){var t=Xo.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Zu),lc=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,"in",r)).keys=hc("in",r),i}return g(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Zu),fc=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,"not-in",r)).keys=hc("not-in",r),i}return g(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Zu);function hc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Xo.fromName(e.referenceValue)}))}var dc=function(e){w(n,e);var t=S(n);function n(e,r){return v(this,n),t.call(this,e,"array-contains",r)}return g(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Ou(t)&&Tu(t.arrayValue,this.value)}}]),n}(Zu),pc=function(e){w(n,e);var t=S(n);function n(e,r){return v(this,n),t.call(this,e,"in",r)}return g(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Tu(this.value.arrayValue,t)}}]),n}(Zu),vc=function(e){w(n,e);var t=S(n);function n(e,r){return v(this,n),t.call(this,e,"not-in",r)}return g(n,[{key:"matches",value:function(e){if(Tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Tu(this.value.arrayValue,t)}}]),n}(Zu),mc=function(e){w(n,e);var t=S(n);function n(e,r){return v(this,n),t.call(this,e,"array-contains-any",r)}return g(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Ou(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Tu(t.value.arrayValue,e)}))}}]),n}(Zu),gc=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;v(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ce=null}));function yc(e){return new gc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function kc(e){var t=Co(e);if(null===t.ce){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return ac(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Is(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Au(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Au(e)})).join(",")),t.ce=n}return t.ce}function bc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Xu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!oc(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Yu(e.startAt,t.startAt)&&Yu(e.endAt,t.endAt)}function wc(e){return Xo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function _c(e,t){return e.filters.filter((function(e){return e instanceof Zu&&e.field.isEqual(t)}))}function xc(e,t,n){var r,i=Iu,a=!0,o=y(_c(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=Iu,c=!0;switch(s.op){case"<":case"<=":u=Vu(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=Iu}Bu({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Bu({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Ic(e,t,n){var r,i=xu,a=!0,o=y(_c(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=xu,c=!0;switch(s.op){case">=":case">":u=zu(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=xu}qu({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];qu({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Sc=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;v(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}));function Ec(e,t,n,r,i,a,o,s){return new Sc(e,t,n,r,i,a,o,s)}function Tc(e){return new Sc(e)}function Cc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Nc(e){return null!==e.collectionGroup}function Ac(e){var t=Co(e);if(null===t.le){t.le=[];var n,r=new Set,i=y(t.explicitOrderBy);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.le.push(a),r.add(a.field.canonicalString())}}catch(u){i.e(u)}finally{i.f()}var o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",s=function(e){var t=new uu($o.comparator);return e.filters.forEach((function(e){e.getFlattenedFilters().forEach((function(e){e.isInequality()&&(t=t.add(e.field))}))})),t}(t);s.forEach((function(e){r.has(e.canonicalString())||e.isKeyField()||t.le.push(new $u(e,o))})),r.has($o.keyField().canonicalString())||t.le.push(new $u($o.keyField(),o))}return t.le}function Rc(e){var t=Co(e);return t.he||(t.he=Pc(t,Ac(e))),t.he}function Pc(e,t){if("F"===e.limitType)return yc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new $u(e.field,t)}));var n=e.endAt?new Hu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Hu(e.startAt.position,e.startAt.inclusive):null;return yc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}function Dc(e,t){var n=e.filters.concat([t]);return new Sc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Oc(e,t,n){return new Sc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Lc(e,t){return bc(Rc(e),Rc(t))&&e.limitType===t.limitType}function Mc(e){return"".concat(kc(Rc(e)),"|lt:").concat(e.limitType)}function jc(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return uc(e)})).join(", "),"]")),Is(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Au(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Au(e)})).join(",")),"Target(".concat(t,")")}(Rc(e)),"; limitType=").concat(e.limitType,")")}function Fc(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Xo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=y(Ac(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=y(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Qu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ac(e),t))&&!(e.endAt&&!function(e,t,n){var r=Qu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ac(e),t))}(e,t)}function Uc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Vc(e){return function(t,n){var r,i=!1,a=y(Ac(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=zc(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function zc(e,t,n){var r=e.field.isKeyField()?Xo.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Cu(r,i):Eo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Eo()}}var Bc=function(){function e(t,n){v(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return g(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){ru(this.inner,(function(t,n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return iu(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),qc=new au(Xo.comparator);function Gc(){return qc}var Kc=new au(Xo.comparator);function Wc(){for(var e=Kc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Hc(e){var t=Kc;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Qc(){return $c()}function Yc(){return $c()}function $c(){return new Bc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Xc=new au(Xo.comparator),Jc=new uu(Xo.comparator);function Zc(){for(var e=Jc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var el=new uu(Bo);function tl(){return el}function nl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ss(t)?"-0":t}}function rl(e){return{integerValue:""+e}}function il(e,t){return Es(t)?rl(t):nl(e,t)}var al=g((function e(){v(this,e),this._=void 0}));function ol(e,t,n){return e instanceof cl?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&yu(t)&&(t=ku(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ll?fl(e,t):e instanceof hl?dl(e,t):function(e,t){var n=ul(e,t),r=vl(n)+vl(e.Ie);return Du(n)&&Du(e.Ie)?rl(r):nl(e.serializer,r)}(e,t)}function sl(e,t,n){return e instanceof ll?fl(e,t):e instanceof hl?dl(e,t):n}function ul(e,t){return e instanceof pl?function(e){return Du(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var cl=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n)}(al),ll=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this)).elements=e,r}return g(n)}(al);function fl(e,t){var n,r=ml(t),i=y(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Eu(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var hl=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this)).elements=e,r}return g(n)}(al);function dl(e,t){var n,r=ml(t),i=y(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Eu(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var pl=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).serializer=e,i.Ie=r,i}return g(n)}(al);function vl(e){return mu(e.integerValue||e.doubleValue)}function ml(e){return Ou(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var gl=g((function e(t,n){v(this,e),this.field=t,this.transform=n}));var yl=g((function e(t,n){v(this,e),this.version=t,this.transformResults=n})),kl=function(){function e(t,n){v(this,e),this.updateTime=t,this.exists=n}return g(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function bl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var wl=g((function e(){v(this,e)}));function _l(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ol(e.key,kl.none()):new Tl(e.key,e.data,kl.none());var n,r=e.data,i=Gu.empty(),a=new uu($o.comparator),o=y(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new Cl(e.key,i,new fu(a.toArray()),kl.none())}function xl(e,t,n){e instanceof Tl?function(e,t,n){var r=e.value.clone(),i=Al(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Cl?function(e,t,n){if(bl(e.precondition,t)){var r=Al(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Nl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Il(e,t,n,r){return e instanceof Tl?function(e,t,n,r){if(!bl(e.precondition,t))return n;var i=e.value.clone(),a=Rl(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Cl?function(e,t,n,r){if(!bl(e.precondition,t))return n;var i=Rl(e.fieldTransforms,r,t),a=t.data;return a.setAll(Nl(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return bl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Sl(e,t){var n,r=null,i=y(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=ul(a.transform,o||null);null!=s&&(null===r&&(r=Gu.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function El(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&qo(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ll&&t instanceof ll||e instanceof hl&&t instanceof hl?qo(e.elements,t.elements,Eu):e instanceof pl&&t instanceof pl?Eu(e.Ie,t.Ie):e instanceof cl&&t instanceof cl}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Tl=function(e){w(n,e);var t=S(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return v(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return g(n,[{key:"getFieldMask",value:function(){return null}}]),n}(wl),Cl=function(e){w(n,e);var t=S(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return v(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return g(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(wl);function Nl(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Al(e,t,n){var r=new Map;To(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,sl(o,s,n[i]))}return r}function Rl(e,t,n){var r,i=new Map,a=y(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,ol(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Pl,Dl,Ol=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return g(n,[{key:"getFieldMask",value:function(){return null}}]),n}(wl),Ll=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return g(n,[{key:"getFieldMask",value:function(){return null}}]),n}(wl),Ml=function(){function e(t,n,r,i){v(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return g(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&xl(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=y(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Il(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=y(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=Il(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Yc();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=_l(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Wo.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Zc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&qo(this.mutations,e.mutations,(function(e,t){return El(e,t)}))&&qo(this.baseMutations,e.baseMutations,(function(e,t){return El(e,t)}))}}]),e}(),jl=function(){function e(t,n,r,i){v(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return g(e,null,[{key:"from",value:function(t,n,r){To(t.mutations.length===r.length);for(var i=Xc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Fl=function(){function e(t,n){v(this,e),this.largestBatchId=t,this.mutation=n}return g(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Ul=g((function e(t,n){v(this,e),this.count=t,this.unchangedNames=n}));function Vl(e){switch(e){default:return Eo();case No.CANCELLED:case No.UNKNOWN:case No.DEADLINE_EXCEEDED:case No.RESOURCE_EXHAUSTED:case No.INTERNAL:case No.UNAVAILABLE:case No.UNAUTHENTICATED:return!1;case No.INVALID_ARGUMENT:case No.NOT_FOUND:case No.ALREADY_EXISTS:case No.PERMISSION_DENIED:case No.FAILED_PRECONDITION:case No.ABORTED:case No.OUT_OF_RANGE:case No.UNIMPLEMENTED:case No.DATA_LOSS:return!0}}function zl(e){if(void 0===e)return xo("GRPC error has no .code"),No.UNKNOWN;switch(e){case Pl.OK:return No.OK;case Pl.CANCELLED:return No.CANCELLED;case Pl.UNKNOWN:return No.UNKNOWN;case Pl.DEADLINE_EXCEEDED:return No.DEADLINE_EXCEEDED;case Pl.RESOURCE_EXHAUSTED:return No.RESOURCE_EXHAUSTED;case Pl.INTERNAL:return No.INTERNAL;case Pl.UNAVAILABLE:return No.UNAVAILABLE;case Pl.UNAUTHENTICATED:return No.UNAUTHENTICATED;case Pl.INVALID_ARGUMENT:return No.INVALID_ARGUMENT;case Pl.NOT_FOUND:return No.NOT_FOUND;case Pl.ALREADY_EXISTS:return No.ALREADY_EXISTS;case Pl.PERMISSION_DENIED:return No.PERMISSION_DENIED;case Pl.FAILED_PRECONDITION:return No.FAILED_PRECONDITION;case Pl.ABORTED:return No.ABORTED;case Pl.OUT_OF_RANGE:return No.OUT_OF_RANGE;case Pl.UNIMPLEMENTED:return No.UNIMPLEMENTED;case Pl.DATA_LOSS:return No.DATA_LOSS;default:return Eo()}}(Dl=Pl||(Pl={}))[Dl.OK=0]="OK",Dl[Dl.CANCELLED=1]="CANCELLED",Dl[Dl.UNKNOWN=2]="UNKNOWN",Dl[Dl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dl[Dl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dl[Dl.NOT_FOUND=5]="NOT_FOUND",Dl[Dl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dl[Dl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dl[Dl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dl[Dl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dl[Dl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dl[Dl.ABORTED=10]="ABORTED",Dl[Dl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dl[Dl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dl[Dl.INTERNAL=13]="INTERNAL",Dl[Dl.UNAVAILABLE=14]="UNAVAILABLE",Dl[Dl.DATA_LOSS=15]="DATA_LOSS";var Bl=null;function ql(){return new TextEncoder}var Gl=new mo([4294967295,4294967295],0);function Kl(e){var t=ql().encode(e),n=new vo;return n.update(t),new Uint8Array(n.digest())}function Wl(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new mo([n,r],0),new mo([i,a],0)]}var Hl=function(){function e(t,n,r){if(v(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ql("Invalid padding: ".concat(n));if(r<0)throw new Ql("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new Ql("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new Ql("Invalid padding when bitmap length is 0: ".concat(n));this.Te=8*t.length-n,this.Ee=mo.fromNumber(this.Te)}return g(e,[{key:"de",value:function(e,t,n){var r=e.add(t.multiply(mo.fromNumber(n)));return 1===r.compare(Gl)&&(r=new mo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}},{key:"Ae",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.Te)return!1;for(var t=c(Wl(Kl(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.de(n,r,i);if(!this.Ae(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.Te)for(var t=c(Wl(Kl(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.de(n,r,i);this.Re(a)}}},{key:"Re",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),Ql=function(e){w(n,e);var t=S(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return g(n)}(T(Error)),Yl=function(){function e(t,n,r,i,a){v(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return g(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,$l.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Wo.min(),i,new au(Bo),Gc(),Zc())}}]),e}(),$l=function(){function e(t,n,r,i,a){v(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return g(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Zc(),Zc(),Zc())}}]),e}(),Xl=g((function e(t,n,r,i){v(this,e),this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=i})),Jl=g((function e(t,n){v(this,e),this.targetId=t,this.fe=n})),Zl=g((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:du.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;v(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),ef=function(){function e(){v(this,e),this.ge=0,this.pe=rf(),this.ye=du.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}return g(e,[{key:"current",get:function(){return this.we}},{key:"resumeToken",get:function(){return this.ye}},{key:"be",get:function(){return 0!==this.ge}},{key:"De",get:function(){return this.Se}},{key:"Ce",value:function(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}},{key:"ve",value:function(){var e=Zc(),t=Zc(),n=Zc();return this.pe.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Eo()}})),new $l(this.ye,this.we,e,t,n)}},{key:"Fe",value:function(){this.Se=!1,this.pe=rf()}},{key:"Me",value:function(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}},{key:"xe",value:function(e){this.Se=!0,this.pe=this.pe.remove(e)}},{key:"Oe",value:function(){this.ge+=1}},{key:"Ne",value:function(){this.ge-=1,To(this.ge>=0)}},{key:"Le",value:function(){this.Se=!0,this.we=!0}}]),e}(),tf=function(){function e(t){v(this,e),this.Be=t,this.ke=new Map,this.qe=Gc(),this.Qe=nf(),this.Ke=new au(Bo)}return g(e,[{key:"$e",value:function(e){var t,n=y(e.Ve);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.me&&e.me.isFoundDocument()?this.Ue(r,e.me):this.We(r,e.key,e.me)}}catch(s){n.e(s)}finally{n.f()}var i,a=y(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.We(o,e.key,e.me)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Ge",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ze(n);switch(e.state){case 0:t.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||t.removeTarget(n);break;case 3:t.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:t.je(n)&&(t.He(n),r.Ce(e.resumeToken));break;default:Eo()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((function(e,r){n.je(r)&&t(r)}))}},{key:"Je",value:function(e){var t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){var i=r.target;if(wc(i))if(0===n){var a=new Xo(i.path);this.We(t,a,Wu.newNoDocument(a,Wo.min()))}else To(1===n);else{var o=this.Ze(t);if(o!==n){var s=this.Xe(e),u=s?this.et(s,e,o):1;if(0!==u){this.He(t);var c=2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,c)}null==Bl||Bl.tt(function(e,t,n,r,i){var a,o,s,u,c,l,f={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(f.bloomFilter={applied:0===i,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(u=null===(s=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===s?void 0:s.length)&&void 0!==u?u:0,padding:null!==(l=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:function(e){var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),f}(o,e.fe,this.Be.nt(),s,u))}}}}},{key:"Xe",value:function(e){var t=e.fe.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,o=void 0===a?"":a,s=i.padding,u=void 0===s?0:s,c=t.hashCount,l=void 0===c?0:c;try{n=gu(o).toUint8Array()}catch(e){if(e instanceof hu)return Io("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new Hl(n,u,l)}catch(e){return Io(e instanceof Ql?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Te?null:r}},{key:"et",value:function(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}},{key:"rt",value:function(e,t){var n=this,r=this.Be.getRemoteKeysForTarget(t),i=0;return r.forEach((function(r){var a=n.Be.nt(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(o)||(n.We(t,r,null),i++)})),i}},{key:"it",value:function(e){var t=this,n=new Map;this.ke.forEach((function(r,i){var a=t.Ye(i);if(a){if(r.current&&wc(a.target)){var o=new Xo(a.target.path);null!==t.qe.get(o)||t.st(i,o)||t.We(i,o,Wu.newNoDocument(o,e))}r.De&&(n.set(i,r.ve()),r.Fe())}}));var r=Zc();this.Qe.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ye(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.qe.forEach((function(t,n){return n.setReadTime(e)}));var i=new Yl(e,n,this.Ke,this.qe,r);return this.qe=Gc(),this.Qe=nf(),this.Ke=new au(Bo),i}},{key:"Ue",value:function(e,t){if(this.je(e)){var n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}}},{key:"We",value:function(e,t,n){if(this.je(e)){var r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}}},{key:"removeTarget",value:function(e){this.ke.delete(e)}},{key:"Ze",value:function(e){var t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Oe",value:function(e){this.ze(e).Oe()}},{key:"ze",value:function(e){var t=this.ke.get(e);return t||(t=new ef,this.ke.set(e,t)),t}},{key:"ot",value:function(e){var t=this.Qe.get(e);return t||(t=new uu(Bo),this.Qe=this.Qe.insert(e,t)),t}},{key:"je",value:function(e){var t=null!==this.Ye(e);return t||_o("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ye",value:function(e){var t=this.ke.get(e);return t&&t.be?null:this.Be._t(e)}},{key:"He",value:function(e){var t=this;this.ke.set(e,new ef),this.Be.getRemoteKeysForTarget(e).forEach((function(n){t.We(e,n,null)}))}},{key:"st",value:function(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}]),e}();function nf(){return new au(Xo.comparator)}function rf(){return new au(Xo.comparator)}var af={asc:"ASCENDING",desc:"DESCENDING"},of={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sf={and:"AND",or:"OR"},uf=g((function e(t,n){v(this,e),this.databaseId=t,this.useProto3Json=n}));function cf(e,t){return e.useProto3Json||Is(t)?t:{value:t}}function lf(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ff(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function hf(e,t){return lf(e,t.toTimestamp())}function df(e){return To(!!e),Wo.fromTimestamp(function(e){var t=vu(e);return new Ko(t.seconds,t.nanos)}(e))}function pf(e,t){return vf(e,t).canonicalString()}function vf(e,t){var n=function(e){return new Qo(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function mf(e){var t=Qo.fromString(e);return To(Uf(t)),t}function gf(e,t){return pf(e.databaseId,t.path)}function yf(e,t){var n=mf(t);if(n.get(1)!==e.databaseId.projectId)throw new Ao(No.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ao(No.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Xo(_f(n))}function kf(e,t){return pf(e.databaseId,t)}function bf(e){var t=mf(e);return 4===t.length?Qo.emptyPath():_f(t)}function wf(e){return new Qo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function _f(e){return To(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function xf(e,t,n){return{name:gf(e,t),fields:n.value.mapValue.fields}}function If(e,t,n){var r=yf(e,t.name),i=df(t.updateTime),a=t.createTime?df(t.createTime):Wo.min(),o=new Gu({mapValue:{fields:t.fields}}),s=Wu.newFoundDocument(r,i,a,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Sf(e,t){return"found"in t?function(e,t){To(!!t.found),t.found.name,t.found.updateTime;var n=yf(e,t.found.name),r=df(t.found.updateTime),i=t.found.createTime?df(t.found.createTime):Wo.min(),a=new Gu({mapValue:{fields:t.found.fields}});return Wu.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){To(!!t.missing),To(!!t.readTime);var n=yf(e,t.missing),r=df(t.readTime);return Wu.newNoDocument(n,r)}(e,t):Eo()}function Ef(e,t){var n;if(t instanceof Tl)n={update:xf(e,t.key,t.value)};else if(t instanceof Ol)n={delete:gf(e,t.key)};else if(t instanceof Cl)n={update:xf(e,t.key,t.data),updateMask:Ff(t.fieldMask)};else{if(!(t instanceof Ll))return Eo();n={verify:gf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof cl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ll)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof hl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof pl)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Eo()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:hf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Eo()}(e,t.precondition)),n}function Tf(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?kl.updateTime(df(e.updateTime)):void 0!==e.exists?kl.exists(e.exists):kl.none()}(t.currentDocument):kl.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)To("REQUEST_TIME"===t.setToServerValue),n=new cl;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new ll(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new hl(i)}else"increment"in t?n=new pl(e,t.increment):Eo();var a=$o.fromServerFormat(t.fieldPath);return new gl(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=yf(e,t.update.name),a=new Gu({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new fu(t.map((function(e){return $o.fromServerFormat(e)})))}(t.updateMask);return new Cl(i,a,o,n,r)}return new Tl(i,a,n,r)}if(t.delete){var s=yf(e,t.delete);return new Ol(s,n)}if(t.verify){var u=yf(e,t.verify);return new Ll(u,n)}return Eo()}function Cf(e,t){return{documents:[kf(e,t.path)]}}function Nf(e,t){var n,r={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(n=i,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=kf(e,n);var a=function(e){if(0!==e.length)return jf(ec.create(e,"and"))}(t.filters);a&&(r.structuredQuery.where=a);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Lf(e.field),direction:Pf(e.dir)}}(e)}))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);var s=cf(e,t.limit);return null!==s&&(r.structuredQuery.limit=s),t.startAt&&(r.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:r,parent:n}}function Af(e){var t=bf(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){To(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Rf(e);return t instanceof ec&&rc(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=function(e){return e.map((function(e){return function(e){return new $u(Mf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var u=null;n.limit&&(u=function(e){var t;return Is(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Hu(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Hu(n,t)}(n.endAt)),Ec(t,i,s,o,u,"F",c,l)}function Rf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Mf(e.unaryFilter.field);return Zu.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Mf(e.unaryFilter.field);return Zu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Mf(e.unaryFilter.field);return Zu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Mf(e.unaryFilter.field);return Zu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Eo()}}(e):void 0!==e.fieldFilter?function(e){return Zu.create(Mf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Eo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ec.create(e.compositeFilter.filters.map((function(e){return Rf(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Eo()}}(e.compositeFilter.op))}(e):Eo()}function Pf(e){return af[e]}function Df(e){return of[e]}function Of(e){return sf[e]}function Lf(e){return{fieldPath:e.canonicalString()}}function Mf(e){return $o.fromServerFormat(e.fieldPath)}function jf(e){return e instanceof Zu?function(e){if("=="===e.op){if(Mu(e.value))return{unaryFilter:{field:Lf(e.field),op:"IS_NAN"}};if(Lu(e.value))return{unaryFilter:{field:Lf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Mu(e.value))return{unaryFilter:{field:Lf(e.field),op:"IS_NOT_NAN"}};if(Lu(e.value))return{unaryFilter:{field:Lf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lf(e.field),op:Df(e.op),value:e.value}}}(e):e instanceof ec?function(e){var t=e.getFilters().map((function(e){return jf(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Of(e.op),filters:t}}}(e):Eo()}function Ff(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Uf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Vf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Wo.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Wo.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:du.EMPTY_BYTE_STRING,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;v(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}return g(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),zf=g((function e(t){v(this,e),this.ct=t}));function Bf(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:qf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:gf(e,t.key),fields:t.data.value.mapValue.fields,updateTime:lf(e,t.version.toTimestamp()),createTime:lf(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Gf(t.version)};else{if(!t.isUnknownDocument())return Eo();r.unknownDocument={path:n.path.toArray(),version:Gf(t.version)}}return r}function qf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Gf(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Kf(e){var t=new Ko(e.seconds,e.nanoseconds);return Wo.fromTimestamp(t)}function Wf(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Tf(e.ct,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Tf(e.ct,t)})),s=Ko.fromMillis(t.localWriteTimeMs);return new Ml(t.batchId,s,n,o)}function Hf(e){var t,n=Kf(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?Kf(e.lastLimboFreeSnapshotVersion):Wo.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return To(1===e.documents.length),Rc(Tc(bf(e.documents[0])))}(e.query):function(e){return Rc(Af(e))}(e.query),new Vf(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,du.fromBase64String(e.resumeToken))}function Qf(e,t){var n,r=Gf(t.snapshotVersion),i=Gf(t.lastLimboFreeSnapshotVersion);n=wc(t.target)?Cf(e.ct,t.target):Nf(e.ct,t.target).ut;var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:kc(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Yf(e){var t=Af({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Oc(t,t.limit,"L"):t}function $f(e,t){return new Fl(t.largestBatchId,Tf(e.ct,t.overlayMutation))}function Xf(e,t){var n=t.path.lastSegment();return[e,Ts(t.path.popLast()),n]}function Jf(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Gf(r.readTime),documentKey:Ts(r.documentKey.path),largestBatchId:r.largestBatchId}}var Zf=function(){function e(){v(this,e)}return g(e,[{key:"getBundleMetadata",value:function(e,t){return eh(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:Kf(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return eh(e).put(function(e){return{bundleId:e.id,createTime:Gf(df(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return th(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:Yf(e.bundledQuery),readTime:Kf(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return th(e).put(function(e){return{name:e.name,readTime:Gf(df(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function eh(e){return tu(e,"bundles")}function th(e){return tu(e,"namedQueries")}var nh=function(){function e(t,n){v(this,e),this.serializer=t,this.userId=n}return g(e,[{key:"getOverlay",value:function(e,t){var n=this;return rh(e).get(Xf(this.userId,t)).next((function(e){return e?$f(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Qc();return fs.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Fl(t,a);i.push(r.ht(e,o))})),fs.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Ts(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(rh(e).H("collectionPathOverlayIndex",i))})),fs.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Qc(),a=Ts(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return rh(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=$f(r.serializer,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Qc(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rh(e).Y({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=$f(a.serializer,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ht",value:function(e,t){return rh(e).put(function(e,t,n){var r=c(Xf(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ef(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"lt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function rh(e){return tu(e,"documentOverlays")}var ih=function(){function e(){v(this,e)}return g(e,[{key:"Pt",value:function(e,t){this.It(e,t),t.Tt()}},{key:"It",value:function(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(mu(e.integerValue));else if("doubleValue"in e){var n=mu(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Ss(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At("".concat(r.seconds||"")),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(gu(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.Et(t,45),t.dt(i.latitude||0),t.dt(i.longitude||0)}else"mapValue"in e?Uu(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Eo()}},{key:"Rt",value:function(e,t){this.Et(t,25),this.St(e,t)}},{key:"St",value:function(e,t){t.At(e)}},{key:"yt",value:function(e,t){var n=e.fields||{};this.Et(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Rt(a,t),this.It(n[a],t)}}},{key:"wt",value:function(e,t){var n=e.values||[];this.Et(t,50);var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.It(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"gt",value:function(e,t){var n=this;this.Et(t,37),Xo.fromName(e).path.forEach((function(e){n.Et(t,60),n.St(e,t)}))}},{key:"Et",value:function(e,t){e.dt(t)}},{key:"Vt",value:function(e){e.dt(2)}}]),e}();function ah(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function oh(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=ah(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}ih.bt=new ih;var sh=function(){function e(){v(this,e),this.buffer=new Uint8Array(1024),this.position=0}return g(e,[{key:"Dt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ct(n.value),n=t.next();this.vt()}},{key:"Ft",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Mt(n.value),n=t.next();this.xt()}},{key:"Ot",value:function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{var a=r.codePointAt(0);this.Ct(240|a>>>18),this.Ct(128|63&a>>>12),this.Ct(128|63&a>>>6),this.Ct(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.vt()}},{key:"Nt",value:function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{var a=r.codePointAt(0);this.Mt(240|a>>>18),this.Mt(128|63&a>>>12),this.Mt(128|63&a>>>6),this.Mt(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.xt()}},{key:"Lt",value:function(e){var t=this.Bt(e),n=oh(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"qt",value:function(e){var t=this.Bt(e),n=oh(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Qt",value:function(){this.Kt(255),this.Kt(255)}},{key:"$t",value:function(){this.Ut(255),this.Ut(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Wt",value:function(){return this.buffer.slice(0,this.position)}},{key:"Bt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ct",value:function(e){var t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}},{key:"Mt",value:function(e){var t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}},{key:"vt",value:function(){this.Kt(0),this.Kt(1)}},{key:"xt",value:function(){this.Ut(0),this.Ut(1)}},{key:"Kt",value:function(e){this.kt(1),this.buffer[this.position++]=e}},{key:"Ut",value:function(e){this.kt(1),this.buffer[this.position++]=~e}},{key:"kt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),uh=function(){function e(t){v(this,e),this.Gt=t}return g(e,[{key:"ft",value:function(e){this.Gt.Dt(e)}},{key:"At",value:function(e){this.Gt.Ot(e)}},{key:"dt",value:function(e){this.Gt.Lt(e)}},{key:"Tt",value:function(){this.Gt.Qt()}}]),e}(),ch=function(){function e(t){v(this,e),this.Gt=t}return g(e,[{key:"ft",value:function(e){this.Gt.Ft(e)}},{key:"At",value:function(e){this.Gt.Nt(e)}},{key:"dt",value:function(e){this.Gt.qt(e)}},{key:"Tt",value:function(){this.Gt.$t()}}]),e}(),lh=function(){function e(){v(this,e),this.Gt=new sh,this.zt=new uh(this.Gt),this.jt=new ch(this.Gt)}return g(e,[{key:"seed",value:function(e){this.Gt.seed(e)}},{key:"Ht",value:function(e){return 0===e?this.zt:this.jt}},{key:"Wt",value:function(){return this.Gt.Wt()}},{key:"reset",value:function(){this.Gt.reset()}}]),e}(),fh=function(){function e(t,n,r,i){v(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return g(e,[{key:"Jt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function hh(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=dh(e.arrayValue,t.arrayValue))?n:0!==(n=dh(e.directionalValue,t.directionalValue))?n:Xo.comparator(e.documentKey,t.documentKey)}function dh(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var ph=function(){function e(t){v(this,e),this.Yt=new uu((function(e,t){return $o.comparator(e.field,t.field)})),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Zt=t.orderBy,this.Xt=[];var n,r=y(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}catch(a){r.e(a)}finally{r.f()}}return g(e,[{key:"en",get:function(){return this.Yt.size>1}},{key:"tn",value:function(e){if(To(e.collectionGroup===this.collectionId),this.en)return!1;var t=Zo(e);if(void 0!==t&&!this.nn(t))return!1;for(var n=es(e),r=new Set,i=0,a=0;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){var o=this.Yt.getIterator().getNext();if(!r.has(o.field.canonicalString())){var s=n[i];if(!this.rn(o,s)||!this.sn(this.Zt[a++],s))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Zt.length||!this.sn(this.Zt[a++],u))return!1}return!0}},{key:"on",value:function(){if(this.en)return null;var e,t=new uu($o.comparator),n=[],r=y(this.Xt);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)n.push(new ts(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),n.push(new ts(i.field,0))}}}catch(u){r.e(u)}finally{r.f()}var a,o=y(this.Zt);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.field.isKeyField()||t.has(s.field)||(t=t.add(s.field),n.push(new ts(s.field,"asc"===s.dir?0:1)))}}catch(u){o.e(u)}finally{o.f()}return new Jo(Jo.UNKNOWN_ID,this.collectionId,n,ns.empty())}},{key:"nn",value:function(e){var t,n=y(this.Xt);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.rn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"rn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function vh(e){var t,n;if(To(e instanceof Zu||e instanceof ec),e instanceof Zu){if(e instanceof pc){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Zu.create(e.field,"==",t)})))||[];return ec.create(r,"or")}return e}var i=e.filters.map((function(e){return vh(e)}));return ec.create(i,e.op)}function mh(e){if(0===e.getFilters().length)return[];var t=bh(vh(e));return To(kh(t)),gh(t)||yh(t)?[t]:t.getFilters()}function gh(e){return e instanceof Zu}function yh(e){return e instanceof ec&&rc(e)}function kh(e){return gh(e)||yh(e)||function(e){if(e instanceof ec&&nc(e)){var t,n=y(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!gh(r)&&!yh(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function bh(e){if(To(e instanceof Zu||e instanceof ec),e instanceof Zu)return e;if(1===e.filters.length)return bh(e.filters[0]);var t=e.filters.map((function(e){return bh(e)})),n=ec.create(t,e.op);return kh(n=xh(n))?n:(To(n instanceof ec),To(tc(n)),To(n.filters.length>1),n.filters.reduce((function(e,t){return wh(e,t)})))}function wh(e,t){var n;return To(e instanceof Zu||e instanceof ec),To(t instanceof Zu||t instanceof ec),n=e instanceof Zu?t instanceof Zu?function(e,t){return ec.create([e,t],"and")}(e,t):_h(e,t):t instanceof Zu?_h(t,e):function(e,t){if(To(e.filters.length>0&&t.filters.length>0),tc(e)&&tc(t))return sc(e,t.getFilters());var n=nc(e)?e:t,r=nc(e)?t:e,i=n.filters.map((function(e){return wh(e,r)}));return ec.create(i,"or")}(e,t),xh(n)}function _h(e,t){if(tc(t))return sc(t,e.getFilters());var n=t.filters.map((function(t){return wh(e,t)}));return ec.create(n,"or")}function xh(e){if(To(e instanceof Zu||e instanceof ec),e instanceof Zu)return e;var t=e.getFilters();if(1===t.length)return xh(t[0]);if(ic(e))return e;var n=t.map((function(e){return xh(e)})),r=[];return n.forEach((function(t){t instanceof Zu?r.push(t):t instanceof ec&&(t.op===e.op?r.push.apply(r,ce(t.filters)):r.push(t))})),1===r.length?r[0]:ec.create(r,e.op)}var Ih=function(){function e(){v(this,e),this._n=new Sh}return g(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this._n.add(t),fs.resolve()}},{key:"getCollectionParents",value:function(e,t){return fs.resolve(this._n.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return fs.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return fs.resolve()}},{key:"deleteAllFieldIndexes",value:function(e){return fs.resolve()}},{key:"createTargetIndexes",value:function(e,t){return fs.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return fs.resolve(null)}},{key:"getIndexType",value:function(e,t){return fs.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return fs.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return fs.resolve(null)}},{key:"getMinOffset",value:function(e,t){return fs.resolve(as.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return fs.resolve(as.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return fs.resolve()}},{key:"updateIndexEntries",value:function(e,t){return fs.resolve()}}]),e}(),Sh=function(){function e(){v(this,e),this.index={}}return g(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new uu(Qo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new uu(Qo.comparator)).toArray()}}]),e}(),Eh=new Uint8Array(0),Th=function(){function e(t,n){v(this,e),this.databaseId=n,this.an=new Sh,this.un=new Bc((function(e){return kc(e)}),(function(e,t){return bc(e,t)})),this.uid=t.uid||""}return g(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.an.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.an.add(t)}));var a={collectionId:r,parent:Ts(i)};return Ch(e).put(a)}return fs.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Go(t),""],!1,!0);return Ch(e).W(r).next((function(e){var r,i=y(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(As(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Ah(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Rh(e);return a.next((function(e){o.put(Jf(e,n.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Ah(e),r=Rh(e),i=Nh(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"deleteAllFieldIndexes",value:function(e){var t=Ah(e),n=Nh(e),r=Rh(e);return t.H().next((function(){return n.H()})).next((function(){return r.H()}))}},{key:"createTargetIndexes",value:function(e,t){var n=this;return fs.forEach(this.cn(t),(function(t){return n.getIndexType(e,t).next((function(r){if(0===r||1===r){var i=new ph(t).on();if(null!=i)return n.addFieldIndex(e,i)}}))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Nh(e),i=!0,a=new Map;return fs.forEach(this.cn(t),(function(t){return n.ln(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Zc(),o=[];return fs.forEach(a,(function(i,a){_o("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(kc(t)));var s=function(e,t){var n=Zo(t);if(void 0===n)return null;var r,i=y(_c(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),u=function(e,t){var n,r=new Map,i=y(es(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=y(_c(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=y(es(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?xc(e,o.fieldPath,e.startAt):Ic(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Hu(r,i)}(a,i),l=function(e,t){var n,r=[],i=!0,a=y(es(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?Ic(e,o.fieldPath,e.endAt):xc(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Hu(r,i)}(a,i),f=n.hn(i,a,c),h=n.hn(i,a,l),d=n.Pn(i,a,u),p=n.In(i.indexId,s,f,c.inclusive,h,l.inclusive,d);return fs.forEach(p,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=Xo.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return fs.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:mh(ec.create(e.filters,"and")).map((function(t){return yc(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"In",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],f=function(){var u=t?s.Tn(t[h/c]):Eh,f=s.En(e,u,n[h%c],r),d=s.dn(e,u,i[h%c],a),p=o.map((function(t){return s.En(e,u,t,!0)}));l.push.apply(l,ce(s.createRange(f,d,p)))},h=0;h<u;++h)f();return l}},{key:"En",value:function(e,t,n,r){var i=new fh(e,Xo.empty(),t,n);return r?i:i.Jt()}},{key:"dn",value:function(e,t,n,r){var i=new fh(e,Xo.empty(),t,n);return r?i.Jt():i}},{key:"ln",value:function(e,t){var n=new ph(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=y(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return fs.forEach(i,(function(t){return n.ln(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new uu($o.comparator),r=!1,i=y(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=y(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var s=a.value;s.field.isKeyField()||("array-contains"===s.op||"array-contains-any"===s.op?r=!0:n=n.add(s.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var u,c=y(e.orderBy);try{for(c.s();!(u=c.n()).done;){var l=u.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"An",value:function(e,t){var n,r=new lh,i=y(es(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Ht(a.kind);ih.bt.Pt(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Wt()}},{key:"Tn",value:function(e){var t=new lh;return ih.bt.Pt(e,t.Ht(0)),t.Wt()}},{key:"Rn",value:function(e,t){var n=new lh;return ih.bt.Pt(Pu(this.databaseId,t),n.Ht(function(e){var t=es(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}},{key:"Pn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new lh);var i,a=0,o=y(es(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=y(r);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(this.Vn(t,u.fieldPath)&&Ou(c))r=this.mn(r,u,c);else{var h=f.Ht(u.kind);ih.bt.Pt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.fn(r)}},{key:"hn",value:function(e,t,n){return this.Pn(e,t,n.position)}},{key:"fn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Wt();return t}},{key:"mn",value:function(e,t,n){var r,i=ce(e),a=[],o=y(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=y(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=new lh;f.seed(l.Wt()),ih.bt.Pt(u,f.Ht(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"Vn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Zu&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Ah(e),i=Rh(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return fs.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new ns(t.sequenceNumber,new as(Kf(t.readTime),new Xo(As(t.documentKey)),t.largestBatchId)):ns.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new ts($o.fromServerFormat(n),r)}));return new Jo(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Bo(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Ah(e),a=Rh(e);return this.gn(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return fs.forEach(t,(function(t){return a.put(Jf(t.indexId,r.uid,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return fs.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?fs.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),fs.forEach(a,(function(r){return n.pn(e,t,r).next((function(t){var a=n.yn(i,r);return t.isEqual(a)?fs.resolve():n.wn(e,i,r,t,a)}))}))}))}))}},{key:"Sn",value:function(e,t,n,r){return Nh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"bn",value:function(e,t,n,r){return Nh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}},{key:"pn",value:function(e,t,n){var r=Nh(e),i=new uu(hh);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},(function(e,r){i=i.add(new fh(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"yn",value:function(e,t){var n=new uu(hh),r=this.An(t,e);if(null==r)return n;var i=Zo(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Ou(a)){var o,s=y(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new fh(t.indexId,e.key,this.Tn(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new fh(t.indexId,e.key,Eh,r));return n}},{key:"wn",value:function(e,t,n,r,i){var a=this;_o("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=lu(a),u=lu(o);s||u;){var c=!1,l=!1;if(s&&u){var f=n(s,u);f<0?l=!0:f>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=lu(o)):l?(i(s),s=lu(a)):(s=lu(a),u=lu(o))}}(r,i,hh,(function(r){o.push(a.Sn(e,t,n,r))}),(function(r){o.push(a.bn(e,t,n,r))})),fs.waitFor(o)}},{key:"gn",value:function(e){var t=1;return Rh(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return hh(e,t)})).filter((function(e,t,n){return!t||0!==hh(e,n[t-1])}));var r=[];r.push(e);var i,a=y(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=hh(o,e),u=hh(o,t);if(0===s)r[0]=e.Jt();else if(s>0&&u<0)r.push(o),r.push(o.Jt());else if(u>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Dn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Eh,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Eh,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Dn",value:function(e,t){return hh(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Ph)}},{key:"getMinOffset",value:function(e,t){var n=this;return fs.mapArray(this.cn(t),(function(t){return n.ln(e,t).next((function(e){return e||Eo()}))})).next(Ph)}}]),e}();function Ch(e){return tu(e,"collectionParents")}function Nh(e){return tu(e,"indexEntries")}function Ah(e){return tu(e,"indexConfiguration")}function Rh(e){return tu(e,"indexState")}function Ph(e){To(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;os(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new as(t.readTime,t.documentKey,n)}var Dh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Oh=function(){function e(t,n,r){v(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return g(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Lh(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Y({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){To(1===s)})));var c,l=[],f=y(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Ds(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return fs.waitFor(a).next((function(){return l}))}function Mh(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Eo();t=e.noDocument}return JSON.stringify(t).length}Oh.DEFAULT_COLLECTION_PERCENTILE=10,Oh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oh.DEFAULT=new Oh(41943040,Oh.DEFAULT_COLLECTION_PERCENTILE,Oh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oh.DISABLED=new Oh(-1,0,0);var jh=function(){function e(t,n,r,i){v(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}return g(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Uh(e).Y({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Vh(e),o=Uh(e);return o.add({}).next((function(s){To("number"==typeof s);var u,c=new Ml(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Ef(e.ct,t)})),i=n.mutations.map((function(t){return Ef(e.ct,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new uu((function(e,t){return Bo(e.canonicalString(),t.canonicalString())})),d=y(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=Ds(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Os))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Cn[s]=c.keys()})),fs.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Uh(e).get(t).next((function(e){return e?(To(e.userId===n.userId),Wf(n.serializer,e)):null}))}},{key:"vn",value:function(e,t){var n=this;return this.Cn[t]?fs.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Cn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Uh(e).Y({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(To(t.batchId>=r),a=Wf(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Uh(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Uh(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return Wf(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Ps(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Vh(e).Y({range:i},(function(r,i,o){var s=c(r,3),u=s[0],l=s[1],f=s[2],h=As(l);if(u===n.userId&&t.path.isEqual(h))return Uh(e).get(f).next((function(e){if(!e)throw Eo();To(e.userId===n.userId),a.push(Wf(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new uu(Bo),i=[];return t.forEach((function(t){var a=Ps(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=Vh(e).Y({range:o},(function(e,i,a){var o=c(e,3),s=o[0],u=o[1],l=o[2],f=As(u);s===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(s)})),fs.waitFor(i).next((function(){return n.Fn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Ps(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new uu(Bo);return Vh(e).Y({range:o},(function(e,t,a){var o=c(e,3),u=o[0],l=o[1],f=o[2],h=As(l);u===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.Fn(e,s)}))}},{key:"Fn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Uh(e).get(t).next((function(e){if(null===e)throw Eo();To(e.userId===n.userId),r.push(Wf(n.serializer,e))})))})),fs.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Lh(e.ae,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Mn(t.batchId)})),fs.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Mn",value:function(e){delete this.Cn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return fs.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return Vh(e).Y({range:r},(function(e,n,r){if(e[0]===t.userId){var a=As(e[1]);i.push(a)}else r.done()})).next((function(){To(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Fh(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return zh(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"lt",value:function(t,n,r,i){return To(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Fh(e,t,n){var r=Ps(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Vh(e).Y({range:a,J:!0},(function(e,n,r){var a=c(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function Uh(e){return tu(e,"mutations")}function Vh(e){return tu(e,"documentMutations")}function zh(e){return tu(e,"mutationQueues")}var Bh=function(){function e(t){v(this,e),this.On=t}return g(e,[{key:"next",value:function(){return this.On+=2,this.On}}],[{key:"Nn",value:function(){return new e(0)}},{key:"Ln",value:function(){return new e(-1)}}]),e}(),qh=function(){function e(t,n){v(this,e),this.referenceDelegate=t,this.serializer=n}return g(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Bn(e).next((function(n){var r=new Bh(n.highestTargetId);return n.highestTargetId=r.next(),t.kn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Bn(e).next((function(e){return Wo.fromTimestamp(new Ko(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.kn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.qn(e,t).next((function(){return n.Bn(e).next((function(r){return r.targetCount+=1,n.Qn(t,r),n.kn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.qn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Gh(e).delete(t.targetId)})).next((function(){return n.Bn(e)})).next((function(t){return To(t.targetCount>0),t.targetCount-=1,n.kn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Gh(e).Y((function(o,s){var u=Hf(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return fs.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Gh(e).Y((function(e,n){var r=Hf(n);t(r)}))}},{key:"Bn",value:function(e){return Kh(e).get("targetGlobalKey").next((function(e){return To(null!==e),e}))}},{key:"kn",value:function(e,t){return Kh(e).put("targetGlobalKey",t)}},{key:"qn",value:function(e,t){return Gh(e).put(Qf(this.serializer,t))}},{key:"Qn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=kc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Gh(e).Y({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Hf(n);bc(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Wh(e);return t.forEach((function(t){var o=Ts(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),fs.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Wh(e);return fs.forEach(t,(function(t){var a=Ts(t.path);return fs.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Wh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Wh(e),i=Zc();return r.Y({range:n,J:!0},(function(e,t,n){var r=As(e[1]),a=new Xo(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Ts(t.path),r=IDBKeyRange.bound([n],[Go(n)],!1,!0),i=0;return Wh(e).Y({index:"documentTargetsIndex",J:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"_t",value:function(e,t){return Gh(e).get(t).next((function(e){return e?Hf(e):null}))}}]),e}();function Gh(e){return tu(e,"targets")}function Kh(e){return tu(e,"targetGlobal")}function Wh(e){return tu(e,"targetDocuments")}function Hh(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],s=a[1],u=Bo(r,o);return 0===u?Bo(i,s):u}var Qh=function(){function e(t){v(this,e),this.Kn=t,this.buffer=new uu(Hh),this.$n=0}return g(e,[{key:"Un",value:function(){return++this.$n}},{key:"Wn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Hh(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Yh=function(){function e(t,n,r){v(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return g(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"zn",value:function(e){var t=this;_o("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!ms(e.t0)){e.next=12;break}_o("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,cs(e.t0);case 14:return e.next=16,t.zn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),$h=function(){function e(t,n){v(this,e),this.jn=t,this.params=n}return g(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.Hn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return fs.resolve(xs._e);var r=new Qh(t);return this.jn.forEachTarget(e,(function(e){return r.Wn(e.sequenceNumber)})).next((function(){return n.jn.Jn(e,(function(e){return r.Wn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(_o("LruGarbageCollector","Garbage collection skipped; disabled"),fs.resolve(Dh)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(_o("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Dh):n.Yn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Yn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(_o("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),wo()<=ge.DEBUG&&_o("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),fs.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function Xh(e,t){return new $h(e,t)}var Jh=function(){function e(t,n){v(this,e),this.db=t,this.garbageCollector=Xh(this,n)}return g(e,[{key:"Hn",value:function(e){var t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Zn",value:function(e){var t=0;return this.Jn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Jn",value:function(e,t){return this.Xn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Zh(e,n)}},{key:"removeReference",value:function(e,t,n){return Zh(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Zh(e,t)}},{key:"er",value:function(e,t){return function(e,t){var n=!1;return zh(e).Z((function(r){return Fh(e,r,t).next((function(e){return e&&(n=!0),fs.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Xn(e,(function(o,s){if(s<=t){var u=n.er(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Wo.min()),Wh(e).delete(function(e){return[0,Ts(e.path)]}(o))}))}));i.push(u)}})).next((function(){return fs.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Zh(e,t)}},{key:"Xn",value:function(e,t){var n,r=Wh(e),i=xs._e;return r.Y({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==xs._e&&t(new Xo(As(n)),i),i=u,n=s):i=xs._e})).next((function(){i!==xs._e&&t(new Xo(As(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Zh(e,t){return Wh(e).put(function(e,t){return{targetId:0,path:Ts(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var ed=function(){function e(){v(this,e),this.changes=new Bc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return g(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Wu.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?fs.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),td=function(){function e(t){v(this,e),this.serializer=t}return g(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return ad(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return ad(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],qf(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.tr(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Wu.newInvalidDocument(t);return ad(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(od(t))},(function(e,i){r=n.nr(t,i)})).next((function(){return r}))}},{key:"rr",value:function(e,t){var n=this,r={size:0,document:Wu.newInvalidDocument(t)};return ad(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(od(t))},(function(e,i){r={document:n.nr(t,i),size:Mh(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Gc();return this.ir(e,t,(function(e,t){var i=n.nr(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"sr",value:function(e,t){var n=this,r=Gc(),i=new au(Xo.comparator);return this.ir(e,t,(function(e,t){var a=n.nr(e,t);r=r.insert(e,a),i=i.insert(e,Mh(t))})).next((function(){return{documents:r,_r:i}}))}},{key:"ir",value:function(e,t,n){if(t.isEmpty())return fs.resolve();var r=new uu(ud);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(od(r.first()),od(r.last())),a=r.getIterator(),o=a.getNext();return ad(e).Y({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Xo.fromSegments([].concat(ce(t.prefixPath),[t.collectionGroup,t.documentId]));o&&ud(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.U(od(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r,i){var a=this,o=t.path,s=[o.popLast().toArray(),o.lastSegment(),qf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ad(e).W(IDBKeyRange.bound(s,u,!0)).next((function(e){null==i||i.incrementDocumentReadCount(e.length);var n,o=Gc(),s=y(e);try{for(s.s();!(n=s.n()).done;){var u=n.value,c=a.nr(Xo.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);c.isFoundDocument()&&(Fc(t,c)||r.has(c.key))&&(o=o.insert(c.key,c))}}catch(l){s.e(l)}finally{s.f()}return o}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Gc(),o=sd(t,n),s=sd(t,as.max());return ad(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.nr(Xo.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new rd(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return id(e).get("remoteDocumentGlobalKey").next((function(e){return To(!!e),e}))}},{key:"tr",value:function(e,t){return id(e).put("remoteDocumentGlobalKey",t)}},{key:"nr",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=If(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Xo.fromSegments(t.noDocument.path),i=Kf(t.noDocument.readTime);n=Wu.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Eo();var a=Xo.fromSegments(t.unknownDocument.path),o=Kf(t.unknownDocument.version);n=Wu.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Ko(e[0],e[1]);return Wo.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Wo.min()))return n}return Wu.newInvalidDocument(e)}}]),e}();function nd(e){return new td(e)}var rd=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).ar=e,i.trackRemovals=r,i.ur=new Bc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return g(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new uu((function(e,t){return Bo(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.ur.get(a);if(n.push(t.ar.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=Bf(t.ar.serializer,o);i=i.add(a.path.popLast());var c=Mh(u);r+=c-s.size,n.push(t.ar.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=Bf(t.ar.serializer,o.convertToNoDocument(Wo.min()));n.push(t.ar.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.ar.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.ar.updateMetadata(e,r)),fs.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.ar.rr(e,t).next((function(e){return n.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.ar.sr(e,t).next((function(e){var t=e.documents;return e._r.forEach((function(e,r){n.ur.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(ed);function id(e){return tu(e,"remoteDocumentGlobal")}function ad(e){return tu(e,"remoteDocumentsV14")}function od(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function sd(e,t){var n=t.documentKey.path.toArray();return[e,qf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ud(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Bo(n[a],r[a]))return i;return(i=Bo(n.length,r.length))||((i=Bo(n[n.length-2],r[r.length-2]))||Bo(n[n.length-1],r[r.length-1]))}var cd=g((function e(t,n){v(this,e),this.overlayedDocument=t,this.mutatedFields=n})),ld=function(){function e(t,n,r,i){v(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return g(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Il(r.mutation,e,fu.empty(),Ko.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Zc()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zc(),i=Qc();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Wc();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Qc();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Zc())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Gc(),a=$c(),o=$c();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Cl)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Il(o.mutation,t,o.mutation.getFieldMask(),Ko.now())):a.set(t.key,fu.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new cd(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=$c(),i=new au((function(e,t){return e-t})),a=Zc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=y(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||fu.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||Zc()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=Yc();c.forEach((function(e){if(!a.has(e)){var n=_l(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return fs.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){return function(e){return Xo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Nc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):fs.resolve(Qc()),s=-1,u=a;return o.next((function(t){return fs.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?fs.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,Zc())})).next((function(e){return{batchId:s,changes:Hc(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Xo(t)).next((function(e){var t=Wc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n,r){var i=this,a=t.collectionGroup,o=Wc();return this.indexManager.getCollectionParents(e,a).next((function(s){return fs.forEach(s,(function(s){var u=function(e,t){return new Sc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(a));return i.getDocumentsMatchingCollectionQuery(e,u,n,r).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n,r){var i,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(o){return i=o,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)})).next((function(e){i.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Wu.newInvalidDocument(r)))}));var n=Wc();return e.forEach((function(e,r){var a=i.get(e);void 0!==a&&Il(a.mutation,r,fu.empty(),Ko.now()),Fc(t,r)&&(n=n.insert(e,r))})),n}))}}]),e}(),fd=function(){function e(t){v(this,e),this.serializer=t,this.cr=new Map,this.lr=new Map}return g(e,[{key:"getBundleMetadata",value:function(e,t){return fs.resolve(this.cr.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:df(e.createTime)}}(t)),fs.resolve()}},{key:"getNamedQuery",value:function(e,t){return fs.resolve(this.lr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:Yf(e.bundledQuery),readTime:df(e.readTime)}}(t)),fs.resolve()}}]),e}(),hd=function(){function e(){v(this,e),this.overlays=new au(Xo.comparator),this.hr=new Map}return g(e,[{key:"getOverlay",value:function(e,t){return fs.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Qc();return fs.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ht(e,t,i)})),fs.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.hr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.hr.delete(n)),fs.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Qc(),i=t.length+1,a=new Xo(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return fs.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new au((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=Qc(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Qc(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return fs.resolve(u)}},{key:"ht",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Fl(t,n));var a=this.hr.get(t);void 0===a&&(a=Zc(),this.hr.set(t,a)),this.hr.set(t,a.add(n.key))}}]),e}(),dd=function(){function e(){v(this,e),this.Pr=new uu(pd.Ir),this.Tr=new uu(pd.Er)}return g(e,[{key:"isEmpty",value:function(){return this.Pr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new pd(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}},{key:"dr",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ar(new pd(e,t))}},{key:"Rr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Vr",value:function(e){var t=this,n=new Xo(new Qo([])),r=new pd(n,e),i=new pd(n,e+1),a=[];return this.Tr.forEachInRange([r,i],(function(e){t.Ar(e),a.push(e.key)})),a}},{key:"mr",value:function(){var e=this;this.Pr.forEach((function(t){return e.Ar(t)}))}},{key:"Ar",value:function(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}},{key:"gr",value:function(e){var t=new Xo(new Qo([])),n=new pd(t,e),r=new pd(t,e+1),i=Zc();return this.Tr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new pd(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),pd=function(){function e(t,n){v(this,e),this.key=t,this.pr=n}return g(e,null,[{key:"Ir",value:function(e,t){return Xo.comparator(e.key,t.key)||Bo(e.pr,t.pr)}},{key:"Er",value:function(e,t){return Bo(e.pr,t.pr)||Xo.comparator(e.key,t.key)}}]),e}(),vd=function(){function e(t,n){v(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new uu(pd.Ir)}return g(e,[{key:"checkEmpty",value:function(e){return fs.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Ml(i,t,n,r);this.mutationQueue.push(a);var o,s=y(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.wr=this.wr.add(new pd(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return fs.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return fs.resolve(this.Sr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.br(n),i=r<0?0:r;return fs.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return fs.resolve(0===this.mutationQueue.length?-1:this.yr-1)}},{key:"getAllMutationBatches",value:function(e){return fs.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new pd(t,0),i=new pd(t,Number.POSITIVE_INFINITY),a=[];return this.wr.forEachInRange([r,i],(function(e){var t=n.Sr(e.pr);a.push(t)})),fs.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new uu(Bo);return t.forEach((function(e){var t=new pd(e,0),i=new pd(e,Number.POSITIVE_INFINITY);n.wr.forEachInRange([t,i],(function(e){r=r.add(e.pr)}))})),fs.resolve(this.Dr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Xo.isDocumentKey(i)||(i=i.child(""));var a=new pd(new Xo(i),0),o=new uu(Bo);return this.wr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),a),fs.resolve(this.Dr(o))}},{key:"Dr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Sr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;To(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.wr;return fs.forEach(t.mutations,(function(i){var a=new pd(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.wr=r}))}},{key:"Mn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new pd(t,0),r=this.wr.firstAfterOrEqual(n);return fs.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,fs.resolve()}},{key:"Cr",value:function(e,t){return this.br(e)}},{key:"br",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Sr",value:function(e){var t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),md=function(){function e(t){v(this,e),this.vr=t,this.docs=new au(Xo.comparator),this.size=0}return g(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return fs.resolve(n?n.document.mutableCopy():Wu.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Gc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Wu.newInvalidDocument(e))})),fs.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Gc(),a=t.path,o=new Xo(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||os(is(l),n)<=0||(r.has(l.key)||Fc(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return fs.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Eo()}},{key:"Fr",value:function(e,t){return fs.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new gd(this)}},{key:"getSize",value:function(e){return fs.resolve(this.size)}}]),e}(),gd=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this)).ar=e,r}return g(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.ar.addEntry(e,i)):t.ar.removeEntry(r)})),fs.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.ar.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.ar.getEntries(e,t)}}]),n}(ed),yd=function(){function e(t){v(this,e),this.persistence=t,this.Mr=new Bc((function(e){return kc(e)}),bc),this.lastRemoteSnapshotVersion=Wo.min(),this.highestTargetId=0,this.Or=0,this.Nr=new dd,this.targetCount=0,this.Lr=Bh.Nn()}return g(e,[{key:"forEachTarget",value:function(e,t){return this.Mr.forEach((function(e,n){return t(n)})),fs.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return fs.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return fs.resolve(this.Or)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Lr.next(),fs.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),fs.resolve()}},{key:"qn",value:function(e){this.Mr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Lr=new Bh(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.qn(t),this.targetCount+=1,fs.resolve()}},{key:"updateTargetData",value:function(e,t){return this.qn(t),fs.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,fs.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Mr.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Mr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),fs.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return fs.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Mr.get(t)||null;return fs.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Nr.dr(t,n),fs.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Nr.Rr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),fs.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Nr.Vr(t),fs.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Nr.gr(t);return fs.resolve(n)}},{key:"containsKey",value:function(e,t){return fs.resolve(this.Nr.containsKey(t))}}]),e}(),kd=function(){function e(t,n){var r=this;v(this,e),this.Br={},this.overlays={},this.kr=new xs(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new yd(this),this.indexManager=new Ih,this.remoteDocumentCache=function(e){return new md(e)}((function(e){return r.referenceDelegate.Kr(e)})),this.serializer=new zf(n),this.$r=new fd(this.serializer)}return g(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.qr=!1,Promise.resolve()}},{key:"started",get:function(){return this.qr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new hd,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Br[e.toKey()];return n||(n=new vd(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Qr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.$r}},{key:"runTransaction",value:function(e,t,n){var r=this;_o("MemoryPersistence","Starting transaction:",e);var i=new bd(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((function(e){return r.referenceDelegate.Wr(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gr",value:function(e,t){return fs.or(Object.values(this.Br).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),bd=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return g(n)}(us),wd=function(){function e(t){v(this,e),this.persistence=t,this.zr=new dd,this.jr=null}return g(e,[{key:"Jr",get:function(){if(this.jr)return this.jr;throw Eo()}},{key:"addReference",value:function(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),fs.resolve()}},{key:"removeReference",value:function(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),fs.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Jr.add(t.toString()),fs.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.zr.Vr(t.targetId).forEach((function(e){return n.Jr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Jr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ur",value:function(){this.jr=new Set}},{key:"Wr",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fs.forEach(this.Jr,(function(r){var i=Xo.fromPath(r);return t.Yr(e,i).next((function(e){e||n.removeEntry(i,Wo.min())}))})).next((function(){return t.jr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Yr(e,t).next((function(e){e?n.Jr.delete(t.toString()):n.Jr.add(t.toString())}))}},{key:"Kr",value:function(e){return 0}},{key:"Yr",value:function(e,t){var n=this;return fs.or([function(){return fs.resolve(n.zr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gr(e,t)}])}}],[{key:"Hr",value:function(t){return new e(t)}}]),e}(),_d=function(){function e(t){v(this,e),this.serializer=t}return g(e,[{key:"N",value:function(e,t,n,r){var i=this,a=new hs("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Rs,{unique:!0}),e.createObjectStore("documentMutations")}(e),xd(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=fs.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),xd(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Wo.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Rs,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return fs.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Xr(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.ei(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.ti(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ni(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ri(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Ws});t.createIndex("collectionPathOverlayIndex",Hs,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Qs,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ls});t.createIndex("documentKeyIndex",Ms),t.createIndex("collectionGroupIndex",js)}(e)})).next((function(){return i.ii(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Bs}).createIndex("sequenceNumberIndex",qs,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Gs}).createIndex("documentKeyIndex",Ks,{unique:!1})}(e)}))),o}},{key:"ei",value:function(e){var t=0;return e.store("remoteDocuments").Y((function(e,n){t+=Mh(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Xr",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return fs.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return fs.forEach(r,(function(r){To(r.userId===n.userId);var i=Wf(t.serializer,r);return Lh(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"ti",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Y((function(n,i){var a=new Qo(n),o=function(e){return[0,Ts(e)]}(a);r.push(t.get(o).next((function(n){return n?fs.resolve():function(n){return t.put({targetId:0,path:Ts(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return fs.waitFor(r)}))}))}},{key:"ni",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:zs});var n=t.store("collectionParents"),r=new Sh,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Ts(i)})}};return t.store("remoteDocuments").Y({J:!0},(function(e,t){var n=new Qo(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Y({J:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],As(r));return i(a.popLast())}))}))}},{key:"ri",value:function(e){var t=this,n=e.store("targets");return n.Y((function(e,r){var i=Hf(r),a=Qf(t.serializer,i);return n.put(a)}))}},{key:"ii",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Y((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new Xo(Qo.fromString(e.document.name).popFirst(5)):e.noDocument?Xo.fromSegments(e.noDocument.path):e.unknownDocument?Xo.fromSegments(e.unknownDocument.path):Eo()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return fs.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=nd(this.serializer),a=new kd(wd.Hr,this.serializer.ct);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Zc();Wf(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),fs.forEach(r,(function(e,r){var o=new yo(r),s=nh.lt(n.serializer,o),u=a.getIndexManager(o),c=jh.lt(o,n.serializer,u,a.referenceDelegate);return new ld(i,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new eu(t,xs._e),e).next()}))}))}}]),e}();function xd(e){e.createObjectStore("targetDocuments",{keyPath:Us}).createIndex("documentTargetsIndex",Vs,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Fs,{unique:!0}),e.createObjectStore("targetGlobal")}var Id="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Sd=function(){function e(t,n,r,i,a,o,s,u,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(v(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.oi=a,this.window=o,this.document=s,this._i=c,this.ai=l,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=function(e){return Promise.resolve()},!e.D())throw new Ao(No.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Jh(this,i),this.Ti=n+"main",this.serializer=new zf(u),this.Ei=new ds(this.Ti,this.ui,new _d(this.serializer)),this.Qr=new qh(this.referenceDelegate,this.serializer),this.remoteDocumentCache=nd(this.serializer),this.$r=new Zf,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===l&&xo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return g(e,[{key:"start",value:function(){var e=this;return this.Ai().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Ao(No.FAILED_PRECONDITION,Id);return e.Ri(),e.Vi(),e.mi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Qr.getHighestSequenceNumber(t)}))})).then((function(t){e.kr=new xs(t,e._i)})).then((function(){e.qr=!0})).catch((function(t){return e.Ei&&e.Ei.close(),Promise.reject(t)}))}},{key:"fi",value:function(e){var t=this;return this.Ii=function(){var n=fe(se().mark((function n(r){return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ei.B(function(){var t=fe(se().mark((function t(n){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ai();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ai",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Td(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.gi(t).next((function(t){t||(e.isPrimary=!1,e.oi.enqueueRetryable((function(){return e.Ii(!1)})))}))})).next((function(){return e.pi(t)})).next((function(n){return e.isPrimary&&!n?e.yi(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(ms(t))return _o("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return _o("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.oi.enqueueRetryable((function(){return e.Ii(t)})),e.isPrimary=t}))}},{key:"gi",value:function(e){var t=this;return Ed(e).get("owner").next((function(e){return fs.resolve(t.Si(e))}))}},{key:"bi",value:function(e){return Td(e).delete(this.clientId)}},{key:"Di",value:function(){var e=fe(se().mark((function e(){var t,n,r,i,a=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ci(this.Pi,18e5)){e.next=6;break}return this.Pi=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=tu(e,"clientMetadata");return t.W().next((function(e){var n=a.vi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return fs.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.di){n=y(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.di.removeItem(this.Fi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mi",value:function(){var e=this;this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ai().then((function(){return e.Di()})).then((function(){return e.mi()}))}))}},{key:"Si",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"pi",value:function(e){var t=this;return this.ai?fs.resolve(!0):Ed(e).get("owner").next((function(n){if(null!==n&&t.Ci(n.leaseTimestampMs,5e3)&&!t.Mi(n.ownerId)){if(t.Si(n)&&t.networkEnabled)return!0;if(!t.Si(n)){if(!n.allowTabSynchronization)throw new Ao(No.FAILED_PRECONDITION,Id);return!1}}return!(!t.networkEnabled||!t.inForeground)||Td(e).W().next((function(e){return void 0===t.vi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&_o("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=fe(se().mark((function e(){var t=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),e.next=7,this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new eu(e,xs._e);return t.yi(n).next((function(){return t.bi(n)}))}));case 7:this.Ei.close(),this.Li();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vi",value:function(e,t){var n=this;return e.filter((function(e){return n.Ci(e.updateTimeMs,t)&&!n.Mi(e.clientId)}))}},{key:"Bi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Td(t).W().next((function(t){return e.vi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.qr}},{key:"getMutationQueue",value:function(e,t){return jh.lt(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Qr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Th(e,this.serializer.ct.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return nh.lt(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.$r}},{key:"runTransaction",value:function(e,t,n){var r=this;_o("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?Zs:14===e?Js:13===e?Xs:12===e?$s:11===e?Ys:void Eo()}(this.ui);return this.Ei.runTransaction(e,a,o,(function(a){return i=new eu(a,r.kr?r.kr.next():xs._e),"readwrite-primary"===t?r.gi(i).next((function(e){return!!e||r.pi(i)})).next((function(t){if(!t)throw xo("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.oi.enqueueRetryable((function(){return r.Ii(!1)})),new Ao(No.FAILED_PRECONDITION,ss);return n(i)})).next((function(e){return r.wi(i).next((function(){return e}))})):r.ki(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"ki",value:function(e){var t=this;return Ed(e).get("owner").next((function(e){if(null!==e&&t.Ci(e.leaseTimestampMs,5e3)&&!t.Mi(e.ownerId)&&!t.Si(e)&&!(t.ai||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Ao(No.FAILED_PRECONDITION,Id)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ed(e).put("owner",t)}},{key:"yi",value:function(e){var t=this,n=Ed(e);return n.get("owner").next((function(e){return t.Si(e)?(_o("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):fs.resolve()}))}},{key:"Ci",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(xo("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=function(){e.oi.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ai()}))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}},{key:"Oi",value:function(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}},{key:"Vi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;K()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.oi.enterRestrictedMode(!0),t.oi.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"Ni",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Mi",value:function(e){var t;try{var n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return _o("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return xo("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){xo("Failed to set zombie client id.",e)}}},{key:"Li",value:function(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}},{key:"Fi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return ds.D()}}]),e}();function Ed(e){return tu(e,"owner")}function Td(e){return tu(e,"clientMetadata")}function Cd(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Nd=function(){function e(t,n,r,i){v(this,e),this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}return g(e,null,[{key:"Ki",value:function(t,n){var r,i=Zc(),a=Zc(),o=y(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Ad=function(){function e(){v(this,e),this._documentReadCount=0}return g(e,[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(e){this._documentReadCount+=e}}]),e}(),Rd=function(){function e(){v(this,e),this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=K()?8:ds.v(U())>0?6:4}return g(e,[{key:"initialize",value:function(e,t){this.zi=e,this.indexManager=t,this.$i=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a={result:null};return this.ji(e,t).next((function(e){a.result=e})).next((function(){if(!a.result)return i.Hi(e,t,r,n).next((function(e){a.result=e}))})).next((function(){if(!a.result){var n=new Ad;return i.Ji(e,t,n).next((function(r){if(a.result=r,i.Ui)return i.Yi(e,t,n,r.size)}))}})).next((function(){return a.result}))}},{key:"Yi",value:function(e,t,n,r){return n.documentReadCount<this.Wi?(wo()<=ge.DEBUG&&_o("QueryEngine","SDK will not create cache indexes for query:",jc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),fs.resolve()):(wo()<=ge.DEBUG&&_o("QueryEngine","Query:",jc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(wo()<=ge.DEBUG&&_o("QueryEngine","The SDK decides to create cache indexes for query:",jc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rc(t))):fs.resolve())}},{key:"ji",value:function(e,t){var n=this;if(Cc(t))return fs.resolve(null);var r=Rc(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Oc(t,null,"F"),r=Rc(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Zc.apply(void 0,ce(i));return n.zi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Zi(t,i);return n.Xi(t,o,a,r.readTime)?n.ji(e,Oc(t,null,"F")):n.es(e,o,t,r)}))}))})))}))}},{key:"Hi",value:function(e,t,n,r){var i=this;return Cc(t)||r.isEqual(Wo.min())?fs.resolve(null):this.zi.getDocuments(e,n).next((function(a){var o=i.Zi(t,a);return i.Xi(t,o,n,r)?fs.resolve(null):(wo()<=ge.DEBUG&&_o("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),jc(t)),i.es(e,o,t,rs(r,-1)).next((function(e){return e})))}))}},{key:"Zi",value:function(e,t){var n=new uu(Vc(e));return t.forEach((function(t,r){Fc(e,r)&&(n=n.add(r))})),n}},{key:"Xi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ji",value:function(e,t,n){return wo()<=ge.DEBUG&&_o("QueryEngine","Using full collection scan to execute query:",jc(t)),this.zi.getDocumentsMatchingQuery(e,t,as.min(),n)}},{key:"es",value:function(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Pd=function(){function e(t,n,r,i){v(this,e),this.persistence=t,this.ts=n,this.serializer=i,this.ns=new au(Bo),this.rs=new Bc((function(e){return kc(e)}),bc),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}return g(e,[{key:"_s",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ld(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ns)}))}}]),e}();function Dd(e,t,n,r){return new Pd(e,t,n,r)}function Od(e,t){return Ld.apply(this,arguments)}function Ld(){return Ld=fe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Co(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r._s(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=Zc(),u=y(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,f=y(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){u.e(b)}finally{u.f()}var d,p=y(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,g=y(v.mutations);try{for(g.s();!(m=g.n()).done;){var k=m.value;s=s.add(k.key)}}catch(b){g.e(b)}finally{g.f()}}}catch(b){p.e(b)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{us:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Ld.apply(this,arguments)}function Md(e,t){var n=Co(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=fs.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);To(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Zc(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function jd(e){var t=Co(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Qr.getLastRemoteSnapshotVersion(e)}))}function Fd(e,t){var n=Co(e),r=t.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Qr.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Qr.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(du.EMPTY_BYTE_STRING,Wo.min()).withLastLimboFreeSnapshotVersion(Wo.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Qr.updateTargetData(e,c))}}));var s=Gc(),u=Zc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ud(e,a,t.documentUpdates).next((function(e){s=e.cs,u=e.ls}))),!r.isEqual(Wo.min())){var c=n.Qr.getLastRemoteSnapshotVersion(e).next((function(t){return n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return fs.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.ns=i,e}))}function Ud(e,t,n){var r=Zc(),i=Zc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Gc();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Wo.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):_o("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{cs:r,ls:i}}))}function Vd(e,t){var n=Co(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function zd(e,t){var n=Co(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Qr.getTargetData(e,t).next((function(i){return i?(r=i,fs.resolve(r)):n.Qr.allocateTargetId(e).next((function(i){return r=new Vf(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}function Bd(e,t,n){return qd.apply(this,arguments)}function qd(){return qd=fe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Co(t),a=i.ns.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),ms(e.t1)){e.next=12;break}throw e.t1;case 12:_o("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ns=i.ns.remove(n),i.rs.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),qd.apply(this,arguments)}function Gd(e,t,n){var r=Co(e),i=Wo.min(),a=Zc();return r.persistence.runTransaction("Execute query","readwrite",(function(e){return function(e,t,n){var r=Co(e),i=r.rs.get(n);return void 0!==i?fs.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Rc(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ts.getDocumentsMatchingQuery(e,t,n?i:Wo.min(),n?a:Zc())})).next((function(e){return Hd(r,Uc(t),e),{documents:e,hs:a}}))}))}function Kd(e,t){var n=Co(e),r=Co(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r._t(e,t).next((function(e){return e?e.target:null}))}))}function Wd(e,t){var n=Co(e),r=n.ss.get(t)||Wo.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.os.getAllFromCollectionGroup(e,t,rs(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Hd(n,t,e),e}))}function Hd(e,t,n){var r=e.ss.get(t)||Wo.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}function Qd(e,t,n,r){return Yd.apply(this,arguments)}function Yd(){return Yd=fe(se().mark((function e(t,n,r,i){var a,o,s,u,c,l,f,h,d,p;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Co(t),o=Zc(),s=Gc(),u=y(r);try{for(u.s();!(c=u.n()).done;)l=c.value,f=n.Ps(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Is(l)).setReadTime(n.Ts(l.metadata.readTime)),s=s.insert(f,h)}catch(v){u.e(v)}finally{u.f()}return d=a.os.newChangeBuffer({trackRemovals:!0}),e.next=7,zd(a,function(e){return Rc(Tc(Qo.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Ud(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.Qr.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Qr.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls)})).next((function(){return t.cs}))}))})));case 9:case"end":return e.stop()}}),e)}))),Yd.apply(this,arguments)}function $d(e,t){return Xd.apply(this,arguments)}function Xd(){return Xd=fe(se().mark((function e(t,n){var r,i,a,o=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Zc(),e.next=3,zd(t,Rc(Yf(n.bundledQuery)));case 3:return i=e.sent,a=Co(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=df(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.$r.saveNamedQuery(e,n);var o=i.withResumeToken(du.EMPTY_BYTE_STRING,t);return a.ns=a.ns.insert(o.targetId,o),a.Qr.updateTargetData(e,o).next((function(){return a.Qr.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Qr.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.$r.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Xd.apply(this,arguments)}function Jd(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Zd(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function ep(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var tp=function(){function e(t,n,r,i){v(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return g(e,[{key:"ds",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Ao(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(xo("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),np=function(){function e(t,n,r){v(this,e),this.targetId=t,this.state=n,this.error=r}return g(e,[{key:"ds",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ao(i.error.code,i.error.message))),a?new e(t,i.state,r):(xo("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),rp=function(){function e(t,n){v(this,e),this.clientId=t,this.activeTargetIds=n}return g(e,null,[{key:"Es",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=tl(),o=0;i&&o<r.activeTargetIds.length;++o)i=Es(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(xo("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),ip=function(){function e(t,n){v(this,e),this.clientId=t,this.onlineState=n}return g(e,null,[{key:"Es",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(xo("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),ap=function(){function e(){v(this,e),this.activeTargetIds=tl()}return g(e,[{key:"As",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Rs",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"ds",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),op=function(){function e(t,n,r,i,a){v(this,e),this.window=t,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new au(Bo),this.started=!1,this.ys=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ws=Jd(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new ap),this.bs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}return g(e,[{key:"start",value:function(){var e=fe(se().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f,h=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Bi();case 2:t=e.sent,n=y(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Vs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Jd(this.persistenceKey,i)))&&(o=rp.Es(i,a))&&(this.ps=this.ps.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Ms(),(s=this.storage.getItem(this.vs))&&(u=this.xs(s))&&this.Os(u),c=y(this.ys);try{for(c.s();!(l=c.n()).done;)f=l.value,this.gs(f)}catch(d){c.e(d)}finally{c.f()}this.ys=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ss,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ns(this.ps)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ps.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ls(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ls(e,t,n),this.Bs(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(ep(this.persistenceKey,e));if(n){var r=np.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}},{key:"removeLocalQueryTarget",value:function(e){this.ks.Rs(e),this.Ms()}},{key:"isLocalQueryTarget",value:function(e){return this.ks.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(ep(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.qs(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Bs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Qs(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ks(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return _o("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){_o("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){_o("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"gs",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(_o("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void xo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(fe(se().mark((function e(){var r,i,a,o,s,u,c;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.bs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.$s(n.key),e.abrupt("return",t.Us(r,null));case 6:if(!(i=t.Ws(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Us(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Ds.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Gs(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.zs(a));case 16:e.next=41;break;case 18:if(!t.Cs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.js(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Hs(o));case 23:e.next=41;break;case 25:if(n.key!==t.vs){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.xs(n.newValue))){e.next=30;break}return e.abrupt("return",t.Os(s));case 30:e.next=41;break;case 32:if(n.key!==t.Ss){e.next=37;break}u=function(e){var t=xs._e;if(null!=e)try{var n=JSON.parse(e);To("number"==typeof n),t=n}catch(e){xo("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==xs._e&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.Fs){e.next=41;break}return c=t.Js(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Ys(e)})));case 41:e.next=44;break;case 43:t.ys.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"ks",get:function(){return this.ps.get(this.Vs)}},{key:"Ms",value:function(){this.setItem(this.ws,this.ks.ds())}},{key:"Ls",value:function(e,t,n){var r=new tp(this.currentUser,e,t,n),i=Zd(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}},{key:"Bs",value:function(e){var t=Zd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Qs",value:function(e){var t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}},{key:"qs",value:function(e,t,n){var r=ep(this.persistenceKey,e),i=new np(e,t,n);this.setItem(r,i.ds())}},{key:"Ks",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}},{key:"$s",value:function(e){var t=this.bs.exec(e);return t?t[1]:null}},{key:"Ws",value:function(e,t){var n=this.$s(e);return rp.Es(n,t)}},{key:"Gs",value:function(e,t){var n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return tp.Es(new yo(i),r,t)}},{key:"js",value:function(e,t){var n=this.Cs.exec(e),r=Number(n[1]);return np.Es(r,t)}},{key:"xs",value:function(e){return ip.Es(e)}},{key:"Js",value:function(e){return JSON.parse(e)}},{key:"zs",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Zs(t.batchId,t.state,t.error));case 2:_o("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Hs",value:function(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}},{key:"Us",value:function(e,t){var n=this,r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),a=this.Ns(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.eo(o,s).then((function(){n.ps=r}))}},{key:"Os",value:function(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ns",value:function(e){var t=tl();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),sp=function(){function e(){v(this,e),this.no=new ap,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return g(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.no.As(e),this.ro[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.ro[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.no.Rs(e)}},{key:"isLocalQueryTarget",value:function(e){return this.no.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.ro[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.no.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.no.activeTargetIds.has(e)}},{key:"start",value:function(){return this.no=new ap,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),up=function(){function e(){v(this,e)}return g(e,[{key:"io",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),cp=function(){function e(){var t=this;v(this,e),this.so=function(){return t.oo()},this._o=function(){return t.ao()},this.uo=[],this.co()}return g(e,[{key:"io",value:function(e){this.uo.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}},{key:"co",value:function(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}},{key:"oo",value:function(){_o("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=y(this.uo);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"ao",value:function(){_o("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=y(this.uo);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),lp=null;function fp(){return null===lp?lp=268435456+Math.round(2147483648*Math.random()):lp++,"0x"+lp.toString(16)}var hp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},dp=function(){function e(t){v(this,e),this.lo=t.lo,this.ho=t.ho}return g(e,[{key:"Po",value:function(e){this.Io=e}},{key:"To",value:function(e){this.Eo=e}},{key:"onMessage",value:function(e){this.Ao=e}},{key:"close",value:function(){this.ho()}},{key:"send",value:function(e){this.lo(e)}},{key:"Ro",value:function(){this.Io()}},{key:"Vo",value:function(e){this.Eo(e)}},{key:"mo",value:function(e){this.Ao(e)}}]),e}(),pp="WebChannelConnection",vp=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return g(n,[{key:"Co",value:function(e,t,n,r){var i=fp();return new Promise((function(a,o){var s=new po;s.setWithCredentials(!0),s.listenOnce(co.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case uo.NO_ERROR:var t=s.getResponseJson();_o(pp,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case uo.TIMEOUT:_o(pp,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Ao(No.DEADLINE_EXCEEDED,"Request time out"));break;case uo.HTTP_ERROR:var n=s.getStatus();if(_o(pp,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(No).indexOf(t)>=0?t:No.UNKNOWN}(u.status);o(new Ao(c,u.message))}else o(new Ao(No.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Ao(No.UNAVAILABLE,"Connection failed."));break;default:Eo()}}finally{_o(pp,"RPC '".concat(e,"' ").concat(i," completed."))}}));var u=JSON.stringify(r);_o(pp,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"Fo",value:function(e,t,n){var r=fp(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=oo(),o=so(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Do(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var c=i.join("");_o(pp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);var l=a.createWebChannel(c,s),f=!1,h=!1,d=new dp({lo:function(t){h?_o(pp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(_o(pp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),_o(pp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},ho:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,ho.EventType.OPEN,(function(){h||_o(pp,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,ho.EventType.CLOSE,(function(){h||(h=!0,_o(pp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Vo())})),p(l,ho.EventType.ERROR,(function(t){h||(h=!0,Io(pp,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Vo(new Ao(No.UNAVAILABLE,"The operation could not be completed")))})),p(l,ho.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];To(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){_o(pp,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=Pl[e];if(void 0!==t)return zl(t)}(s),c=o.message;void 0===u&&(u=No.INTERNAL,c="Unknown error status: "+s+" with message "+o.message),h=!0,d.Vo(new Ao(u,c)),l.close()}else _o(pp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.mo(i)}})),p(o,lo.STAT_EVENT,(function(t){t.stat===fo.PROXY?_o(pp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===fo.NOPROXY&&_o(pp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.Ro()}),0),d}}]),n}(function(){function e(t){v(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=n+"://"+t.host,this.po="projects/".concat(r,"/databases/").concat(i),this.yo="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}return g(e,[{key:"wo",get:function(){return!1}},{key:"So",value:function(e,t,n,r,i){var a=fp(),o=this.bo(e,t.toUriEncodedString());_o("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(s,r,i),this.Co(e,o,s,n).then((function(t){return _o("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Io("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.So(e,t,n,r,i)}},{key:"Do",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ko,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"bo",value:function(e,t){var n=hp[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}},{key:"terminate",value:function(){}}]),e}());function mp(){return"undefined"!=typeof window?window:null}function gp(){return"undefined"!=typeof document?document:null}function yp(e){return new uf(e,!0)}var kp=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;v(this,e),this.oi=t,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=a,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}return g(e,[{key:"reset",value:function(){this.No=0}},{key:"ko",value:function(){this.No=this.Oo}},{key:"qo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&_o("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,(function(){return t.Bo=Date.now(),e()})),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}},{key:"Ko",value:function(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}},{key:"cancel",value:function(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"Qo",value:function(){return(Math.random()-.5)*this.No}}]),e}(),bp=function(){function e(t,n,r,i,a,o,s,u){v(this,e),this.oi=t,this.$o=r,this.Uo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new kp(t,n)}return g(e,[{key:"Ho",value:function(){return 1===this.state||5===this.state||this.Jo()}},{key:"Jo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Yo()}},{key:"stop",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Ho(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zo",value:function(){this.state=0,this.jo.reset()}},{key:"Xo",value:function(){var e=this;this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(function(){return e.e_()})))}},{key:"t_",value:function(e){this.n_(),this.stream.send(e)}},{key:"e_",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Jo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"n_",value:function(){this.Go&&(this.Go.cancel(),this.Go=null)}},{key:"r_",value:function(){this.zo&&(this.zo.cancel(),this.zo=null)}},{key:"close",value:function(){var e=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==t?this.jo.reset():n&&n.code===No.RESOURCE_EXHAUSTED?(xo(n.toString()),xo("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===No.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.To(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"i_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Wo===n&&e.o_(i,a)}),(function(n){t((function(){var t=new Ao(No.UNKNOWN,"Fetching auth token failed: "+n.message);return e.__(t)}))}))}},{key:"o_",value:function(e,t){var n=this,r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((function(){r((function(){return n.state=2,n.zo=n.oi.enqueueAfterDelay(n.Uo,1e4,(function(){return n.Jo()&&(n.state=3),Promise.resolve()})),n.listener.Po()}))})),this.stream.To((function(e){r((function(){return n.__(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Yo",value:function(){var e=this;this.state=5,this.jo.qo(fe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"__",value:function(e){return _o("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"s_",value:function(e){var t=this;return function(n){t.oi.enqueueAndForget((function(){return t.Wo===e?n():(_o("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),wp=function(e){w(n,e);var t=S(n);function n(e,r,i,a,o,s){var u;return v(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u}return g(n,[{key:"a_",value:function(e,t){return this.connection.Fo("Listen",e,t)}},{key:"onMessage",value:function(e){this.jo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Eo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(To(void 0===t||"string"==typeof t),du.fromBase64String(t||"")):(To(void 0===t||t instanceof Uint8Array),du.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?No.UNKNOWN:zl(e.code);return new Ao(t,e.message||"")}(o);n=new Zl(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=yf(e,u.document.name),l=df(u.document.updateTime),f=u.document.createTime?df(u.document.createTime):Wo.min(),h=new Gu({mapValue:{fields:u.document.fields}}),d=Wu.newFoundDocument(c,l,f,h),p=u.targetIds||[],v=u.removedTargetIds||[];n=new Xl(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var g=yf(e,m.document),y=m.readTime?df(m.readTime):Wo.min(),k=Wu.newNoDocument(g,y),b=m.removedTargetIds||[];n=new Xl([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=yf(e,w.document),x=w.removedTargetIds||[];n=new Xl([],x,_,null)}else{if(!("filter"in t))return Eo();t.filter;var I=t.filter;I.targetId;var S=I.count,E=void 0===S?0:S,T=I.unchangedNames,C=new Ul(E,T),N=I.targetId;n=new Jl(N,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Wo.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Wo.min():t.readTime?df(t.readTime):Wo.min()}(e);return this.listener.u_(t,n)}},{key:"c_",value:function(e){var t={};t.database=wf(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=wc(r)?{documents:Cf(e,r)}:{query:Nf(e,r).ut}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ff(e,t.resumeToken);var i=cf(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Wo.min())>0){n.readTime=lf(e,t.snapshotVersion.toTimestamp());var a=cf(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Eo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}},{key:"l_",value:function(e){var t={};t.database=wf(this.serializer),t.removeTarget=e,this.t_(t)}}]),n}(bp),_p=function(e){w(n,e);var t=S(n);function n(e,r,i,a,o,s){var u;return v(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u.h_=!1,u}return g(n,[{key:"P_",get:function(){return this.h_}},{key:"start",value:function(){this.h_=!1,this.lastStreamToken=void 0,Ht(_(n.prototype),"start",this).call(this)}},{key:"i_",value:function(){this.h_&&this.I_([])}},{key:"a_",value:function(e,t){return this.connection.Fo("Write",e,t)}},{key:"onMessage",value:function(e){if(To(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();var t=function(e,t){return e&&e.length>0?(To(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?df(e.updateTime):df(t);return n.isEqual(Wo.min())&&(n=df(t)),new yl(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=df(e.commitTime);return this.listener.T_(n,t)}return To(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}},{key:"d_",value:function(){var e={};e.database=wf(this.serializer),this.t_(e)}},{key:"I_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Ef(t.serializer,e)}))};this.t_(n)}}]),n}(bp),xp=function(e){w(n,e);var t=S(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.A_=!1,o}return g(n,[{key:"R_",value:function(){if(this.A_)throw new Ao(No.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"So",value:function(e,t,n,r){var i=this;return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),s=o[0],u=o[1];return i.connection.So(e,vf(t,n),r,s,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===No.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Ao(No.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r,i){var a=this;return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(o){var s=c(o,2),u=s[0],l=s[1];return a.connection.vo(e,vf(t,n),r,u,l,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===No.UNAUTHENTICATED&&(a.authCredentials.invalidateToken(),a.appCheckCredentials.invalidateToken()),e):new Ao(No.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.A_=!0,this.connection.terminate()}}]),n}(g((function e(){v(this,e)})));var Ip=function(){function e(t,n){v(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}return g(e,[{key:"p_",value:function(){var e=this;0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.f_=null,e.w_("Backend didn't respond within 10 seconds."),e.y_("Offline"),Promise.resolve()})))}},{key:"S_",value:function(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}},{key:"set",value:function(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}},{key:"y_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"w_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(xo(t),this.g_=!1):_o("OnlineStateTracker",t)}},{key:"b_",value:function(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}]),e}(),Sp=g((function e(t,n,r,i,a){var o=this;v(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=a,this.M_.io((function(e){r.enqueueAndForget(fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Mp(o),!e.t0){e.next=5;break}return _o("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Co(t)).v_.add(4),e.next=4,Cp(n);case 4:return n.x_.set("Unknown"),n.v_.delete(4),e.next=8,Ep(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.x_=new Ip(r,i)}));function Ep(e){return Tp.apply(this,arguments)}function Tp(){return(Tp=fe(se().mark((function e(t){var n,r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Mp(t)){e.next=18;break}n=y(t.F_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function Cp(e){return Np.apply(this,arguments)}function Np(){return(Np=fe(se().mark((function e(t){var n,r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=y(t.F_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function Ap(e,t){var n=Co(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Lp(n)?Op(n):fv(n).Jo()&&Pp(n,t))}function Rp(e,t){var n=Co(e),r=fv(n);n.C_.delete(t),r.Jo()&&Dp(n,t),0===n.C_.size&&(r.Jo()?r.Xo():Mp(n)&&n.x_.set("Unknown"))}function Pp(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Wo.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}fv(e).c_(t)}function Dp(e,t){e.O_.Oe(t),fv(e).l_(t)}function Op(e){e.O_=new tf({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},_t:function(t){return e.C_.get(t)||null},nt:function(){return e.datastore.serializer.databaseId}}),fv(e).start(),e.x_.p_()}function Lp(e){return Mp(e)&&!fv(e).Ho()&&e.C_.size>0}function Mp(e){return 0===Co(e).v_.size}function jp(e){e.O_=void 0}function Fp(e){return Up.apply(this,arguments)}function Up(){return(Up=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.C_.forEach((function(e,n){Pp(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vp(e,t){return zp.apply(this,arguments)}function zp(){return(zp=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:jp(t),Lp(t)?(t.x_.S_(n),Op(t)):t.x_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bp(e,t,n){return qp.apply(this,arguments)}function qp(){return qp=fe(se().mark((function e(t,n,r){var i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.x_.set("Online"),!(n instanceof Zl&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=fe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=y(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.C_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.C_.delete(o),t.O_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),_o("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Gp(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Xl?t.O_.$e(n):n instanceof Jl?t.O_.Je(n):t.O_.Ge(n),r.isEqual(Wo.min())){e.next=29;break}return e.prev=14,e.next=17,jd(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.O_.it(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.C_.get(t);if(r){e.C_.set(t,r.withResumeToken(du.EMPTY_BYTE_STRING,r.snapshotVersion)),Dp(e,t);var i=new Vf(r.target,t,n,r.sequenceNumber);Pp(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),_o("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Gp(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),qp.apply(this,arguments)}function Gp(e,t,n){return Kp.apply(this,arguments)}function Kp(){return(Kp=fe(se().mark((function e(t,n,r){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ms(n)){e.next=2;break}throw n;case 2:return t.v_.add(1),e.next=5,Cp(t);case 5:t.x_.set("Offline"),r||(r=function(){return jd(t.localStore)}),t.asyncQueue.enqueueRetryable(fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _o("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.v_.delete(1),e.next=6,Ep(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wp(e,t){return t().catch((function(n){return Gp(e,n,t)}))}function Hp(e){return Qp.apply(this,arguments)}function Qp(){return Qp=fe(se().mark((function e(t){var n,r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Co(t),r=hv(n),i=n.D_.length>0?n.D_[n.D_.length-1].batchId:-1;case 2:if(!Yp(n)){e.next=19;break}return e.prev=3,e.next=6,Vd(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.D_.length&&r.Xo(),e.abrupt("break",19);case 10:i=a.batchId,$p(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Gp(n,e.t0);case 17:e.next=2;break;case 19:Xp(n)&&Jp(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Qp.apply(this,arguments)}function Yp(e){return Mp(e)&&e.D_.length<10}function $p(e,t){e.D_.push(t);var n=hv(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Xp(e){return Mp(e)&&!hv(e).Ho()&&e.D_.length>0}function Jp(e){hv(e).start()}function Zp(e){return ev.apply(this,arguments)}function ev(){return(ev=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:hv(t).d_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tv(e){return nv.apply(this,arguments)}function nv(){return(nv=fe(se().mark((function e(t){var n,r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=hv(t),r=y(t.D_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.I_(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rv(e,t,n){return iv.apply(this,arguments)}function iv(){return iv=fe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.D_.shift(),a=jl.from(i,n,r),e.next=3,Wp(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Hp(t);case 5:case"end":return e.stop()}}),e)}))),iv.apply(this,arguments)}function av(e,t){return ov.apply(this,arguments)}function ov(){return ov=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&hv(t).P_,!e.t0){e.next=4;break}return e.next=4,function(){var e=fe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return Vl(e)&&e!==No.ABORTED}(n.code)){e.next=7;break}return r=t.D_.shift(),hv(t).Zo(),e.next=5,Wp(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Hp(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Xp(t)&&Jp(t);case 5:case"end":return e.stop()}}),e)}))),ov.apply(this,arguments)}function sv(e,t){return uv.apply(this,arguments)}function uv(){return uv=fe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Co(t)).asyncQueue.verifyOperationInProgress(),_o("RemoteStore","RemoteStore received new credentials"),i=Mp(r),r.v_.add(3),e.next=6,Cp(r);case 6:return i&&r.x_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.v_.delete(3),e.next=12,Ep(r);case 12:case"end":return e.stop()}}),e)}))),uv.apply(this,arguments)}function cv(e,t){return lv.apply(this,arguments)}function lv(){return(lv=fe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Co(t),!n){e.next=7;break}return r.v_.delete(2),e.next=5,Ep(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.v_.add(2),e.next=12,Cp(r);case 12:r.x_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fv(e){return e.N_||(e.N_=function(e,t,n){var r=Co(e);return r.R_(),new wp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Fp.bind(null,e),To:Vp.bind(null,e),u_:Bp.bind(null,e)}),e.F_.push(function(){var t=fe(se().mark((function t(n){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.N_.Zo(),Lp(e)?Op(e):e.x_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.N_.stop();case 6:jp(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.N_}function hv(e){return e.L_||(e.L_=function(e,t,n){var r=Co(e);return r.R_(),new _p(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Zp.bind(null,e),To:av.bind(null,e),E_:tv.bind(null,e),T_:rv.bind(null,e)}),e.F_.push(function(){var t=fe(se().mark((function t(n){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.L_.Zo(),t.next=4,Hp(e);case 4:t.next=9;break;case 6:return t.next=8,e.L_.stop();case 8:e.D_.length>0&&(_o("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.L_}var dv=function(){function e(t,n,r,i,a){v(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ro,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return g(e,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ao(No.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function pv(e,t){if(xo("AsyncQueue","".concat(t,": ").concat(e)),ms(e))return new Ao(No.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var vv,mv,gv=function(){function e(t){v(this,e),this.comparator=t?function(e,n){return t(e,n)||Xo.comparator(e.key,n.key)}:function(e,t){return Xo.comparator(e.key,t.key)},this.keyedMap=Wc(),this.sortedSet=new au(this.comparator)}return g(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),yv=function(){function e(){v(this,e),this.B_=new au(Xo.comparator)}return g(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Eo():this.B_=this.B_.insert(t,e)}},{key:"k_",value:function(){var e=[];return this.B_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),kv=function(){function e(t,n,r,i,a,o,s,u,c){v(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return g(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,gv.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),bv=function(){function e(){v(this,e),this.q_=void 0,this.Q_=[]}return g(e,[{key:"K_",value:function(){return this.Q_.some((function(e){return e.U_()}))}}]),e}(),wv=g((function e(){v(this,e),this.queries=new Bc((function(e){return Mc(e)}),Lc),this.onlineState="Unknown",this.W_=new Set}));function _v(e,t){return xv.apply(this,arguments)}function xv(){return xv=fe(se().mark((function e(t,n){var r,i,a,o,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Co(t),i=3,a=n.query,(o=r.queries.get(a))?!o.K_()&&n.U_()&&(i=2):(o=new bv,i=n.U_()?0:1),e.prev=5,e.t0=i,e.next=0===e.t0?9:1===e.t0?13:2===e.t0?17:19;break;case 9:return e.next=11,r.onListen(a,!0);case 11:return o.q_=e.sent,e.abrupt("break",19);case 13:return e.next=15,r.onListen(a,!1);case 15:return o.q_=e.sent,e.abrupt("break",19);case 17:return e.next=19,r.onFirstRemoteStoreListen(a);case 19:e.next=25;break;case 21:return e.prev=21,e.t1=e.catch(5),s=pv(e.t1,"Initialization of query '".concat(jc(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 25:r.queries.set(a,o),o.Q_.push(n),n.G_(r.onlineState),o.q_&&n.z_(o.q_)&&Cv(r);case 26:case"end":return e.stop()}}),e,null,[[5,21]])}))),xv.apply(this,arguments)}function Iv(e,t){return Sv.apply(this,arguments)}function Sv(){return Sv=fe(se().mark((function e(t,n){var r,i,a,o,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Co(t),i=n.query,a=3,(o=r.queries.get(i))&&(s=o.Q_.indexOf(n))>=0&&(o.Q_.splice(s,1),0===o.Q_.length?a=n.U_()?0:1:!o.K_()&&n.U_()&&(a=2)),e.t0=a,e.next=0===e.t0?7:1===e.t0?8:2===e.t0?9:10;break;case 7:return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i,!0)));case 8:return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i,!1)));case 9:return e.abrupt("return",r.onLastRemoteStoreUnlisten(i));case 10:return e.abrupt("return");case 11:case"end":return e.stop()}}),e)}))),Sv.apply(this,arguments)}function Ev(e,t){var n,r=Co(e),i=!1,a=y(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=y(u.Q_);try{for(l.s();!(c=l.n()).done;){c.value.z_(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}u.q_=o}}}catch(f){a.e(f)}finally{a.f()}i&&Cv(r)}function Tv(e,t,n){var r=Co(e),i=r.queries.get(t);if(i){var a,o=y(i.Q_);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function Cv(e){e.W_.forEach((function(e){e.next()}))}(mv=vv||(vv={})).j_="default",mv.Cache="cache";var Nv=function(){function e(t,n,r){v(this,e),this.query=t,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}return g(e,[{key:"z_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=y(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new kv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),a=!0):this.X_(e,this.onlineState)&&(this.ea(e),a=!0),this.Y_=e,a}},{key:"onError",value:function(e){this.H_.error(e)}},{key:"G_",value:function(e){this.onlineState=e;var t=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),t=!0),t}},{key:"X_",value:function(e,t){if(!e.fromCache)return!0;if(!this.U_())return!0;var n="Offline"!==t;return(!this.options.ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Z_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"ea",value:function(e){e=kv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}},{key:"U_",value:function(){return this.options.source!==vv.Cache}}]),e}(),Av=function(){function e(t,n){v(this,e),this.na=t,this.byteLength=n}return g(e,[{key:"ra",value:function(){return"metadata"in this.na}}]),e}(),Rv=function(){function e(t){v(this,e),this.serializer=t}return g(e,[{key:"Ps",value:function(e){return yf(this.serializer,e)}},{key:"Is",value:function(e){return e.metadata.exists?If(this.serializer,e.document,!1):Wu.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}},{key:"Ts",value:function(e){return df(e)}}]),e}(),Pv=function(){function e(t,n,r){v(this,e),this.ia=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Dv(t)}return g(e,[{key:"sa",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++t;var n=Qo.fromString(e.na.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"oa",value:function(e){var t,n=new Map,r=new Rv(this.serializer),i=y(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.Ps(a.metadata.name),u=y(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||Zc()).add(s);n.set(c,l)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=fe(se().mark((function e(){var t,n,r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qd(this.localStore,new Rv(this.serializer),this.documents,this.ia.id);case 2:t=e.sent,n=this.oa(this.documents),r=y(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,$d(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Dv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Ov=g((function e(t){v(this,e),this.key=t})),Lv=g((function e(t){v(this,e),this.key=t})),Mv=function(){function e(t,n){v(this,e),this.query=t,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Zc(),this.mutatedKeys=Zc(),this.ha=Vc(t),this.Pa=new gv(this.ha)}return g(e,[{key:"Ia",get:function(){return this.ua}},{key:"Ta",value:function(e,t){var n=this,r=t?t.Ea:new yv,i=t?t.Pa:this.Pa,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Fc(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.da(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.ha(f,u)>0||c&&n.ha(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Pa:o,Ea:r,Xi:s,mutatedKeys:a}}},{key:"da",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n,r){var i=this,a=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;var o=e.Ea.k_();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Eo()}};return n(e)-n(t)}(e.type,t.type)||i.ha(e.doc,t.doc)})),this.Aa(n),r=null!=r&&r;var s=t&&!r?this.Ra():[],u=0===this.la.size&&this.current&&!r?1:0,c=u!==this.ca;return this.ca=u,0!==o.length||c?{snapshot:new kv(this.query,e.Pa,a,o,e.mutatedKeys,0===u,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),Va:s}:{Va:s}}},{key:"G_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new yv,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}},{key:"ma",value:function(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}},{key:"Aa",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.ua=t.ua.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.ua=t.ua.delete(e)})),this.current=e.current)}},{key:"Ra",value:function(){var e=this;if(!this.current)return[];var t=this.la;this.la=Zc(),this.Pa.forEach((function(t){e.ma(t.key)&&(e.la=e.la.add(t.key))}));var n=[];return t.forEach((function(t){e.la.has(t)||n.push(new Lv(t))})),this.la.forEach((function(e){t.has(e)||n.push(new Ov(e))})),n}},{key:"fa",value:function(e){this.ua=e.hs,this.la=Zc();var t=this.Ta(e.documents);return this.applyChanges(t,!0)}},{key:"ga",value:function(){return kv.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}]),e}(),jv=g((function e(t,n,r){v(this,e),this.query=t,this.targetId=n,this.view=r})),Fv=g((function e(t){v(this,e),this.key=t,this.pa=!1})),Uv=function(){function e(t,n,r,i,a,o){v(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Bc((function(e){return Mc(e)}),Lc),this.Sa=new Map,this.ba=new Set,this.Da=new au(Xo.comparator),this.Ca=new Map,this.va=new dd,this.Fa={},this.Ma=new Map,this.xa=Bh.Ln(),this.onlineState="Unknown",this.Oa=void 0}return g(e,[{key:"isPrimaryClient",get:function(){return!0===this.Oa}}]),e}();function Vv(e,t){return zv.apply(this,arguments)}function zv(){return zv=fe(se().mark((function e(t,n){var r,i,a,o,s=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!(s.length>2&&void 0!==s[2])||s[2],i=Um(t),!(o=i.wa.get(n))){e.next=7;break}i.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.ga(),e.next=10;break;case 7:return e.next=9,Gv(i,n,r,!0);case 9:a=e.sent;case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)}))),zv.apply(this,arguments)}function Bv(e,t){return qv.apply(this,arguments)}function qv(){return(qv=fe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Um(t),e.next=3,Gv(r,n,!0,!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gv(e,t,n,r){return Kv.apply(this,arguments)}function Kv(){return Kv=fe(se().mark((function e(t,n,r,i){var a,o,s,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zd(t.localStore,Rc(n));case 2:if(a=e.sent,o=a.targetId,s=r?t.sharedClientState.addLocalQueryTarget(o):"not-current",e.t0=i,!e.t0){e.next=10;break}return e.next=9,Wv(t,n,o,"current"===s,a.resumeToken);case 9:u=e.sent;case 10:return t.isPrimaryClient&&r&&Ap(t.remoteStore,a),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)}))),Kv.apply(this,arguments)}function Wv(e,t,n,r,i){return Hv.apply(this,arguments)}function Hv(){return Hv=fe(se().mark((function e(t,n,r,i,a){var o,s,u,c,l,f;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Na=function(e,n,r){return function(){var e=fe(se().mark((function e(t,n,r,i){var a,o,s,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ta(r),e.t0=a.Xi,!e.t0){e.next=6;break}return e.next=5,Gd(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ta(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=i&&null!=i.targetMismatches.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o,s),e.abrupt("return",(vm(t,n.targetId,u.Va),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Gd(t.localStore,n,!0);case 3:return o=e.sent,s=new Mv(n,o.hs),u=s.Ta(o.documents),c=$l.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=s.applyChanges(u,t.isPrimaryClient,c),vm(t,r,l.Va),f=new jv(n,r,s),e.abrupt("return",(t.wa.set(n,f),t.Sa.has(r)?t.Sa.get(r).push(n):t.Sa.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),Hv.apply(this,arguments)}function Qv(e,t,n){return Yv.apply(this,arguments)}function Yv(){return Yv=fe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Co(t),a=i.wa.get(n),!((o=i.Sa.get(a.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(i.Sa.set(a.targetId,o.filter((function(e){return!Lc(e,n)}))),void i.wa.delete(n)));case 3:if(!i.isPrimaryClient){e.next=11;break}if(i.sharedClientState.removeLocalQueryTarget(a.targetId),e.t0=i.sharedClientState.isActiveQueryTarget(a.targetId),e.t0){e.next=9;break}return e.next=9,Bd(i.localStore,a.targetId,!1).then((function(){i.sharedClientState.clearQueryState(a.targetId),r&&Rp(i.remoteStore,a.targetId),dm(i,a.targetId)})).catch(cs);case 9:e.next=14;break;case 11:return dm(i,a.targetId),e.next=14,Bd(i.localStore,a.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Yv.apply(this,arguments)}function $v(e,t){return Xv.apply(this,arguments)}function Xv(){return Xv=fe(se().mark((function e(t,n){var r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Co(t),i=r.wa.get(n),a=r.Sa.get(i.targetId),r.isPrimaryClient&&1===a.length&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),Rp(r.remoteStore,i.targetId));case 2:case"end":return e.stop()}}),e)}))),Xv.apply(this,arguments)}function Jv(e,t,n){return Zv.apply(this,arguments)}function Zv(){return Zv=fe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Vm(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Co(e),a=Ko.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Zc());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=Gc(),u=Zc();return i.os.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=y(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=Sl(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new Cl(c.key,l,Ku(l.value.mapValue),kl.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Hc(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Fa[e.currentUser.toKey()];r||(r=new au(Bo)),r=r.insert(t,n),e.Fa[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,ym(i,a.changes);case 9:return e.next=11,Hp(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=pv(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Zv.apply(this,arguments)}function em(e,t){return tm.apply(this,arguments)}function tm(){return tm=fe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Co(t),e.prev=1,e.next=4,Fd(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Ca.get(t);n&&(To(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.pa=!0:e.modifiedDocuments.size>0?To(n.pa):e.removedDocuments.size>0&&(To(n.pa),n.pa=!1))})),e.next=8,ym(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,cs(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),tm.apply(this,arguments)}function nm(e,t,n){var r=Co(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wa.forEach((function(e,n){var r=n.view.G_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Co(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=y(n.Q_);try{for(a.s();!(i=a.n()).done;){i.value.G_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Cv(n)}(r.eventManager,t),i.length&&r.ya.u_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function rm(e,t,n){return im.apply(this,arguments)}function im(){return im=fe(se().mark((function e(t,n,r){var i,a,o,s,u,c;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Co(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Ca.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new au(Xo.comparator)).insert(o,Wu.newNoDocument(o,Wo.min())),u=Zc().add(o),c=new Yl(Wo.min(),new Map,new au(Bo),s,u),e.next=9,em(i,c);case 9:i.Da=i.Da.remove(o),i.Ca.delete(n),gm(i),e.next=16;break;case 14:return e.next=16,Bd(i.localStore,n,!1).then((function(){return dm(i,n,r)})).catch(cs);case 16:case"end":return e.stop()}}),e)}))),im.apply(this,arguments)}function am(e,t){return om.apply(this,arguments)}function om(){return om=fe(se().mark((function e(t,n){var r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Co(t),i=n.batch.batchId,e.prev=1,e.next=4,Md(r.localStore,n);case 4:return a=e.sent,hm(r,i,null),fm(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,ym(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,cs(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),om.apply(this,arguments)}function sm(e,t,n){return um.apply(this,arguments)}function um(){return um=fe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Co(t),e.prev=1,e.next=4,function(e,t){var n=Co(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return To(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,hm(i,n,r),fm(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,ym(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,cs(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),um.apply(this,arguments)}function cm(e,t){return lm.apply(this,arguments)}function lm(){return lm=fe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mp((r=Co(t)).remoteStore)||_o("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Co(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ma.get(i)||[]).push(n),r.Ma.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=pv(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),lm.apply(this,arguments)}function fm(e,t){(e.Ma.get(t)||[]).forEach((function(e){e.resolve()})),e.Ma.delete(t)}function hm(e,t,n){var r=Co(e),i=r.Fa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Fa[r.currentUser.toKey()]=i}}function dm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=y(e.Sa.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wa.delete(a),n&&e.ya.La(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach((function(t){e.va.containsKey(t)||pm(e,t)}))}function pm(e,t){e.ba.delete(t.path.canonicalString());var n=e.Da.get(t);null!==n&&(Rp(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),gm(e))}function vm(e,t,n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Ov?(e.va.addReference(a.key,t),mm(e,a)):a instanceof Lv?(_o("SyncEngine","Document no longer in limbo: "+a.key),e.va.removeReference(a.key,t),e.va.containsKey(a.key)||pm(e,a.key)):Eo()}}catch(o){i.e(o)}finally{i.f()}}function mm(e,t){var n=t.key,r=n.path.canonicalString();e.Da.get(n)||e.ba.has(r)||(_o("SyncEngine","New document in limbo: "+n),e.ba.add(r),gm(e))}function gm(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){var t=e.ba.values().next().value;e.ba.delete(t);var n=new Xo(Qo.fromString(t)),r=e.xa.next();e.Ca.set(r,new Fv(n)),e.Da=e.Da.insert(n,r),Ap(e.remoteStore,new Vf(Rc(Tc(n.path)),r,"TargetPurposeLimboResolution",xs._e))}}function ym(e,t,n){return km.apply(this,arguments)}function km(){return km=fe(se().mark((function e(t,n,r){var i,a,o,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Co(t),a=[],o=[],s=[],e.t0=i.wa.isEmpty(),e.t0){e.next=9;break}return i.wa.forEach((function(e,t){s.push(i.Na(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Nd.Ki(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.ya.u_(a),e.next=9,function(){var e=fe(se().mark((function e(t,n){var r,i,a,o,s,u,c,l;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Co(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return fs.forEach(n,(function(t){return fs.forEach(t.qi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return fs.forEach(t.Qi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),ms(e.t0)){e.next=10;break}throw e.t0;case 10:_o("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=y(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.ns.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.ns=r.ns.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),km.apply(this,arguments)}function bm(e,t){return wm.apply(this,arguments)}function wm(){return(wm=fe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Co(t)).currentUser.isEqual(n)){e.next=11;break}return _o("SyncEngine","User change. New user:",n.toKey()),e.next=5,Od(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ma.forEach((function(e){e.forEach((function(e){e.reject(new Ao(No.CANCELLED,t))}))})),e.Ma.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,ym(r,i.us);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _m(e,t){var n=Co(e),r=n.Ca.get(t);if(r&&r.pa)return Zc().add(r.key);var i=Zc(),a=n.Sa.get(t);if(!a)return i;var o,s=y(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.wa.get(u);i=i.unionWith(c.view.Ia)}}catch(l){s.e(l)}finally{s.f()}return i}function xm(e,t){return Im.apply(this,arguments)}function Im(){return Im=fe(se().mark((function e(t,n){var r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Co(t),e.next=3,Gd(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.fa(i),e.abrupt("return",(r.isPrimaryClient&&vm(r,n.targetId,a.Va),a));case 6:case"end":return e.stop()}}),e)}))),Im.apply(this,arguments)}function Sm(e,t){return Em.apply(this,arguments)}function Em(){return(Em=fe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Co(t),e.abrupt("return",Wd(r.localStore,n).then((function(e){return ym(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tm(e,t,n,r){return Cm.apply(this,arguments)}function Cm(){return Cm=fe(se().mark((function e(t,n,r,i){var a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Co(t),e.next=3,function(e,t){var n=Co(e),r=Co(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.vn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):fs.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Hp(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(hm(a,n,i||null),fm(a,n),function(e,t){Co(Co(e).mutationQueue).Mn(t)}(a.localStore,n)):Eo();case 11:return e.next=13,ym(a,o);case 13:e.next=16;break;case 15:_o("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Cm.apply(this,arguments)}function Nm(e,t){return Am.apply(this,arguments)}function Am(){return(Am=fe(se().mark((function e(t,n){var r,i,a,o,s,u,c,l;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Um(r=Co(t)),Vm(r),!0!==n||!0===r.Oa){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Rm(r,i.toArray());case 5:return a=e.sent,r.Oa=!0,e.next=9,cv(r.remoteStore,!0);case 9:o=y(a);try{for(o.s();!(s=o.n()).done;)u=s.value,Ap(r.remoteStore,u)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Oa){e.next=25;break}return c=[],l=Promise.resolve(),r.Sa.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return dm(r,t),Bd(r.localStore,t,!0)})),Rp(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Rm(r,c);case 21:return function(e){var t=Co(e);t.Ca.forEach((function(e,n){Rp(t.remoteStore,n)})),t.va.mr(),t.Ca=new Map,t.Da=new au(Xo.comparator)}(r),r.Oa=!1,e.next=25,cv(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rm(e,t,n){return Pm.apply(this,arguments)}function Pm(){return Pm=fe(se().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d,p,v,m,g;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Co(t),a=[],o=[],s=y(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(f=i.Sa.get(c))||0===f.length){e.next=34;break}return e.next=11,zd(i.localStore,Rc(f[0]));case 11:l=e.sent,h=y(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.wa.get(p),e.next=20,xm(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Kd(i.localStore,c);case 36:return g=e.sent,e.next=39,zd(i.localStore,g);case 39:return l=e.sent,e.next=42,Wv(i,Dm(g),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.ya.u_(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Pm.apply(this,arguments)}function Dm(e){return Ec(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Om(e){return function(e){return Co(Co(e).persistence).Bi()}(Co(e).localStore)}function Lm(e,t,n,r){return Mm.apply(this,arguments)}function Mm(){return Mm=fe(se().mark((function e(t,n,r,i){var a,o,s,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Co(t)).Oa){e.next=3;break}return e.abrupt("return",void _o("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.Sa.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Wd(a.localStore,Uc(o[0]));case 10:return s=e.sent,u=Yl.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,du.EMPTY_BYTE_STRING),e.next=14,ym(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,Bd(a.localStore,n,!0);case 17:return dm(a,n,i),e.abrupt("break",20);case 19:Eo();case 20:case"end":return e.stop()}}),e)}))),Mm.apply(this,arguments)}function jm(e,t,n){return Fm.apply(this,arguments)}function Fm(){return Fm=fe(se().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Um(t)).Oa){e.next=45;break}a=y(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.Sa.has(s)||!i.sharedClientState.isActiveQueryTarget(s)){e.next=10;break}return _o("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Kd(i.localStore,s);case 12:return u=e.sent,e.next=15,zd(i.localStore,u);case 15:return c=e.sent,e.next=18,Wv(i,Dm(u),c.targetId,!1,c.resumeToken);case 18:Ap(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=y(r),e.prev=30,h=se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Sa.has(t),!e.t0){e.next=5;break}return e.next=5,Bd(i.localStore,t,!1).then((function(){Rp(i.remoteStore,t),dm(i,t)})).catch(cs);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Fm.apply(this,arguments)}function Um(e){var t=Co(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=em.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_m.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=rm.bind(null,t),t.ya.u_=Ev.bind(null,t.eventManager),t.ya.La=Tv.bind(null,t.eventManager),t}function Vm(e){var t=Co(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=am.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=sm.bind(null,t),t}function zm(e,t,n){var r=Co(e);(function(){var e=fe(se().mark((function e(t,n,r){var i,a,o,s,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Co(e),r=df(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.$r.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Dv(i)),a=new Pv(i,t.localStore,n.serializer),e.next=15,n.Ba();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.sa(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.Ba();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,ym(t,u.aa,void 0);case 31:return e.next=33,function(e,t){var n=Co(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.$r.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u._a));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Io("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Bm=function(){function e(){v(this,e),this.synchronizeTabs=!1}return g(e,[{key:"initialize",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=yp(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Dd(this.persistence,new Rd,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new kd(wd.Hr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new sp}},{key:"terminate",value:function(){var e=fe(se().mark((function e(){var t,n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(n=this.indexBackfillerScheduler)||void 0===n||n.stop(),this.sharedClientState.shutdown(),e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),qm=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).ka=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return g(n,[{key:"initialize",value:function(){var e=fe(se().mark((function e(t){var r=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht(_(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ka.initialize(this,t);case 4:return e.next=6,Vm(this.ka.syncEngine);case 6:return e.next=8,Hp(this.ka.remoteStore);case 8:return e.next=10,this.persistence.fi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Dd(this.persistence,new Rd,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Yh(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new _s(t,this.persistence);return new ws(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=Cd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Oh.withCacheSize(this.cacheSizeBytes):Oh.DEFAULT;return new Sd(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,mp(),gp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new sp}}]),n}(Bm),Gm=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r,!1)).ka=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return g(n,[{key:"initialize",value:function(){var e=fe(se().mark((function e(t){var r,i=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht(_(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ka.syncEngine,e.t0=this.sharedClientState instanceof op,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Zs:Tm.bind(null,r),Xs:Lm.bind(null,r),eo:jm.bind(null,r),Bi:Om.bind(null,r),Ys:Sm.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.fi(function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nm(i.ka.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=mp();if(!op.D(t))throw new Ao(No.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Cd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new op(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(qm),Km=function(){function e(){v(this,e)}return g(e,[{key:"initialize",value:function(){var e=fe(se().mark((function e(t,n){var r=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return nm(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=bm.bind(null,this.syncEngine),e.next=12,cv(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new wv}},{key:"createDatastore",value:function(e){var t=yp(e.databaseInfo.databaseId),n=function(e){return new vp(e)}(e.databaseInfo);return function(e,t,n,r){return new xp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new Sp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return nm(t.syncEngine,e,0)}),cp.D()?new cp:new up)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new Uv(e,t,n,r,i,a);return o&&(s.Oa=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){var e=fe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Co(t),_o("RemoteStore","RemoteStore shutting down."),n.v_.add(5),e.next=5,Cp(n);case 5:n.M_.shutdown(),n.x_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore);case 2:null===(t=this.datastore)||void 0===t||t.terminate();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Wm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return fe(se().mark((function r(){var i;return se().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var Hm=function(){function e(t){v(this,e),this.observer=t,this.muted=!1}return g(e,[{key:"next",value:function(e){this.observer.next&&this.qa(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.qa(this.observer.error,e):xo("Uncaught Error in snapshot listener:",e.toString())}},{key:"Qa",value:function(){this.muted=!0}},{key:"qa",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Qm=function(){function e(t,n){var r=this;v(this,e),this.Ka=t,this.serializer=n,this.metadata=new Ro,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then((function(e){e&&e.ra()?r.metadata.resolve(e.na.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.na))))}),(function(e){return r.metadata.reject(e)}))}return g(e,[{key:"close",value:function(){return this.Ka.cancel()}},{key:"getMetadata",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ba",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ua());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ua",value:function(){var e=fe(se().mark((function e(){var t,n,r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Wa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.$a.decode(t),r=Number(n),isNaN(r)&&this.Ga("length string (".concat(n,") is not valid number")),e.next=9,this.za(r);case 9:return i=e.sent,e.abrupt("return",new Av(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ja",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Wa",value:function(){var e=fe(se().mark((function e(){var t,n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.ja()<0)){e.next=7;break}return e.next=3,this.Ha();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.ja())<0&&this.Ga("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"za",value:function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ha();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Ga("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.$a.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){throw this.Ka.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ha",value:function(){var e=fe(se().mark((function e(){var t,n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ka.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ym=function(){function e(t){v(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}return g(e,[{key:"lookup",value:function(){var e=fe(se().mark((function e(t){var n,r=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw this.lastTransactionError=new Ao(No.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;case 2:return e.next=4,function(){var e=fe(se().mark((function e(t,n){var r,i,a,o,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Co(t),i={documents:n.map((function(e){return gf(r.serializer,e)}))},e.next=4,r.vo("BatchGetDocuments",r.serializer.databaseId,Qo.emptyPath(),i,n.length);case 4:return a=e.sent,o=new Map,a.forEach((function(e){var t=Sf(r.serializer,e);o.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=o.get(e.toString());To(!!t),s.push(t)})),s));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Ol(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=fe(se().mark((function e(){var t,n=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastTransactionError){e.next=2;break}throw this.lastTransactionError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Xo.fromPath(t);n.mutations.push(new Ll(r,n.precondition(r)))})),e.next=7,function(){var e=fe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Co(t),i={writes:n.map((function(e){return Ef(r.serializer,e)}))},e.next=3,r.So("Commit",r.serializer.databaseId,Qo.emptyPath(),i);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Eo();t=Wo.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ao(No.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Wo.min())?kl.exists(!1):kl.updateTime(t):kl.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Wo.min()))throw new Ao(No.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kl.updateTime(t)}return kl.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),$m=function(){function e(t,n,r,i,a){v(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Ja=r.maxAttempts,this.jo=new kp(this.asyncQueue,"transaction_retry")}return g(e,[{key:"Ya",value:function(){this.Ja-=1,this.Za()}},{key:"Za",value:function(){var e=this;this.jo.qo(fe(se().mark((function t(){var n,r;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Ym(e.datastore),(r=e.Xa(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.eu(t)}))}))})).catch((function(t){e.eu(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Xa",value:function(e){try{var t=this.updateFunction(e);return!Is(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"eu",value:function(e){var t=this;this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget((function(){return t.Za(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"tu",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Vl(t)}return!1}}]),e}(),Xm=function(){function e(t,n,r,i){var a=this;v(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yo.UNAUTHENTICATED,this.clientId=zo.newId(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _o("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return _o("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return g(e,[{key:"configuration",get:function(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Ao(No.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Ro;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(fe(se().mark((function n(){var r;return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=pv(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Jm(e,t){return Zm.apply(this,arguments)}function Zm(){return Zm=fe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),_o("FirestoreClient","Initializing OfflineComponentProvider"),r=t.configuration,e.next=4,n.initialize(r);case 4:i=r.initialUser,t.setCredentialChangeListener(function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Od(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 6:case"end":return e.stop()}}),e)}))),Zm.apply(this,arguments)}function eg(e,t){return tg.apply(this,arguments)}function tg(){return(tg=fe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,rg(t);case 3:return r=e.sent,_o("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,n.initialize(r,t.configuration);case 7:t.setCredentialChangeListener((function(e){return sv(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return sv(n.remoteStore,t)})),t._onlineComponents=n;case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ng(e){return"FirebaseError"===e.name?e.code===No.FAILED_PRECONDITION||e.code===No.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function rg(e){return ig.apply(this,arguments)}function ig(){return(ig=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return _o("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Jm(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),ng(n=e.t0)){e.next=13;break}throw n;case 13:return Io("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Jm(t,new Bm);case 16:e.next=21;break;case 18:return _o("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Jm(t,new Bm);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function ag(e){return og.apply(this,arguments)}function og(){return(og=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return _o("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,eg(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return _o("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,eg(t,new Km);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sg(e){return rg(e).then((function(e){return e.persistence}))}function ug(e){return rg(e).then((function(e){return e.localStore}))}function cg(e){return ag(e).then((function(e){return e.remoteStore}))}function lg(e){return ag(e).then((function(e){return e.syncEngine}))}function fg(e){return ag(e).then((function(e){return e.datastore}))}function hg(e){return dg.apply(this,arguments)}function dg(){return(dg=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ag(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Vv.bind(null,n.syncEngine),r.onUnlisten=Qv.bind(null,n.syncEngine),r.onFirstRemoteStoreListen=Bv.bind(null,n.syncEngine),r.onLastRemoteStoreUnlisten=$v.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ro;return e.asyncQueue.enqueueAndForget(fe(se().mark((function i(){return se().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Hm({next:function(a){t.enqueueAndForget((function(){return Iv(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new Ao(No.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new Ao(No.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Nv(Tc(n.path),a,{includeMetadataChanges:!0,ta:!0});return _v(e,o)},i.next=3,hg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function vg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ro;return e.asyncQueue.enqueueAndForget(fe(se().mark((function i(){return se().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Hm({next:function(n){t.enqueueAndForget((function(){return Iv(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Ao(No.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Nv(n,a,{includeMetadataChanges:!0,ta:!0});return _v(e,o)},i.next=3,hg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function mg(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var gg=new Map;function yg(e,t,n){if(!n)throw new Ao(No.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function kg(e,t,n,r){if(!0===t&&!0===r)throw new Ao(No.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function bg(e){if(!Xo.isDocumentKey(e))throw new Ao(No.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function wg(e){if(Xo.isDocumentKey(e))throw new Ao(No.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function _g(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Eo()}function xg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ao(No.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=_g(e);throw new Ao(No.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Ig(e,t){if(t<=0)throw new Ao(No.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Sg=function(){function e(t){var n,r;if(v(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Ao(No.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ao(No.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}kg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mg(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ao(No.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Ao(No.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Ao(No.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return g(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Eg=function(){function e(t,n,r,i){v(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sg({}),this._settingsFrozen=!1}return g(e,[{key:"app",get:function(){if(!this._app)throw new Ao(No.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Ao(No.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Do;switch(e.type){case"firstParty":return new jo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ao(No.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=gg.get(e);t&&(_o("ComponentProvider","Removing Datastore"),gg.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Tg(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=xg(e,Eg))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&Io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var s,u;if("string"==typeof i.mockUserToken)s=i.mockUserToken,u=yo.MOCK_USER;else{s=F(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Ao(No.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new yo(c)}e._authCredentials=new Oo(new Po(s,u))}}var Cg=function(){function e(t,n,r){v(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return g(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Ng=function(){function e(t,n,r){v(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return g(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Ag(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Ag=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,r,Tc(i)))._path=i,a.type="collection",a}return g(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Ng(this.firestore,null,new Xo(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Cg);function Rg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=oe(e),yg("collection","path",t),e instanceof Eg){var a=Qo.fromString.apply(Qo,[t].concat(r));return wg(a),new Ag(e,null,a)}if(!(e instanceof Ng||e instanceof Ag))throw new Ao(No.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Qo.fromString.apply(Qo,[t].concat(r)));return wg(o),new Ag(e.firestore,null,o)}function Pg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=oe(e),1===arguments.length&&(t=zo.newId()),yg("doc","path",t),e instanceof Eg){var a=Qo.fromString.apply(Qo,[t].concat(r));return bg(a),new Ng(e,null,new Xo(a))}if(!(e instanceof Ng||e instanceof Ag))throw new Ao(No.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Qo.fromString.apply(Qo,[t].concat(r)));return bg(o),new Ng(e.firestore,e instanceof Ag?e.converter:null,new Xo(o))}function Dg(e,t){return e=oe(e),t=oe(t),(e instanceof Ng||e instanceof Ag)&&(t instanceof Ng||t instanceof Ag)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Og(e,t){return e=oe(e),t=oe(t),e instanceof Cg&&t instanceof Cg&&e.firestore===t.firestore&&Lc(e._query,t._query)&&e.converter===t.converter}var Lg=function(){function e(){var t=this;v(this,e),this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new kp(this,"async_queue_retry"),this.cu=function(){var e=gp();e&&_o("AsyncQueue","Visibility state changed to "+e.visibilityState),t.jo.Ko()};var n=gp();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.cu)}return g(e,[{key:"isShuttingDown",get:function(){return this.iu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.lu(),this.hu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.iu){this.iu=!0,this.au=e||!1;var t=gp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.cu)}}},{key:"enqueue",value:function(e){var t=this;if(this.lu(),this.iu)return new Promise((function(){}));var n=new Ro;return this.hu((function(){return t.iu&&t.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ru.push(e),t.Pu()}))}},{key:"Pu",value:function(){var e=fe(se().mark((function e(){var t=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ru.length){e.next=14;break}return e.prev=1,e.next=4,this.ru[0]();case 4:this.ru.shift(),this.jo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),ms(e.t0)){e.next=12;break}throw e.t0;case 12:_o("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ru.length>0&&this.jo.qo((function(){return t.Pu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"hu",value:function(e){var t=this,n=this.nu.then((function(){return t._u=!0,e().catch((function(e){t.ou=e,t._u=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw xo("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t._u=!1,e}))}));return this.nu=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.lu(),this.uu.indexOf(e)>-1&&(t=0);var i=dv.createAndSchedule(this,e,t,n,(function(e){return r.Iu(e)}));return this.su.push(i),i}},{key:"lu",value:function(){this.ou&&Eo()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Tu",value:function(){var e=fe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.nu,e.next=3,t;case 3:if(t!==this.nu){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Eu",value:function(e){var t,n=y(this.su);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"du",value:function(e){var t=this;return this.Tu().then((function(){t.su.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=y(t.su);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Tu()}))}},{key:"Au",value:function(e){this.uu.push(e)}},{key:"Iu",value:function(e){var t=this.su.indexOf(e);this.su.splice(t,1)}}]),e}();function Mg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=y(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var jg=function(){function e(){v(this,e),this._progressObserver={},this._taskCompletionResolver=new Ro,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return g(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Fg=function(e){w(n,e);var t=S(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Lg,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return g(n,[{key:"_terminate",value:function(){return this._firestoreClient||Vg(this),this._firestoreClient.terminate()}}]),n}(Eg);function Ug(e){return e._firestoreClient||Vg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Vg(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new wu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,mg(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Xm(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function zg(e,t,n){var r=new Ro;return e.asyncQueue.enqueue(fe(se().mark((function i(){var a;return se().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Jm(e,n);case 3:return i.next=5,eg(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),ng(a=i.t0)){i.next=13;break}throw a;case 13:Io("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Bg(e){return function(e){var t=new Ro;return e.asyncQueue.enqueueAndForget(fe(se().mark((function n(){return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=cm,n.next=3,lg(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Ug(e=xg(e,Fg)))}function qg(e){return function(e){return e.asyncQueue.enqueue(fe(se().mark((function t(){var n,r;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,sg(e);case 2:return n=t.sent,t.next=5,cg(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Co(e);return t.v_.delete(0),Ep(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Ug(e=xg(e,Fg)))}function Gg(e){return function(e){return e.asyncQueue.enqueue(fe(se().mark((function t(){var n,r;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,sg(e);case 2:return n=t.sent,t.next=5,cg(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Co(t)).v_.add(0),e.next=4,Cp(n);case 4:n.x_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Ug(e=xg(e,Fg)))}function Kg(e,t){var n=Ug(e=xg(e,Fg)),r=new jg;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Qm(e,t)}(function(e,t){if(e instanceof Uint8Array)return Wm(e,t);if(e instanceof ArrayBuffer)return Wm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?ql().encode(e):e),t)}(n,yp(t));e.asyncQueue.enqueueAndForget(fe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=zm,t.next=3,lg(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Wg(e,t){return function(e,t){return e.asyncQueue.enqueue(fe(se().mark((function n(){return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Co(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.$r.getNamedQuery(e,t)}))},n.next=3,ug(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Ug(e=xg(e,Fg)),t).then((function(t){return t?new Cg(e,null,t.query):null}))}function Hg(e){if(e._initialized||e._terminated)throw new Ao(No.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Qg=function(){function e(t){v(this,e),this._byteString=t}return g(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(du.fromBase64String(t))}catch(t){throw new Ao(No.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(du.fromUint8Array(t))}}]),e}(),Yg=function(){function e(){v(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Ao(No.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $o(n)}return g(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var $g=g((function e(t){v(this,e),this._methodName=t})),Xg=function(){function e(t,n){if(v(this,e),!isFinite(t)||t<-90||t>90)throw new Ao(No.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ao(No.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return g(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Bo(this._lat,e._lat)||Bo(this._long,e._long)}}]),e}(),Jg=/^__.*__$/,Zg=function(){function e(t,n,r){v(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return g(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Cl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tl(e,this.data,t,this.fieldTransforms)}}]),e}(),ey=function(){function e(t,n,r){v(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return g(e,[{key:"toMutation",value:function(e,t){return new Cl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function ty(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Eo()}}var ny=function(){function e(t,n,r,i,a,o){v(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ru(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return g(e,[{key:"path",get:function(){return this.settings.path}},{key:"Vu",get:function(){return this.settings.Vu}},{key:"mu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"fu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.pu(e),r}},{key:"yu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.Ru(),r}},{key:"wu",value:function(e){return this.mu({path:void 0,gu:!0})}},{key:"Su",value:function(e){return _y(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ru",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.pu(this.path.get(e))}},{key:"pu",value:function(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(ty(this.Vu)&&Jg.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}]),e}(),ry=function(){function e(t,n,r){v(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||yp(t)}return g(e,[{key:"Cu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ny({Vu:e,methodName:t,Du:n,path:$o.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function iy(e){var t=e._freezeSettings(),n=yp(e._databaseId);return new ry(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ay(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Cu(a.merge||a.mergeFields?2:0,t,n,i);yy("Data must be an object, but it was:",o,r);var s,u,c=my(r,o);if(a.merge)s=new fu(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=y(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=ky(t,l.value,n);if(!o.contains(d))throw new Ao(No.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));xy(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}s=new fu(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new Zg(new Gu(c),s,u)}var oy=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Vu)throw 1===e.Vu?e.Su("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Su("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}($g);function sy(e,t,n){return new ny({Vu:3,Du:t.settings.Du,methodName:e._methodName,gu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var uy=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_toFieldTransform",value:function(e){return new gl(e.path,new cl)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}($g),cy=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).vu=r,i}return g(n,[{key:"_toFieldTransform",value:function(e){var t=sy(this,e,!0),n=this.vu.map((function(e){return vy(e,t)})),r=new ll(n);return new gl(e.path,r)}},{key:"isEqual",value:function(e){return e instanceof n&&J(this.vu,e.vu)}}]),n}($g),ly=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).vu=r,i}return g(n,[{key:"_toFieldTransform",value:function(e){var t=sy(this,e,!0),n=this.vu.map((function(e){return vy(e,t)})),r=new hl(n);return new gl(e.path,r)}},{key:"isEqual",value:function(e){return e instanceof n&&J(this.vu,e.vu)}}]),n}($g),fy=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).Fu=r,i}return g(n,[{key:"_toFieldTransform",value:function(e){var t=new pl(e.serializer,il(e.serializer,this.Fu));return new gl(e.path,t)}},{key:"isEqual",value:function(e){return e instanceof n&&this.Fu===e.Fu}}]),n}($g);function hy(e,t,n,r){var i=e.Cu(1,t,n);yy("Data must be an object, but it was:",i,r);var a=[],o=Gu.empty();ru(r,(function(e,r){var s=wy(t,e,n);r=oe(r);var u=i.yu(s);if(r instanceof oy)a.push(s);else{var c=vy(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new fu(a);return new ey(o,s,i.fieldTransforms)}function dy(e,t,n,r,i,a){var o=e.Cu(1,t,n),s=[ky(t,r,n)],u=[i];if(a.length%2!=0)throw new Ao(No.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(ky(t,a[c])),u.push(a[c+1]);for(var l=[],f=Gu.empty(),h=s.length-1;h>=0;--h)if(!xy(l,s[h])){var d=s[h],p=u[h];p=oe(p);var v=o.yu(d);if(p instanceof oy)l.push(d);else{var m=vy(p,v);null!=m&&(l.push(d),f.set(d,m))}}var g=new fu(l);return new ey(f,g,o.fieldTransforms)}function py(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return vy(n,e.Cu(r?4:3,t))}function vy(e,t){if(gy(e=oe(e)))return yy("Unsupported field value:",t,e),my(e,t);if(e instanceof $g)return function(e,t){if(!ty(t.Vu))throw t.Su("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Su("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&4!==t.Vu)throw t.Su("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=y(e);try{for(a.s();!(n=a.n()).done;){var o=vy(n.value,t.wu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=oe(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return il(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Ko.fromDate(e);return{timestampValue:lf(t.serializer,n)}}if(e instanceof Ko){var r=new Ko(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:lf(t.serializer,r)}}if(e instanceof Xg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Qg)return{bytesValue:ff(t.serializer,e._byteString)};if(e instanceof Ng){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Su("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:pf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Su("Unsupported field value: ".concat(_g(e)))}(e,t)}function my(e,t){var n={};return iu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ru(e,(function(e,r){var i=vy(r,t.fu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function gy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ko||e instanceof Xg||e instanceof Qg||e instanceof Ng||e instanceof $g)}function yy(e,t,n){if(!gy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=_g(n);throw"an object"===r?t.Su(e+" a custom object"):t.Su(e+" "+r)}}function ky(e,t,n){if((t=oe(t))instanceof Yg)return t._internalPath;if("string"==typeof t)return wy(e,t);throw _y("Field path arguments must be of type string or ",e,!1,void 0,n)}var by=new RegExp("[~\\*/\\[\\]]");function wy(e,t,n){if(t.search(by)>=0)throw _y("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return E(Yg,ce(t.split(".")))._internalPath}catch(un){throw _y("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function _y(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Ao(No.INVALID_ARGUMENT,s+e+u)}function xy(e,t){return e.some((function(e){return e.isEqual(t)}))}var Iy=function(){function e(t,n,r,i,a){v(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return g(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Ng(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Sy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Ey("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Sy=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"data",value:function(){return Ht(_(n.prototype),"data",this).call(this)}}]),n}(Iy);function Ey(e,t){return"string"==typeof t?wy(e,t):t instanceof Yg?t._internalPath:t._delegate._internalPath}function Ty(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ao(No.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Cy=g((function e(){v(this,e)})),Ny=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n)}(Cy);function Ay(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Cy&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Py})).length,n=e.filter((function(e){return e instanceof Ry})).length;if(t>1||t>0&&n>0)throw new Ao(No.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=y(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(u){s.e(u)}finally{s.f()}return e}var Ry=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return g(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Gy(e._query,t),new Cg(e.firestore,e.converter,Dc(e._query,t))}},{key:"_parse",value:function(e){var t=iy(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Ao(No.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){qy(o,a);var u,c=[],l=y(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(By(r,e,f))}}catch(h){l.e(h)}finally{l.f()}s={arrayValue:{values:c}}}else s=By(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||qy(o,a),s=py(n,t,o,"in"===a||"not-in"===a);return Zu.create(i,a,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Ny);var Py=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return g(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:ec.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=y(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Gy(r,a),r=Dc(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new Cg(e.firestore,e.converter,Dc(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Cy);var Dy=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return g(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Ao(No.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ao(No.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $u(t,n)}(e._query,this._field,this._direction);return new Cg(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Sc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ny);var Oy=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return g(n,[{key:"_apply",value:function(e){return new Cg(e.firestore,e.converter,Oc(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Ny);var Ly=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return g(n,[{key:"_apply",value:function(e){var t=zy(e,this.type,this._docOrFields,this._inclusive);return new Cg(e.firestore,e.converter,function(e,t){return new Sc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Ny);function My(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ly._create("startAt",t,!0)}function jy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ly._create("startAfter",t,!1)}var Fy=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return g(n,[{key:"_apply",value:function(e){var t=zy(e,this.type,this._docOrFields,this._inclusive);return new Cg(e.firestore,e.converter,function(e,t){return new Sc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Ny);function Uy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Fy._create("endBefore",t,!1)}function Vy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Fy._create("endAt",t,!0)}function zy(e,t,n,r){if(n[0]=oe(n[0]),n[0]instanceof Iy)return function(e,t,n,r,i){if(!r)throw new Ao(No.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=y(Ac(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(Pu(t,r.key));else{var c=r.data.field(u.field);if(yu(c))throw new Ao(No.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Ao(No.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new Hu(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=iy(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Ao(No.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new Ao(No.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Nc(e)&&-1!==c.indexOf("/"))throw new Ao(No.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Qo.fromString(c));if(!Xo.isDocumentKey(l))throw new Ao(No.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Xo(l);s.push(Pu(t,f))}else{var h=py(n,r,c);s.push(h)}}return new Hu(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function By(e,t,n){if("string"==typeof(n=oe(n))){if(""===n)throw new Ao(No.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nc(t)&&-1!==n.indexOf("/"))throw new Ao(No.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Qo.fromString(n));if(!Xo.isDocumentKey(r))throw new Ao(No.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Pu(e,new Xo(r))}if(n instanceof Ng)return Pu(e,n._key);throw new Ao(No.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(_g(n),"."))}function qy(e,t){if(!Array.isArray(e)||0===e.length)throw new Ao(No.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Gy(e,t){var n=function(e,t){var n,r=y(e);try{for(r.s();!(n=r.n()).done;){var i,a=y(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ao(No.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ao(No.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}var Ky=function(){function e(){v(this,e)}return g(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Su(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Eo()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return ru(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new Xg(mu(e.latitude),mu(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=ku(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(bu(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=vu(e);return new Ko(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Qo.fromString(e);To(Uf(n));var r=new _u(n.get(1),n.get(3)),i=new Xo(n.popFirst(5));return r.isEqual(t)||xo("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Wy(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Hy=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this)).firestore=e,r}return g(n,[{key:"convertBytes",value:function(e){return new Qg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ng(this.firestore,null,t)}}]),n}(Ky);var Qy=function(){function e(t,n){v(this,e),this.hasPendingWrites=t,this.fromCache=n}return g(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Yy=function(e){w(n,e);var t=S(n);function n(e,r,i,a,o,s){var u;return v(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return g(n,[{key:"exists",value:function(){return Ht(_(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new $y(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Ey("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Iy),$y=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ht(_(n.prototype),"data",this).call(this,e)}}]),n}(Yy),Xy=function(){function e(t,n,r,i){v(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Qy(i.hasPendingWrites,i.fromCache),this.query=r}return g(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new $y(n._firestore,n._userDataWriter,r.key,r,new Qy(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ao(No.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new $y(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Qy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new $y(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Qy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Jy(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function Jy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Eo()}}function Zy(e,t){return e instanceof Yy&&t instanceof Yy?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Xy&&t instanceof Xy&&e._firestore===t._firestore&&Og(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var ek=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this)).firestore=e,r}return g(n,[{key:"convertBytes",value:function(e){return new Qg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ng(this.firestore,null,t)}}]),n}(Ky);function tk(e){e=xg(e,Ng);var t=xg(e.firestore,Fg),n=Ug(t),r=new ek(t);return function(e,t){var n=new Ro;return e.asyncQueue.enqueueAndForget(fe(se().mark((function r(){return se().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=fe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Co(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Ao(No.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=pv(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,ug(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Yy(t,r,e._key,n,new Qy(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function nk(e){e=xg(e,Cg);var t=xg(e.firestore,Fg),n=Ug(t),r=new ek(t);return Ty(e._query),vg(n,e._query).then((function(n){return new Xy(t,r,e,n)}))}function rk(e){e=xg(e,Cg);var t=xg(e.firestore,Fg),n=Ug(t),r=new ek(t);return function(e,t){var n=new Ro;return e.asyncQueue.enqueueAndForget(fe(se().mark((function r(){return se().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=fe(se().mark((function e(t,n,r){var i,a,o,s,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gd(t,n,!0);case 3:i=e.sent,a=new Mv(n,i.hs),o=a.Ta(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=pv(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,ug(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Xy(t,r,e,n)}))}function ik(e){e=xg(e,Cg);var t=xg(e.firestore,Fg),n=Ug(t),r=new ek(t);return vg(n,e._query,{source:"server"}).then((function(n){return new Xy(t,r,e,n)}))}function ak(e,t,n){e=xg(e,Ng);var r=xg(e.firestore,Fg),i=Wy(e.converter,t,n);return ck(r,[ay(iy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,kl.none())])}function ok(e,t,n){e=xg(e,Ng);for(var r=xg(e.firestore,Fg),i=iy(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return ck(r,[("string"==typeof(t=oe(t))||t instanceof Yg?dy(i,"updateDoc",e._key,t,n,o):hy(i,"updateDoc",e._key,t)).toMutation(e._key,kl.exists(!0))])}function sk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=oe(e);var s={includeMetadataChanges:!1,source:"default"},u=0;"object"!=typeof n[u]||Mg(n[u])||(s=n[u],u++);var c,l,f,h={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Mg(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Ng)l=xg(e.firestore,Fg),f=Tc(e._key.path),c={next:function(t){n[u]&&n[u](lk(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=xg(e,Cg);l=xg(p.firestore,Fg),f=p._query;var v=new ek(l);c={next:function(e){n[u]&&n[u](new Xy(l,v,p,e))},error:n[u+1],complete:n[u+2]},Ty(e._query)}return function(e,t,n,r){var i=new Hm(r),a=new Nv(t,i,n);return e.asyncQueue.enqueueAndForget(fe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=_v,t.next=3,hg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Qa(),e.asyncQueue.enqueueAndForget(fe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Iv,t.next=3,hg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Ug(l),f,h,c)}function uk(e,t){return function(e,t){var n=new Hm(t);return e.asyncQueue.enqueueAndForget(fe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Co(e).W_.add(t),t.next()},t.next=3,hg(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Qa(),e.asyncQueue.enqueueAndForget(fe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Co(e).W_.delete(t)},t.next=3,hg(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Ug(e=xg(e,Fg)),Mg(t)?t:{next:t})}function ck(e,t){return function(e,t){var n=new Ro;return e.asyncQueue.enqueueAndForget(fe(se().mark((function r(){return se().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Jv,r.next=3,lg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Ug(e),t)}function lk(e,t,n){var r=n.docs.get(t._key),i=new ek(e);return new Yy(e,i,t._key,r,new Qy(n.hasPendingWrites,n.fromCache),t.converter)}var fk={maxAttempts:5},hk=function(){function e(t,n){v(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=iy(t)}return g(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=dk(e,this._firestore),i=Wy(r.converter,t,n),a=ay(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,kl.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=dk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=oe(t))||t instanceof Yg?dy(this._dataReader,"WriteBatch.update",i._key,t,n,o):hy(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,kl.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=dk(e,this._firestore);return this._mutations=this._mutations.concat(new Ol(t._key,kl.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Ao(No.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function dk(e,t){if((e=oe(e)).firestore!==t)throw new Ao(No.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var pk=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r))._firestore=e,i}return g(n,[{key:"get",value:function(e){var t=this,r=dk(e,this._firestore),i=new ek(this._firestore);return Ht(_(n.prototype),"get",this).call(this,e).then((function(e){return new Yy(t._firestore,i,r._key,e._document,new Qy(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){v(this,e),this._firestore=t,this._transaction=n,this._dataReader=iy(t)}return g(e,[{key:"get",value:function(e){var t=this,n=dk(e,this._firestore),r=new Hy(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Eo();var i=e[0];if(i.isFoundDocument())return new Iy(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Iy(t._firestore,r,n._key,null,n.converter);throw Eo()}))}},{key:"set",value:function(e,t,n){var r=dk(e,this._firestore),i=Wy(r.converter,t,n),a=ay(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=dk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=oe(t))||t instanceof Yg?dy(this._dataReader,"Transaction.update",i._key,t,n,o):hy(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=dk(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function vk(e,t,n){e=xg(e,Fg);var r=Object.assign(Object.assign({},fk),n);return function(e){if(e.maxAttempts<1)throw new Ao(No.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Ro;return e.asyncQueue.enqueueAndForget(fe(se().mark((function i(){var a;return se().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,fg(e);case 2:a=i.sent,new $m(e.asyncQueue,a,n,t,r).Ya();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Ug(e),(function(n){return t(new pk(e,n))}),r)}function mk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new cy("arrayUnion",t)}function gk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ly("arrayRemove",t)}new WeakMap;!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ko=e}(dt),rt(new he("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new Fg(new Lo(e.getProvider("auth-internal")),new Uo(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ao(No.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),bt(go,"4.5.1",e),bt(go,"4.5.1","esm2017")}();function yk(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ao("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function kk(){if("undefined"===typeof Uint8Array)throw new Ao("unimplemented","Uint8Arrays are not available in this environment.")}function bk(){if("undefined"==typeof atob)throw new Ao("unimplemented","Blobs are unavailable in Firestore in this environment.")}var wk=function(){function e(t){v(this,e),this._delegate=t}return g(e,[{key:"toBase64",value:function(){return bk(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return kk(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return bk(),new e(Qg.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return kk(),new e(Qg.fromUint8Array(t))}}]),e}();function _k(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=y(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var xk=function(){function e(){v(this,e)}return g(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Hg(e=xg(e,Fg));var n=Ug(e);if(n._uninitializedComponentsProvider)throw new Ao(No.FAILED_PRECONDITION,"SDK cache is already specified.");Io("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new Km;return zg(n,i,new qm(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Hg(e=xg(e,Fg));var t=Ug(e);if(t._uninitializedComponentsProvider)throw new Ao(No.FAILED_PRECONDITION,"SDK cache is already specified.");Io("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new Km;return zg(t,r,new Gm(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Ao(No.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Ro;return e._queue.enqueueAndForgetEvenWhileRestricted(fe(se().mark((function n(){return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ds.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,ds.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Cd(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Ik=function(){function e(t,n,r){var i=this;v(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof _u||(this._appCompat=t)}return g(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Io("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Tg(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return qg(this._delegate)}},{key:"disableNetwork",value:function(){return Gg(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&kg("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return Bg(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return uk(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Ao("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Fk(this,Rg(this._delegate,e))}catch(t){throw Ak(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Nk(this,Pg(this._delegate,e))}catch(t){throw Ak(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Lk(this,function(e,t){if(e=xg(e,Eg),yg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ao(No.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Cg(e,null,function(e){return new Sc(Qo.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Ak(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return vk(this._delegate,(function(n){return e(new Ek(t,n))}))}},{key:"batch",value:function(){var e=this;return Ug(this._delegate),new Tk(new hk(this._delegate,(function(t){return ck(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Kg(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Wg(this._delegate,e).then((function(e){return e?new Lk(t,e):null}))}}]),e}(),Sk=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this)).firestore=e,r}return g(n,[{key:"convertBytes",value:function(e){return new wk(new Qg(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Nk.forKey(t,this.firestore,null)}}]),n}(Ky);var Ek=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Sk(t)}return g(e,[{key:"get",value:function(e){var t=this,n=Uk(e);return this._delegate.get(n).then((function(e){return new Dk(t._firestore,new Yy(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Uk(e);return n?(yk("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=Uk(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Uk(e);return this._delegate.delete(t),this}}]),e}(),Tk=function(){function e(t){v(this,e),this._delegate=t}return g(e,[{key:"set",value:function(e,t,n){var r=Uk(e);return n?(yk("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=Uk(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Uk(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Ck=function(){function e(t,n,r){v(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return g(e,[{key:"fromFirestore",value:function(e,t){var n=new $y(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ok(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Sk(t),n),i.set(n,a)),a}}]),e}();Ck.INSTANCES=new WeakMap;var Nk=function(){function e(t,n){v(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Sk(t)}return g(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Fk(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Fk(this.firestore,Rg(this._delegate,e))}catch(t){throw Ak(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=oe(e))instanceof Ng&&Dg(this._delegate,e)}},{key:"set",value:function(e,t){t=yk("DocumentReference.set",t);try{return t?ak(this._delegate,e,t):ak(this._delegate,e)}catch(n){throw Ak(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?ok(this._delegate,e):ok.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw Ak(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return ck(xg((e=this._delegate).firestore,Fg),[new Ol(e._key,kl.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Rk(n),a=Pk(n,(function(t){return new Dk(e.firestore,new Yy(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return sk(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?tk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=xg(e,Ng);var t=xg(e.firestore,Fg);return pg(Ug(t),e._key,{source:"server"}).then((function(n){return lk(t,e,n)}))}(this._delegate):function(e){e=xg(e,Ng);var t=xg(e.firestore,Fg);return pg(Ug(t),e._key).then((function(n){return lk(t,e,n)}))}(this._delegate)).then((function(e){return new Dk(t.firestore,new Yy(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Ck.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Ao("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Ng(n._delegate,r,new Xo(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Ng(n._delegate,r,t))}}]),e}();function Ak(e,t,n){return e.message=e.message.replace(t,n),e}function Rk(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!_k(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Pk(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=_k(e[0])?e[0]:_k(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Dk=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n}return g(e,[{key:"ref",get:function(){return new Nk(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Zy(this._delegate,e._delegate)}}]),e}(),Ok=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Eo(),t}}]),n}(Dk),Lk=function(){function e(t,n){v(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Sk(t)}return g(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Ay(this._delegate,function(e,t,n){var r=t,i=Ey("where",e);return Ry._create(i,r,n)}(t,n,r)))}catch(i){throw Ak(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Ay(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Ey("orderBy",e);return Dy._create(n,t)}(t,n)))}catch(r){throw Ak(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Ay(this._delegate,(Ig("limit",n=t),Oy._create("limit",n,"F"))))}catch(n){throw Ak(n,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Ay(this._delegate,(Ig("limitToLast",n=t),Oy._create("limitToLast",n,"L"))))}catch(n){throw Ak(n,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,Ay(this._delegate,My.apply(void 0,arguments)))}catch(t){throw Ak(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Ay(this._delegate,jy.apply(void 0,arguments)))}catch(t){throw Ak(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Ay(this._delegate,Uy.apply(void 0,arguments)))}catch(t){throw Ak(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Ay(this._delegate,Vy.apply(void 0,arguments)))}catch(t){throw Ak(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Og(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?rk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?ik(this._delegate):nk(this._delegate)).then((function(e){return new jk(t.firestore,new Xy(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Rk(n),a=Pk(n,(function(t){return new jk(e.firestore,new Xy(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return sk(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Ck.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Mk=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n}return g(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Ok(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),jk=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n}return g(e,[{key:"query",get:function(){return new Lk(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new Ok(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Mk(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Ok(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Zy(this._delegate,e._delegate)}}]),e}(),Fk=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return g(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Nk(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Nk(this.firestore,void 0===e?Pg(this._delegate):Pg(this._delegate,e))}catch(t){throw Ak(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=xg(e.firestore,Fg),r=Pg(e),i=Wy(e.converter,t);return ck(n,[ay(iy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,kl.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Nk(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Dg(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Ck.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Lk);function Uk(e){return xg(e,Ng)}var Vk,zk=function(){function e(){v(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=E(Yg,n)}return g(e,[{key:"isEqual",value:function(e){return(e=oe(e))instanceof Yg&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e($o.keyField().canonicalString())}}]),e}(),Bk=function(){function e(t){v(this,e),this._delegate=t}return g(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new uy("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new oy("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=mk.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=gk.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new fy("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),qk={Firestore:Ik,GeoPoint:Xg,Timestamp:Ko,Blob:wk,Transaction:Ek,WriteBatch:Tk,DocumentReference:Nk,DocumentSnapshot:Dk,Query:Lk,QueryDocumentSnapshot:Ok,QuerySnapshot:jk,CollectionReference:Fk,FieldPath:zk,FieldValue:Bk,setLogLevel:function(e){var t;t=e,bo.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new he("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},qk)))})(Vk=Wt,(function(e,t){return new Ik(e,t,new xk)})),Vk.registerVersion("@firebase/firestore-compat","0.3.28");function Gk(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var Kk,Wk={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Hk="EMAIL_SIGNIN",Qk="PASSWORD_RESET",Yk="RECOVER_EMAIL",$k="REVERT_SECOND_FACTOR_ADDITION",Xk="VERIFY_AND_CHANGE_EMAIL",Jk="VERIFY_EMAIL";function Zk(){return p({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var eb=function(){var e;return p(e={},"admin-restricted-operation","This operation is restricted to administrators only."),p(e,"argument-error",""),p(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),p(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),p(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),p(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),p(e,"cordova-not-ready","Cordova framework is not ready."),p(e,"cors-unsupported","This browser is not supported."),p(e,"credential-already-in-use","This credential is already associated with a different user account."),p(e,"custom-token-mismatch","The custom token corresponds to a different audience."),p(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),p(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),p(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),p(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),p(e,"email-already-in-use","The email address is already in use by another account."),p(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),p(e,"expired-action-code","The action code has expired."),p(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),p(e,"internal-error","An internal AuthError has occurred."),p(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),p(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),p(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),p(e,"invalid-auth-event","An internal AuthError has occurred."),p(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),p(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),p(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),p(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),p(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),p(e,"invalid-email","The email address is badly formatted."),p(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),p(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),p(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),p(e,"invalid-credential","The supplied auth credential is incorrect, malformed or has expired."),p(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),p(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),p(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),p(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),p(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),p(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),p(e,"wrong-password","The password is invalid or the user does not have a password."),p(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),p(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),p(e,"invalid-provider-id","The specified provider ID is invalid."),p(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),p(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),p(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),p(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),p(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),p(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),p(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),p(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),p(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),p(e,"missing-continue-uri","A continue URL must be provided in the request."),p(e,"missing-iframe-start","An internal AuthError has occurred."),p(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),p(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),p(e,"missing-password","A non-empty password must be provided"),p(e,"missing-multi-factor-info","No second factor identifier is provided."),p(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),p(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),p(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),p(e,"app-deleted","This instance of FirebaseApp has been deleted."),p(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),p(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),p(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),p(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),p(e,"no-auth-event","An internal AuthError has occurred."),p(e,"no-such-provider","User was not linked to an account with the given provider."),p(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),p(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),p(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),p(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),p(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),p(e,"provider-already-linked","User can only be linked to one identity for the given provider."),p(e,"quota-exceeded","The project's quota for this operation has been exceeded."),p(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),p(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),p(e,"rejected-credential","The request contains malformed or mismatching credentials."),p(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),p(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),p(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),p(e,"timeout","The operation has timed out."),p(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),p(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),p(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),p(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),p(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),p(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),p(e,"unverified-email","The operation requires a verified email."),p(e,"user-cancelled","The user did not grant your application the permissions it requested."),p(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),p(e,"user-disabled","The user account has been disabled by an administrator."),p(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),p(e,"user-signed-out",""),p(e,"weak-password","The password must be 6 characters long or more."),p(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),p(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),p(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),p(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),p(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),p(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),p(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),p(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),p(e,"invalid-req-type","Invalid request parameters."),p(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),p(e,"unsupported-password-policy-schema-version","The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK."),p(e,"password-does-not-meet-requirements","The password does not meet the requirements."),e},tb=Zk,nb=new Q("auth","Firebase",Zk()),rb=new Ie("@firebase/auth");function ib(e){if(rb.logLevel<=ge.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];rb.warn.apply(rb,["Auth (".concat(dt,"): ").concat(e)].concat(n))}}function ab(e){if(rb.logLevel<=ge.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];rb.error.apply(rb,["Auth (".concat(dt,"): ").concat(e)].concat(n))}}function ob(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw fb.apply(void 0,[e].concat(n))}function sb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fb.apply(void 0,[e].concat(n))}function ub(e,t,n){var r=Object.assign(Object.assign({},tb()),p({},t,n));return new Q("auth","Firebase",r).create(t,{appName:e.name})}function cb(e){return ub(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lb(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&ob(e,"argument-error"),ub(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function fb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=ce(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(ce(o)))}return nb.create.apply(nb,[e].concat(n))}function hb(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw fb.apply(void 0,[t].concat(r))}}function db(e){var t="INTERNAL ASSERTION FAILED: "+e;throw ab(t),new Error(t)}function pb(e,t){e||db(t)}function vb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function mb(){return"http:"===gb()||"https:"===gb()}function gb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var yb=function(){function e(t,n){v(this,e),this.shortDelay=t,this.longDelay=n,pb(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(U())||q()}return g(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(mb()||B()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function kb(e,t){pb(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var bb=function(){function e(){v(this,e)}return g(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void db("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}))},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void db("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void db("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),wb=(p(Kk={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),p(Kk,"MISSING_CUSTOM_TOKEN","internal-error"),p(Kk,"INVALID_IDENTIFIER","invalid-email"),p(Kk,"MISSING_CONTINUE_URI","internal-error"),p(Kk,"INVALID_PASSWORD","wrong-password"),p(Kk,"MISSING_PASSWORD","missing-password"),p(Kk,"INVALID_LOGIN_CREDENTIALS","invalid-credential"),p(Kk,"EMAIL_EXISTS","email-already-in-use"),p(Kk,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),p(Kk,"INVALID_IDP_RESPONSE","invalid-credential"),p(Kk,"INVALID_PENDING_TOKEN","invalid-credential"),p(Kk,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),p(Kk,"MISSING_REQ_TYPE","internal-error"),p(Kk,"EMAIL_NOT_FOUND","user-not-found"),p(Kk,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),p(Kk,"EXPIRED_OOB_CODE","expired-action-code"),p(Kk,"INVALID_OOB_CODE","invalid-action-code"),p(Kk,"MISSING_OOB_CODE","internal-error"),p(Kk,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),p(Kk,"INVALID_ID_TOKEN","invalid-user-token"),p(Kk,"TOKEN_EXPIRED","user-token-expired"),p(Kk,"USER_NOT_FOUND","user-token-expired"),p(Kk,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),p(Kk,"PASSWORD_DOES_NOT_MEET_REQUIREMENTS","password-does-not-meet-requirements"),p(Kk,"INVALID_CODE","invalid-verification-code"),p(Kk,"INVALID_SESSION_INFO","invalid-verification-id"),p(Kk,"INVALID_TEMPORARY_PROOF","invalid-credential"),p(Kk,"MISSING_SESSION_INFO","missing-verification-id"),p(Kk,"SESSION_EXPIRED","code-expired"),p(Kk,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),p(Kk,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),p(Kk,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),p(Kk,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),p(Kk,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),p(Kk,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),p(Kk,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),p(Kk,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),p(Kk,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),p(Kk,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),p(Kk,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),p(Kk,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),p(Kk,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),p(Kk,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),p(Kk,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),p(Kk,"MISSING_CLIENT_TYPE","missing-client-type"),p(Kk,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),p(Kk,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),p(Kk,"INVALID_REQ_TYPE","invalid-req-type"),Kk),_b=new yb(3e4,6e4);function xb(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Ib(e,t,n,r){return Sb.apply(this,arguments)}function Sb(){return Sb=fe(se().mark((function e(t,n,r,i){var a,o=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Eb(t,a,fe(se().mark((function e(){var a,o,s,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=ee(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",bb.fetch()(Ab(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Sb.apply(this,arguments)}function Eb(e,t,n){return Tb.apply(this,arguments)}function Tb(){return Tb=fe(se().mark((function e(t,n,r){var i,a,o,s,u,l,f,h,d,p;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},wb),n),e.prev=2,a=new Pb(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw Db(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,l=u.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Db(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Db(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Db(t,"user-disabled",s);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw ub(t,p,d);case 34:ob(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof H)){e.next=41;break}throw e.t0;case 41:ob(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Tb.apply(this,arguments)}function Cb(e,t,n,r){return Nb.apply(this,arguments)}function Nb(){return Nb=fe(se().mark((function e(t,n,r,i){var a,o,s=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Ib(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&ob(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Nb.apply(this,arguments)}function Ab(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?kb(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Rb(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Pb=function(){function e(t){var n=this;v(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(sb(n.auth,"network-request-failed"))}),_b.get())}))}return g(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Db(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=sb(e,t,r);return i.customData._tokenResponse=n,i}function Ob(e){return void 0!==e&&void 0!==e.getResponse}function Lb(e){return void 0!==e&&void 0!==e.enterprise}var Mb=function(){function e(t){if(v(this,e),this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}return g(e,[{key:"getProviderEnforcementState",value:function(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;var t,n=y(this.recaptchaEnforcementState);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.provider&&r.provider===e)return Rb(r.enforcementState)}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"isProviderEnabled",value:function(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}]),e}();function jb(e){return Fb.apply(this,arguments)}function Fb(){return Fb=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ib(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Fb.apply(this,arguments)}function Ub(e,t){return Vb.apply(this,arguments)}function Vb(){return Vb=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ib(t,"GET","/v2/recaptchaConfig",xb(t,n)));case 1:case"end":return e.stop()}}),e)}))),Vb.apply(this,arguments)}function zb(e,t){return Bb.apply(this,arguments)}function Bb(){return Bb=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ib(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Bb.apply(this,arguments)}function qb(e,t){return Gb.apply(this,arguments)}function Gb(){return Gb=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ib(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Gb.apply(this,arguments)}function Kb(e,t){return Wb.apply(this,arguments)}function Wb(){return Wb=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ib(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Wb.apply(this,arguments)}function Hb(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Qb(){return Qb=fe(se().mark((function e(t){var n,r,i,a,o,s,u=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=oe(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,hb((a=$b(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Hb(Yb(a.auth_time)),issuedAtTime:Hb(Yb(a.iat)),expirationTime:Hb(Yb(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Qb.apply(this,arguments)}function Yb(e){return 1e3*Number(e)}function $b(e){var t=c(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return ab("JWT malformed, contained fewer than 3 sections"),null;try{var a=P(r);return a?JSON.parse(a):(ab("Failed to decode base64 JWT payload"),null)}catch(o){return ab("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Xb(e){var t=$b(e);return hb(t,"internal-error"),hb("undefined"!==typeof t.exp,"internal-error"),hb("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}function Jb(e,t){return Zb.apply(this,arguments)}function Zb(){return Zb=fe(se().mark((function e(t,n){var r=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof H&&ew(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Zb.apply(this,arguments)}function ew(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var tw=function(){function e(t){v(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return g(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(fe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),nw=function(){function e(t,n){v(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return g(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Hb(this.lastLoginAt),this.creationTime=Hb(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function rw(e){return iw.apply(this,arguments)}function iw(){return iw=fe(se().mark((function e(t){var n,r,i,a,o,s,u,c,l,f,h;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Jb(t,Kb(r,{idToken:i}));case 6:hb(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?sw(o.providerUserInfo):[],u=ow(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new nw(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),iw.apply(this,arguments)}function aw(){return(aw=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oe(t),e.next=3,rw(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ow(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(ce(n),ce(t))}function sw(e){return e.map((function(e){var t=e.providerId,n=Gk(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function uw(e,t){return cw.apply(this,arguments)}function cw(){return cw=fe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eb(t,{},fe(se().mark((function e(){var r,i,a,o,s,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Ab(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",bb.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),cw.apply(this,arguments)}function lw(e,t){return fw.apply(this,arguments)}function fw(){return fw=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ib(t,"POST","/v2/accounts:revokeToken",xb(t,n)));case 1:case"end":return e.stop()}}),e)}))),fw.apply(this,arguments)}var hw=function(){function e(){v(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return g(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){hb(e.idToken,"internal-error"),hb("undefined"!==typeof e.idToken,"internal-error"),hb("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Xb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"updateFromIdToken",value:function(e){hb(0!==e.length,"internal-error");var t=Xb(e);this.updateTokensAndExpiration(e,null,t)}},{key:"getToken",value:function(){var e=fe(se().mark((function e(t){var n=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.length>1&&void 0!==n[1]&&n[1]||!this.accessToken||this.isExpired){e.next=3;break}return e.abrupt("return",this.accessToken);case 3:if(hb(this.refreshToken,t,"user-token-expired"),!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=fe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uw(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return db("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(hb("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(hb("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(hb("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function dw(e,t){hb("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var pw=function(){function e(t){v(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Gk(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?ce(a.providerData):[],this.metadata=new nw(a.createdAt||void 0,a.lastLoginAt||void 0)}return g(e,[{key:"getIdToken",value:function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jb(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(hb(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Qb.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return aw.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(hb(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){hb(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=fe(se().mark((function e(t){var n,r,i=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,rw(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=fe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!st(this.auth.app)){e.next=2;break}return e.abrupt("return",Promise.reject(cb(this.auth)));case 2:return e.next=4,this.getIdToken();case 4:return t=e.sent,e.next=7,Jb(this,zb(this.auth,{idToken:t}));case 7:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,g=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;hb(k&&x,t,"internal-error");var I=hw.fromJSON(this.name,x);hb("string"===typeof k,t,"internal-error"),dw(f,t.name),dw(h,t.name),hb("boolean"===typeof b,t,"internal-error"),hb("boolean"===typeof w,t,"internal-error"),dw(d,t.name),dw(p,t.name),dw(v,t.name),dw(m,t.name),dw(g,t.name),dw(y,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(S.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=fe(se().mark((function t(n,r){var i,a,o,s=arguments;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new hw).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,rw(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_fromGetAccountInfoResponse",value:function(){var t=fe(se().mark((function t(n,r,i){var a,o,s,u,c,l;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return hb(void 0!==(a=r.users[0]).localId,"internal-error"),o=void 0!==a.providerUserInfo?sw(a.providerUserInfo):[],s=!(a.email&&a.passwordHash)&&!(null===o||void 0===o?void 0:o.length),(u=new hw).updateFromIdToken(i),c=new e({uid:a.localId,auth:n,stsTokenManager:u,isAnonymous:s}),l={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new nw(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(null===o||void 0===o?void 0:o.length)},Object.assign(c,l),t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}(),vw=new Map;function mw(e){pb(e instanceof Function,"Expected a class definition");var t=vw.get(e);return t?(pb(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,vw.set(e,t),t)}var gw=function(){function e(){v(this,e),this.type="NONE",this.storage={}}return g(e,[{key:"_isAvailable",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();gw.type="NONE";var yw=gw;function kw(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var bw=function(){function e(t,n,r){v(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=kw(this.userKey,a.apiKey,o),this.fullPersistenceKey=kw("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return g(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=fe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?pw._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=fe(se().mark((function t(n,r){var i,a,o,s,u,c,l,f,h,d,p,v=arguments;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(mw(yw),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||mw(yw),s=kw(i,n.config.apiKey,n.name),u=null,c=y(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(s);case 17:if(!(h=t.sent)){t.next=23;break}return d=pw._fromJSON(n,h),f!==o&&(u=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function ww(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Sw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(_w(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Tw(t))return"Blackberry";if(Cw(t))return"Webos";if(xw(t))return"Safari";if((t.includes("chrome/")||Iw(t))&&!t.includes("edge/"))return"Chrome";if(Ew(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function _w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/firefox\//i.test(e)}function xw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:U()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Iw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/crios\//i.test(e)}function Sw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/iemobile/i.test(e)}function Ew(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/android/i.test(e)}function Tw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/blackberry/i.test(e)}function Cw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/webos/i.test(e)}function Nw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Aw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return Nw(e)||Ew(e)||Cw(e)||Tw(e)||/windows phone/i.test(e)||Sw(e)}function Rw(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ww(U());break;case"Worker":t="".concat(ww(U()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(dt,"/").concat(r)}var Pw=function(){function e(t){v(this,e),this.auth=t,this.queue=[]}return g(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=fe(se().mark((function e(t){var n,r,i,a,o,s,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=y(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=y(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Dw(e){return Ow.apply(this,arguments)}function Ow(){return Ow=fe(se().mark((function e(t){var n,r=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Ib(t,"GET","/v2/passwordPolicy",xb(t,n)));case 2:case"end":return e.stop()}}),e)}))),Ow.apply(this,arguments)}var Lw=function(){function e(t){var n,r,i,a;v(this,e);var o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=o.minPasswordLength)&&void 0!==n?n:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=t.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(a=t.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=t.schemaVersion}return g(e,[{key:"validatePassword",value:function(e){var t,n,r,i,a,o,s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(a=s.containsNumericCharacter)||void 0===a||a),s.isValid&&(s.isValid=null===(o=s.containsNonAlphanumericCharacter)||void 0===o||o),s}},{key:"validatePasswordLengthOptions",value:function(e,t){var n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}},{key:"validatePasswordCharacterOptions",value:function(e,t){var n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(var r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}},{key:"updatePasswordCharacterOptionsStatuses",value:function(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}]),e}(),Mw=function(){function e(t,n,r,i){v(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fw(this),this.idTokenSubscription=new Fw(this),this.beforeStateQueue=new Pw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return g(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=mw(t)),this._initializationPromise=this.queue(fe(se().mark((function r(){var i,a;return se().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,bw.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=fe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUserFromIdToken",value:function(){var e=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Kb(this,{idToken:t});case 3:return n=e.sent,e.next=6,pw._fromGetAccountInfoResponse(this,n,t);case 6:return r=e.sent,e.next=9,this.directlySetCurrentUser(r);case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(0),console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e.t0),e.next=16,this.directlySetCurrentUser(null);case 16:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=fe(se().mark((function e(t){var n,r,i,a,o,s,u,c,l=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!st(this.app)){e.next=7;break}if(!(r=this.app.settings.authIdToken)){e.next=6;break}return e.abrupt("return",new Promise((function(e){setTimeout((function(){return l.initializeCurrentUserFromIdToken(r).then(e,e)}))})));case 6:return e.abrupt("return",this.directlySetCurrentUser(null));case 7:return e.next=9,this.assertedPersistence.getCurrentUser();case 9:if(i=e.sent,a=i,o=!1,!t||!this.config.authDomain){e.next=21;break}return e.next=15,this.getOrInitRedirectPersistenceManager();case 15:return s=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===a||void 0===a?void 0:a._redirectEventId,e.next=19,this.tryRedirectSignIn(t);case 19:c=e.sent,s&&s!==u||!(null===c||void 0===c?void 0:c.user)||(a=c.user,o=!0);case 21:if(a){e.next=23;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 23:if(a._redirectEventId){e.next=39;break}if(!o){e.next=34;break}return e.prev=25,e.next=28,this.beforeStateQueue.runMiddleware(a);case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(25),a=i,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 34:if(!a){e.next=38;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(a));case 38:return e.abrupt("return",this.directlySetCurrentUser(null));case 39:return hb(this._popupRedirectResolver,this,"argument-error"),e.next=42,this.getOrInitRedirectPersistenceManager();case 42:if(!this.redirectUser||this.redirectUser._redirectEventId!==a._redirectEventId){e.next=44;break}return e.abrupt("return",this.directlySetCurrentUser(a));case 44:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(a));case 45:case"end":return e.stop()}}),e,this,[[25,30]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,rw(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!st(this.app)){e.next=2;break}return e.abrupt("return",Promise.reject(cb(this)));case 2:return(n=t?oe(t):null)&&hb(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=fe(se().mark((function e(t){var n,r=this,i=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&hb(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!st(this.app)){e.next=2;break}return e.abrupt("return",Promise.reject(cb(this)));case 2:return e.next=4,this.beforeStateQueue.runMiddleware(null);case 4:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=7;break}return e.next=7,this._setRedirectUser(null);case 7:return e.abrupt("return",this._updateCurrentUser(null,!0));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return st(this.app)?Promise.reject(cb(this)):this.queue(fe(se().mark((function n(){return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(mw(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"validatePassword",value:function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._getPasswordPolicyInternal()){e.next=3;break}return e.next=3,this._updatePasswordPolicy();case 3:if((n=this._getPasswordPolicyInternal()).schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION){e.next=6;break}return e.abrupt("return",Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})));case 6:return e.abrupt("return",n.validatePassword(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPasswordPolicyInternal",value:function(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}},{key:"_updatePasswordPolicy",value:function(){var e=fe(se().mark((function e(){var t,n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dw(this);case 2:t=e.sent,n=new Lw(t),null===this.tenantId?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Q("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"authStateReady",value:function(){var e=this;return new Promise((function(t,n){if(e.currentUser)t();else var r=e.onAuthStateChanged((function(){r(),t()}),n)}))}},{key:"revokeAccessToken",value:function(){var e=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.currentUser){e.next=8;break}return e.next=3,this.currentUser.getIdToken();case 3:return n=e.sent,r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n},null!=this.tenantId&&(r.tenantId=this.tenantId),e.next=8,lw(this,r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=fe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return hb(n=t&&mw(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,bw.create(this,[mw(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=fe(se().mark((function e(t){var n=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=!1,s=this._isInitialized?Promise.resolve():this._initializationPromise;if(hb(s,this,"internal-error"),s.then((function(){o||a(i.currentUser)})),"function"===typeof t){var u=e.addObserver(t,n,r);return function(){o=!0,u()}}var c=e.addObserver(t);return function(){o=!0,c()}}},{key:"directlySetCurrentUser",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return hb(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rw(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=fe(se().mark((function e(){var t,n,r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=fe(se().mark((function e(){var t,n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&ib("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function jw(e){return oe(e)}var Fw=function(){function e(t){var n=this;v(this,e),this.auth=t,this.observer=null,this.addObserver=re((function(e){return n.observer=e}))}return g(e,[{key:"next",get:function(){return hb(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}(),Uw={loadJS:function(){return fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Unable to load external scripts");case 1:case"end":return e.stop()}}),e)})))()},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vw(e){return Uw.loadJS(e)}function zw(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Bw=function(){function e(t){v(this,e),this.type="recaptcha-enterprise",this.auth=jw(t)}return g(e,[{key:"verify",value:function(){var e=fe(se().mark((function e(){var t,n,r,i,a,o=this,s=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;Lb(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=fe(se().mark((function e(n,r){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ub(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new Mb(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=s.length>0&&void 0!==s[0]?s[0]:"verify",n=s.length>1&&void 0!==s[1]&&s[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&Lb(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));var i=Uw.recaptchaEnterpriseScript;0!==i.length&&(i+=r),Vw(i).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function qw(e,t,n){return Gw.apply(this,arguments)}function Gw(){return Gw=fe(se().mark((function e(t,n,r){var i,a,o,s,u=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>3&&void 0!==u[3]&&u[3],a=new Bw(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),Gw.apply(this,arguments)}function Kw(e,t,n,r){return Ww.apply(this,arguments)}function Ww(){return Ww=fe(se().mark((function e(t,n,r,i){var a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(a=t._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))){e.next=7;break}return e.next=3,qw(t,n,r,"getOobCode"===r);case 3:return o=e.sent,e.abrupt("return",i(t,o));case 7:return e.abrupt("return",i(t,n).catch(function(){var e=fe(se().mark((function e(a){var o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("".concat(r," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.")),e.next=4,qw(t,n,r,"getOobCode"===r);case 4:return o=e.sent,e.abrupt("return",i(t,o));case 8:return e.abrupt("return",Promise.reject(a));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:case"end":return e.stop()}}),e)}))),Ww.apply(this,arguments)}function Hw(e,t,n){var r=jw(e);hb(r._canInitEmulator,r,"emulator-config-failed"),hb(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Qw(t),o=function(e){var t=Qw(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Yw(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:Yw(o[1])}}(t),s=o.host,u=o.port,l=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Qw(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Yw(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var $w=function(){function e(t,n){v(this,e),this.providerId=t,this.signInMethod=n}return g(e,[{key:"toJSON",value:function(){return db("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return db("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return db("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return db("not implemented")}}]),e}();function Xw(e,t){return Jw.apply(this,arguments)}function Jw(){return Jw=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ib(t,"POST","/v1/accounts:resetPassword",xb(t,n)));case 1:case"end":return e.stop()}}),e)}))),Jw.apply(this,arguments)}function Zw(e,t){return e_.apply(this,arguments)}function e_(){return e_=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ib(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),e_.apply(this,arguments)}function t_(e,t){return n_.apply(this,arguments)}function n_(){return n_=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ib(t,"POST","/v1/accounts:signUp",n));case 1:case"end":return e.stop()}}),e)}))),n_.apply(this,arguments)}function r_(e,t){return i_.apply(this,arguments)}function i_(){return i_=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ib(t,"POST","/v1/accounts:update",xb(t,n)));case 1:case"end":return e.stop()}}),e)}))),i_.apply(this,arguments)}function a_(e,t){return o_.apply(this,arguments)}function o_(){return o_=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cb(t,"POST","/v1/accounts:signInWithPassword",xb(t,n)));case 1:case"end":return e.stop()}}),e)}))),o_.apply(this,arguments)}function s_(e,t){return u_.apply(this,arguments)}function u_(){return u_=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ib(t,"POST","/v1/accounts:sendOobCode",xb(t,n)));case 1:case"end":return e.stop()}}),e)}))),u_.apply(this,arguments)}function c_(e,t){return l_.apply(this,arguments)}function l_(){return l_=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s_(t,n));case 1:case"end":return e.stop()}}),e)}))),l_.apply(this,arguments)}function f_(e,t){return h_.apply(this,arguments)}function h_(){return h_=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s_(t,n));case 1:case"end":return e.stop()}}),e)}))),h_.apply(this,arguments)}function d_(e,t){return p_.apply(this,arguments)}function p_(){return p_=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s_(t,n));case 1:case"end":return e.stop()}}),e)}))),p_.apply(this,arguments)}function v_(e,t){return m_.apply(this,arguments)}function m_(){return m_=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s_(t,n));case 1:case"end":return e.stop()}}),e)}))),m_.apply(this,arguments)}function g_(e,t){return y_.apply(this,arguments)}function y_(){return y_=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cb(t,"POST","/v1/accounts:signInWithEmailLink",xb(t,n)));case 1:case"end":return e.stop()}}),e)}))),y_.apply(this,arguments)}function k_(e,t){return b_.apply(this,arguments)}function b_(){return b_=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cb(t,"POST","/v1/accounts:signInWithEmailLink",xb(t,n)));case 1:case"end":return e.stop()}}),e)}))),b_.apply(this,arguments)}var w_=function(e){w(n,e);var t=S(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return v(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return g(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?5:6;break;case 3:return n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},e.abrupt("return",Kw(t,n,"signInWithPassword",a_));case 5:return e.abrupt("return",g_(t,{email:this._email,oobCode:this._password}));case 6:ob(t,"internal-error");case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=fe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?5:6;break;case 3:return r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},e.abrupt("return",Kw(t,r,"signUpPassword",t_));case 5:return e.abrupt("return",k_(t,{idToken:n,email:this._email,oobCode:this._password}));case 6:ob(t,"internal-error");case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}($w);function __(e,t){return x_.apply(this,arguments)}function x_(){return x_=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cb(t,"POST","/v1/accounts:signInWithIdp",xb(t,n)));case 1:case"end":return e.stop()}}),e)}))),x_.apply(this,arguments)}var I_=function(e){w(n,e);var t=S(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return g(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return __(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,__(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,__(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ee(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ob("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Gk(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}($w);function S_(e,t){return E_.apply(this,arguments)}function E_(){return E_=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ib(t,"POST","/v1/accounts:sendVerificationCode",xb(t,n)));case 1:case"end":return e.stop()}}),e)}))),E_.apply(this,arguments)}function T_(){return T_=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cb(t,"POST","/v1/accounts:signInWithPhoneNumber",xb(t,n)));case 1:case"end":return e.stop()}}),e)}))),T_.apply(this,arguments)}function C_(){return C_=fe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cb(t,"POST","/v1/accounts:signInWithPhoneNumber",xb(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Db(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),C_.apply(this,arguments)}var N_=p({},"USER_NOT_FOUND","user-not-found");function A_(){return A_=fe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Cb(t,"POST","/v1/accounts:signInWithPhoneNumber",xb(t,r),N_));case 2:case"end":return e.stop()}}),e)}))),A_.apply(this,arguments)}var R_=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this,"phone","phone")).params=e,r}return g(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return T_.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return C_.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return A_.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}($w);var P_=function(){function e(t){var n,r,i,a,o,s;v(this,e);var u=te(ne(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);hb(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return g(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=te(ne(e)).link,n=t?te(ne(t)).deep_link_id:null,r=te(ne(e)).deep_link_id;return(r?te(ne(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var D_=function(){function e(){v(this,e),this.providerId=e.PROVIDER_ID}return g(e,null,[{key:"credential",value:function(e,t){return w_._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=P_.parseLink(t);return hb(n,"argument-error"),w_._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();D_.PROVIDER_ID="password",D_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D_.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var O_=function(){function e(t){v(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return g(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),L_=function(e){w(n,e);var t=S(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).scopes=[],e}return g(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return ce(this.scopes)}}]),n}(O_),M_=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return hb(e.idToken||e.accessToken,"argument-error"),I_._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return hb("providerId"in t&&"signInMethod"in t,"argument-error"),I_._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(L_),j_=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.call(this,"facebook.com")}return g(n,null,[{key:"credential",value:function(e){return I_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(L_);j_.FACEBOOK_SIGN_IN_METHOD="facebook.com",j_.PROVIDER_ID="facebook.com";var F_=function(e){w(n,e);var t=S(n);function n(){var e;return v(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return g(n,null,[{key:"credential",value:function(e,t){return I_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(L_);F_.GOOGLE_SIGN_IN_METHOD="google.com",F_.PROVIDER_ID="google.com";var U_=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.call(this,"github.com")}return g(n,null,[{key:"credential",value:function(e){return I_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(L_);U_.GITHUB_SIGN_IN_METHOD="github.com",U_.PROVIDER_ID="github.com";var V_=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return g(n,[{key:"_getIdTokenResponse",value:function(e){return __(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,__(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,__(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}($w),z_=function(e){w(n,e);var t=S(n);function n(e){return v(this,n),hb(e.startsWith("saml."),"argument-error"),t.call(this,e)}return g(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=V_.fromJSON(e);return hb(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return V_._create(r,n)}catch(i){return null}}}]),n}(O_),B_=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.call(this,"twitter.com")}return g(n,null,[{key:"credential",value:function(e,t){return I_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(L_);function q_(e,t){return G_.apply(this,arguments)}function G_(){return G_=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cb(t,"POST","/v1/accounts:signUp",xb(t,n)));case 1:case"end":return e.stop()}}),e)}))),G_.apply(this,arguments)}B_.TWITTER_SIGN_IN_METHOD="twitter.com",B_.PROVIDER_ID="twitter.com";var K_=function(){function e(t){v(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return g(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=fe(se().mark((function t(n,r,i){var a,o,s,u,c=arguments;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,pw._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=W_(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=fe(se().mark((function t(n,r,i){var a;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=W_(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function W_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function H_(){return H_=fe(se().mark((function e(t){var n,r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!st(t.app)){e.next=2;break}return e.abrupt("return",Promise.reject(cb(t)));case 2:return r=jw(t),e.next=5,r._initializationPromise;case 5:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=7;break}return e.abrupt("return",new K_({user:r.currentUser,providerId:null,operationType:"signIn"}));case 7:return e.next=9,q_(r,{returnSecureToken:!0});case 9:return i=e.sent,e.next=12,K_._fromIdTokenResponse(r,"signIn",i,!0);case 12:return a=e.sent,e.next=15,r._updateCurrentUser(a.user);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),H_.apply(this,arguments)}var Q_=function(e){w(n,e);var t=S(n);function n(e,r,i,a){var o,s;return v(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(k(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return g(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(H);function Y_(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Q_._fromErrorAndOperation(e,n,t,r);throw n}))}function $_(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function X_(e,t){return J_.apply(this,arguments)}function J_(){return J_=fe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oe(t),e.next=3,tx(!0,r,n);case 3:return e.t0=qb,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=$_(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),J_.apply(this,arguments)}function Z_(e,t){return ex.apply(this,arguments)}function ex(){return ex=fe(se().mark((function e(t,n){var r,i,a=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Jb,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",K_._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ex.apply(this,arguments)}function tx(e,t,n){return nx.apply(this,arguments)}function nx(){return(nx=fe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rw(n);case 2:i=$_(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",hb(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rx(e,t){return ix.apply(this,arguments)}function ix(){return ix=fe(se().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]&&c[2],!st((i=t.auth).app)){e.next=4;break}return e.abrupt("return",Promise.reject(cb(i)));case 4:return a="reauthenticate",e.prev=5,e.next=8,Jb(t,Y_(i,a,n,t),r);case 8:return hb((o=e.sent).idToken,i,"internal-error"),hb(s=$b(o.idToken),i,"internal-error"),u=s.sub,hb(t.uid===u,i,"user-mismatch"),e.abrupt("return",K_._forOperation(t,a,o));case 17:throw e.prev=17,e.t0=e.catch(5),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&ob(i,"user-mismatch"),e.t0;case 21:case"end":return e.stop()}}),e,null,[[5,17]])}))),ix.apply(this,arguments)}function ax(e,t){return ox.apply(this,arguments)}function ox(){return ox=fe(se().mark((function e(t,n){var r,i,a,o,s=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]&&s[2],!st(t.app)){e.next=3;break}return e.abrupt("return",Promise.reject(cb(t)));case 3:return i="signIn",e.next=6,Y_(t,i,n);case 6:return a=e.sent,e.next=9,K_._fromIdTokenResponse(t,i,a);case 9:if(o=e.sent,r){e.next=13;break}return e.next=13,t._updateCurrentUser(o.user);case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)}))),ox.apply(this,arguments)}function sx(e,t){return ux.apply(this,arguments)}function ux(){return ux=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ax(jw(t),n));case 1:case"end":return e.stop()}}),e)}))),ux.apply(this,arguments)}function cx(e,t){return lx.apply(this,arguments)}function lx(){return(lx=fe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oe(t),e.next=3,tx(!1,r,n.providerId);case 3:return e.abrupt("return",Z_(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fx(e,t){return hx.apply(this,arguments)}function hx(){return(hx=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rx(oe(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dx(e,t){return px.apply(this,arguments)}function px(){return px=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cb(t,"POST","/v1/accounts:signInWithCustomToken",xb(t,n)));case 1:case"end":return e.stop()}}),e)}))),px.apply(this,arguments)}function vx(){return vx=fe(se().mark((function e(t,n){var r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!st(t.app)){e.next=2;break}return e.abrupt("return",Promise.reject(cb(t)));case 2:return r=jw(t),e.next=5,dx(r,{token:n,returnSecureToken:!0});case 5:return i=e.sent,e.next=8,K_._fromIdTokenResponse(r,"signIn",i);case 8:return a=e.sent,e.next=11,r._updateCurrentUser(a.user);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)}))),vx.apply(this,arguments)}var mx=function(){function e(t,n){v(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return g(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?gx._fromServerResponse(e,t):"totpInfo"in t?yx._fromServerResponse(e,t):ob(e,"internal-error")}}]),e}(),gx=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return g(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(mx),yx=function(e){w(n,e);var t=S(n);function n(e){return v(this,n),t.call(this,"totp",e)}return g(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(mx);function kx(e,t,n){var r;hb((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),hb("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(hb(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(hb(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function bx(e){return wx.apply(this,arguments)}function wx(){return wx=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=jw(t))._getPasswordPolicyInternal()){e.next=4;break}return e.next=4,n._updatePasswordPolicy();case 4:case"end":return e.stop()}}),e)}))),wx.apply(this,arguments)}function _x(){return _x=fe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jw(t),a={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},r&&kx(i,a,r),e.next=5,Kw(i,a,"getOobCode",f_);case 5:case"end":return e.stop()}}),e)}))),_x.apply(this,arguments)}function xx(){return xx=fe(se().mark((function e(t,n,r){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xw(oe(t),{oobCode:n,newPassword:r}).catch(function(){var e=fe(se().mark((function e(n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&bx(t),n;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),xx.apply(this,arguments)}function Ix(){return Ix=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r_(oe(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Ix.apply(this,arguments)}function Sx(e,t){return Ex.apply(this,arguments)}function Ex(){return Ex=fe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oe(t),e.next=3,Xw(r,{oobCode:n});case 3:i=e.sent,hb(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return hb(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:hb(i.mfaInfo,r,"internal-error");case 13:hb(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=mx._fromServerResponse(jw(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Ex.apply(this,arguments)}function Tx(){return Tx=fe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sx(oe(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Tx.apply(this,arguments)}function Cx(e,t,n){return Nx.apply(this,arguments)}function Nx(){return Nx=fe(se().mark((function e(t,n,r){var i,a,o,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!st(t.app)){e.next=2;break}return e.abrupt("return",Promise.reject(cb(t)));case 2:return i=jw(t),a=Kw(i,{returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",q_),e.next=7,a.catch((function(e){throw e.code==="auth/".concat("password-does-not-meet-requirements")&&bx(t),e}));case 7:return o=e.sent,e.next=10,K_._fromIdTokenResponse(i,"signIn",o);case 10:return s=e.sent,e.next=13,i._updateCurrentUser(s.user);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function Ax(){return Ax=fe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e,t){hb(t.handleCodeInApp,i,"argument-error"),t&&kx(i,e,t)},i=jw(t),o(a={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},r),e.next=6,Kw(i,a,"getOobCode",d_);case 6:case"end":return e.stop()}}),e)}))),Ax.apply(this,arguments)}function Rx(){return Rx=fe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!st(t.app)){e.next=2;break}return e.abrupt("return",Promise.reject(cb(t)));case 2:return i=oe(t),hb((a=D_.credentialWithLink(n,r||vb()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",sx(i,a));case 6:case"end":return e.stop()}}),e)}))),Rx.apply(this,arguments)}function Px(e,t){return Dx.apply(this,arguments)}function Dx(){return Dx=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ib(t,"POST","/v1/accounts:createAuthUri",xb(t,n)));case 1:case"end":return e.stop()}}),e)}))),Dx.apply(this,arguments)}function Ox(){return Ox=fe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mb()?vb():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Px(oe(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Ox.apply(this,arguments)}function Lx(){return(Lx=fe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oe(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&kx(r.auth,a,n),e.next=8,c_(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mx(){return(Mx=fe(se().mark((function e(t,n,r){var i,a,o,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=oe(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&kx(i.auth,o,r),e.next=8,v_(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jx(e,t){return Fx.apply(this,arguments)}function Fx(){return Fx=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ib(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Fx.apply(this,arguments)}function Ux(){return(Ux=fe(se().mark((function e(t,n){var r,i,a,o,s,u,c;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=oe(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Jb(a,jx(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vx(e,t,n){return zx.apply(this,arguments)}function zx(){return zx=fe(se().mark((function e(t,n,r){var i,a,o,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Jb(t,Zw(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),zx.apply(this,arguments)}var Bx=g((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};v(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),qx=function(e){w(n,e);var t=S(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this,e,r,i)).username=a,o}return g(n)}(Bx),Gx=function(e){w(n,e);var t=S(n);function n(e,r){return v(this,n),t.call(this,e,"facebook.com",r)}return g(n)}(Bx),Kx=function(e){w(n,e);var t=S(n);function n(e,r){return v(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return g(n)}(qx),Wx=function(e){w(n,e);var t=S(n);function n(e,r){return v(this,n),t.call(this,e,"google.com",r)}return g(n)}(Bx),Hx=function(e){w(n,e);var t=S(n);function n(e,r,i){return v(this,n),t.call(this,e,"twitter.com",r,i)}return g(n)}(qx);function Qx(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=$b(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Bx(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Gx(a,i);case"github.com":return new Kx(a,i);case"google.com":return new Wx(a,i);case"twitter.com":return new Hx(a,i,e.screenName||null);case"custom":case"anonymous":return new Bx(a,null);default:return new Bx(a,r,i)}}(n)}var Yx=function(){function e(t,n,r){v(this,e),this.type=t,this.credential=n,this.user=r}return g(e,[{key:"toJSON",value:function(){return{multiFactorSession:p({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),$x=function(){function e(t,n,r){v(this,e),this.session=t,this.hints=n,this.signInResolver=r}return g(e,[{key:"resolveSignIn",value:function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=jw(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return mx._fromServerResponse(r,e)}));hb(i.mfaPendingCredential,r,"internal-error");var o=Yx._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=fe(se().mark((function e(t){var a,s,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,K_._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return hb(n.user,r,"internal-error"),e.abrupt("return",K_._forOperation(n.user,n.operationType,s));case 17:ob(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Xx(e,t){return Ib(e,"POST","/v2/accounts/mfaEnrollment:start",xb(e,t))}function Jx(e,t){return Ib(e,"POST","/v2/accounts/mfaEnrollment:start",xb(e,t))}function Zx(e,t){return Ib(e,"POST","/v2/accounts/mfaEnrollment:finalize",xb(e,t))}function eI(e,t){return Ib(e,"POST","/v2/accounts/mfaEnrollment:withdraw",xb(e,t))}var tI=function(){function e(t){var n=this;v(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return mx._fromServerResponse(t.auth,e)})))}))}return g(e,[{key:"getSession",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Yx,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=fe(se().mark((function e(t,n){var r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Jb(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=fe(se().mark((function e(t){var n,r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,Jb(this.user,eI(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),nI=new WeakMap;var rI="__sak",iI=function(){function e(t,n){v(this,e),this.storageRetriever=t,this.type=n}return g(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(rI,"1"),this.storage.removeItem(rI),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var aI=function(e){w(n,e);var t=S(n);function n(){var e;return v(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=U();return xw(e)||Nw(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Aw(),e._shouldAllowMigration=!0,e}return g(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);G()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=fe(se().mark((function e(t,r){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht(_(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=fe(se().mark((function e(t){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht(_(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht(_(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(iI);aI.type="LOCAL";var oI=aI,sI=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return g(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(iI);sI.type="SESSION";var uI=sI;function cI(e){return Promise.all(e.map(function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var lI=function(){function e(t){v(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return g(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=fe(se().mark((function e(t){var n,r,i,a,o,s,u,c;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,cI(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function fI(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}lI.receivers=[];var hI=function(){function e(t){v(this,e),this.target=t,this.handlers=new Set}return g(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=fe(se().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=fI("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function dI(){return window}function pI(e){dI().location.href=e}function vI(){return"undefined"!==typeof dI().WorkerGlobalScope&&"function"===typeof dI().importScripts}function mI(){return gI.apply(this,arguments)}function gI(){return(gI=fe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function yI(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var kI="firebaseLocalStorageDb",bI="firebaseLocalStorage",wI="fbase_key",_I=function(){function e(t){v(this,e),this.request=t}return g(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function xI(e,t){return e.transaction([bI],t?"readwrite":"readonly").objectStore(bI)}function II(){var e=indexedDB.deleteDatabase(kI);return new _I(e).toPromise()}function SI(){var e=indexedDB.open(kI,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(bI,{keyPath:wI})}catch(r){n(r)}})),e.addEventListener("success",fe(se().mark((function n(){var r;return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(bI)){n.next=12;break}return r.close(),n.next=5,II();case 5:return n.t0=t,n.next=8,SI();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function EI(e,t,n){return TI.apply(this,arguments)}function TI(){return TI=fe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=xI(t,!0).put((p(i={},wI,n),p(i,"value",r),i)),e.abrupt("return",new _I(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),TI.apply(this,arguments)}function CI(e,t){return NI.apply(this,arguments)}function NI(){return NI=fe(se().mark((function e(t,n){var r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xI(t,!1).get(n),e.next=3,new _I(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),NI.apply(this,arguments)}function AI(e,t){var n=xI(e,!0).delete(t);return new _I(n).toPromise()}var RI=function(){function e(){v(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return g(e,[{key:"_openDb",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,SI();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vI()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=fe(se().mark((function e(){var t=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=lI._getInstance(vI()?self:null),this.receiver._subscribe("keyChanged",function(){var e=fe(se().mark((function e(n,r){var i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=fe(se().mark((function e(){var t,n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mI();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new hI(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&yI()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=fe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,SI();case 5:return t=e.sent,e.next=8,EI(t,rI,"1");case 8:return e.next=10,AI(t,rI);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=fe(se().mark((function e(t,n){var r=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return EI(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return CI(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=fe(se().mark((function e(t){var n=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return AI(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=fe(se().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=xI(e,!1).getAll();return new _I(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:if(n=[],r=new Set,0!==t.length){i=y(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(h){i.e(h)}finally{i.f()}}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(fe(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();RI.type="LOCAL";var PI=RI;function DI(e,t){return Ib(e,"POST","/v2/accounts/mfaSignIn:start",xb(e,t))}function OI(e,t){return Ib(e,"POST","/v2/accounts/mfaSignIn:finalize",xb(e,t))}var LI=1e12,MI=function(){function e(t){v(this,e),this.auth=t,this.counter=LI,this._widgets=new Map}return g(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new jI(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||LI;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||LI;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||LI,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),jI=function(){function e(t,n,r){var i=this;v(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;hb(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return g(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var FI=zw("rcb"),UI=new yb(3e4,6e4),VI=function(){function e(){var t;v(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=dI().grecaptcha)||void 0===t?void 0:t.render)}return g(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return hb(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Ob(dI().grecaptcha)?Promise.resolve(dI().grecaptcha):new Promise((function(r,i){var a=dI().setTimeout((function(){i(sb(e,"network-request-failed"))}),UI.get());dI()[FI]=function(){dI().clearTimeout(a),delete dI()[FI];var o=dI().grecaptcha;if(o&&Ob(o)){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(sb(e,"internal-error"))},Vw("".concat(Uw.recaptchaV2Script,"?").concat(ee({onload:FI,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(sb(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=dI().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var zI=function(){function e(){v(this,e)}return g(e,[{key:"load",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new MI(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),BI="recaptcha",qI={theme:"light",type:"image"},GI=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},qI);v(this,e),this.parameters=r,this.type=BI,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=jw(t),this.isInvisible="invisible"===this.parameters.size,hb("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof n?document.getElementById(n):n;hb(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new zI:new VI,this.validateStartingState()}return g(e,[{key:"verify",value:function(){var e=fe(se().mark((function e(){var t,n,r,i=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){hb(!this.parameters.sitekey,this.auth,"argument-error"),hb(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),hb("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=dI()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){hb(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=fe(se().mark((function e(){var t,n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=fe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hb(mb()&&!vI(),this.auth,"internal-error"),e.next=3,KI();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,jb(this.auth);case 8:hb(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return hb(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function KI(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var WI=function(){function e(t,n){v(this,e),this.verificationId=t,this.onConfirmation=n}return g(e,[{key:"confirm",value:function(e){var t=R_._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function HI(){return HI=fe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!st(t.app)){e.next=2;break}return e.abrupt("return",Promise.reject(cb(t)));case 2:return i=jw(t),e.next=5,XI(i,n,oe(r));case 5:return a=e.sent,e.abrupt("return",new WI(a,(function(e){return sx(i,e)})));case 7:case"end":return e.stop()}}),e)}))),HI.apply(this,arguments)}function QI(e,t,n){return YI.apply(this,arguments)}function YI(){return(YI=fe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=oe(t),e.next=3,tx(!1,i,"phone");case 3:return e.next=5,XI(i.auth,n,oe(r));case 5:return a=e.sent,e.abrupt("return",new WI(a,(function(e){return cx(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $I(){return($I=fe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!st((i=oe(t)).auth.app)){e.next=3;break}return e.abrupt("return",Promise.reject(cb(i.auth)));case 3:return e.next=5,XI(i.auth,n,oe(r));case 5:return a=e.sent,e.abrupt("return",new WI(a,(function(e){return fx(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XI(e,t,n){return JI.apply(this,arguments)}function JI(){return JI=fe(se().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,hb("string"===typeof a,t,"argument-error"),hb(r.type===BI,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return hb("enroll"===s.type,t,"internal-error"),e.next=13,Xx(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return hb("signin"===s.type,t,"internal-error"),hb(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,DI(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,S_(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),JI.apply(this,arguments)}function ZI(){return(ZI=fe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!st((r=oe(t)).auth.app)){e.next=3;break}return e.abrupt("return",Promise.reject(cb(r.auth)));case 3:return e.next=5,Z_(r,n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var eS=function(){function e(t){v(this,e),this.providerId=e.PROVIDER_ID,this.auth=jw(t)}return g(e,[{key:"verifyPhoneNumber",value:function(e,t){return XI(this.auth,e,oe(t))}}],[{key:"credential",value:function(e,t){return R_._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?R_._fromTokenResponse(n,r):null}}]),e}();function tS(e,t){return t?mw(t):(hb(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}eS.PROVIDER_ID="phone",eS.PHONE_SIGN_IN_METHOD="phone";var nS=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this,"custom","custom")).params=e,r}return g(n,[{key:"_getIdTokenResponse",value:function(e){return __(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return __(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return __(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}($w);function rS(e){return ax(e.auth,new nS(e),e.bypassAuthState)}function iS(e){var t=e.auth,n=e.user;return hb(n,t,"internal-error"),rx(n,new nS(e),e.bypassAuthState)}function aS(e){return oS.apply(this,arguments)}function oS(){return oS=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,hb(r=t.user,n,"internal-error"),e.abrupt("return",Z_(r,new nS(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),oS.apply(this,arguments)}var sS=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];v(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return g(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=fe(se().mark((function t(n,r){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=fe(se().mark((function e(t){var n,r,i,a,o,s,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rS;case"linkViaPopup":case"linkViaRedirect":return aS;case"reauthViaPopup":case"reauthViaRedirect":return iS;default:ob(this.auth,"internal-error")}}},{key:"resolve",value:function(e){pb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){pb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),uS=new yb(2e3,1e4);function cS(e,t,n){return lS.apply(this,arguments)}function lS(){return lS=fe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!st(t.app)){e.next=2;break}return e.abrupt("return",Promise.reject(sb(t,"operation-not-supported-in-this-environment")));case 2:return i=jw(t),lb(t,n,O_),a=tS(i,r),o=new pS(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 7:case"end":return e.stop()}}),e)}))),lS.apply(this,arguments)}function fS(){return(fS=fe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!st((i=oe(t)).auth.app)){e.next=3;break}return e.abrupt("return",Promise.reject(sb(i.auth,"operation-not-supported-in-this-environment")));case 3:return lb(i.auth,n,O_),a=tS(i.auth,r),o=new pS(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hS(e,t,n){return dS.apply(this,arguments)}function dS(){return(dS=fe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lb((i=oe(t)).auth,n,O_),a=tS(i.auth,r),o=new pS(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pS=function(e){w(n,e);var t=S(n);function n(e,r,i,a,o){var s;return v(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=k(s),s}return g(n,[{key:"executeNotNull",value:function(){var e=fe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return hb(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=fe(se().mark((function e(){var t,n=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pb(1===this.filter.length,"Popup operations only handle one event"),t=fI(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(sb(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(sb(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(sb(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,uS.get())}()}}]),n}(sS);pS.currentPopupAction=null;var vS="pendingRedirect",mS=new Map,gS=function(e){w(n,e);var t=S(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return v(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return g(n,[{key:"execute",value:function(){var e=fe(se().mark((function e(){var t,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=mS.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,yS(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Ht(_(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:mS.set(this.auth._key(),t);case 21:return this.bypassAuthState||mS.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=fe(se().mark((function e(t){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Ht(_(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Ht(_(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(sS);function yS(e,t){return kS.apply(this,arguments)}function kS(){return kS=fe(se().mark((function e(t,n){var r,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=IS(n),i=xS(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),kS.apply(this,arguments)}function bS(e,t){return wS.apply(this,arguments)}function wS(){return wS=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xS(t)._set(IS(n),"true"));case 1:case"end":return e.stop()}}),e)}))),wS.apply(this,arguments)}function _S(e,t){mS.set(e._key(),t)}function xS(e){return mw(e._redirectPersistence)}function IS(e){return kw(vS,e.config.apiKey,e.name)}function SS(e,t,n){return function(e,t,n){return ES.apply(this,arguments)}(e,t,n)}function ES(){return ES=fe(se().mark((function e(t,n,r){var i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!st(t.app)){e.next=2;break}return e.abrupt("return",Promise.reject(cb(t)));case 2:return i=jw(t),lb(t,n,O_),e.next=6,i._initializationPromise;case 6:return a=tS(i,r),e.next=9,bS(a,i);case 9:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 10:case"end":return e.stop()}}),e)}))),ES.apply(this,arguments)}function TS(e,t,n){return function(e,t,n){return CS.apply(this,arguments)}(e,t,n)}function CS(){return(CS=fe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(lb((i=oe(t)).auth,n,O_),!st(i.auth.app)){e.next=4;break}return e.abrupt("return",Promise.reject(cb(i.auth)));case 4:return e.next=6,i.auth._initializationPromise;case 6:return a=tS(i.auth,r),e.next=9,bS(a,i.auth);case 9:return e.next=11,LS(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function NS(e,t,n){return function(e,t,n){return AS.apply(this,arguments)}(e,t,n)}function AS(){return(AS=fe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lb((i=oe(t)).auth,n,O_),e.next=4,i.auth._initializationPromise;case 4:return a=tS(i.auth,r),e.next=7,tx(!1,i,n.providerId);case 7:return e.next=9,bS(a,i.auth);case 9:return e.next=11,LS(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function RS(e,t){return PS.apply(this,arguments)}function PS(){return PS=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jw(t)._initializationPromise;case 2:return e.abrupt("return",DS(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),PS.apply(this,arguments)}function DS(e,t){return OS.apply(this,arguments)}function OS(){return OS=fe(se().mark((function e(t,n){var r,i,a,o,s,u=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]&&u[2],!st(t.app)){e.next=3;break}return e.abrupt("return",Promise.reject(cb(t)));case 3:return i=jw(t),a=tS(i,n),o=new gS(i,a,r),e.next=8,o.execute();case 8:if(!(s=e.sent)||r){e.next=15;break}return delete s.user._redirectEventId,e.next=13,i._persistUserIfCurrent(s.user);case 13:return e.next=15,i._setRedirectUser(null,n);case 15:return e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)}))),OS.apply(this,arguments)}function LS(e){return MS.apply(this,arguments)}function MS(){return(MS=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fI("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jS=function(){function e(t){v(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return g(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return US(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!US(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(sb(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(FS(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(FS(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function FS(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function US(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function VS(e){return zS.apply(this,arguments)}function zS(){return zS=fe(se().mark((function e(t){var n,r=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Ib(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),zS.apply(this,arguments)}var BS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qS=/^https?/;function GS(){return GS=fe(se().mark((function e(t){var n,r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,VS(t);case 4:n=e.sent,r=n.authorizedDomains,i=y(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!KS(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:ob(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),GS.apply(this,arguments)}function KS(e){var t=vb(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!qS.test(r))return!1;if(BS.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var WS=new yb(3e4,6e4);function HS(){var e=dI().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=ce(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}function QS(e){return new Promise((function(t,n){var r,i,a;function o(){HS(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){HS(),n(sb(e,"network-request-failed"))},timeout:WS.get()})}if(null===(i=null===(r=dI().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=dI().gapi)||void 0===a?void 0:a.load)){var s=zw("iframefcb");return dI()[s]=function(){gapi.load?o():n(sb(e,"network-request-failed"))},Vw("".concat(Uw.gapiScript,"?onload=").concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw YS=null,e}))}var YS=null;function $S(e){return YS=YS||QS(e)}var XS=new yb(5e3,15e3),JS="__/auth/iframe",ZS="emulator/auth/iframe",eE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nE(e){var t=e.config;hb(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?kb(t,ZS):"https://".concat(e.config.authDomain,"/").concat(JS),r={apiKey:t.apiKey,appName:e.name,v:dt},i=tE.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(ee(r).slice(1))}function rE(e){return iE.apply(this,arguments)}function iE(){return iE=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$S(t);case 2:return n=e.sent,hb(r=dI().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:nE(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eE,dontclear:!0},(function(e){return new Promise(function(){var n=fe(se().mark((function n(r,i){var a,o,s;return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){dI().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=sb(t,"network-request-failed"),o=dI().setTimeout((function(){i(a)}),XS.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),iE.apply(this,arguments)}var aE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oE=function(){function e(t){v(this,e),this.window=t,this.associatedEvent=null}return g(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function sE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},aE),{width:r.toString(),height:i.toString(),top:a,left:o}),l=U().toLowerCase();n&&(s=Iw(l)?"_blank":n),_w(l)&&(t=t||"http://localhost",u.scrollbars="yes");var f=Object.entries(u).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return Nw(arguments.length>0&&void 0!==arguments[0]?arguments[0]:U())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new oE(null);var h=window.open(t||"",s,f);hb(h,e,"popup-blocked");try{h.focus()}catch(d){}return new oE(h)}var uE="__/auth/handler",cE="emulator/auth/handler",lE=encodeURIComponent("fac");function fE(e,t,n,r,i,a){return hE.apply(this,arguments)}function hE(){return hE=fe(se().mark((function e(t,n,r,i,a,o){var s,u,l,f,h,d,p,v,m,g,y,k,b;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hb(t.config.authDomain,t,"auth-domain-config-required"),hb(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:dt,eventId:a},n instanceof O_)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",X(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),u=0,l=Object.entries(o||{});u<l.length;u++)f=c(l[u],2),h=f[0],d=f[1],s[h]=d;for(n instanceof L_&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=p.join(",")),t.tenantId&&(s.tid=t.tenantId),v=s,m=0,g=Object.keys(v);m<g.length;m++)y=g[m],void 0===v[y]&&delete v[y];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,b=k?"#".concat(lE,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(dE(t),"?").concat(ee(v).slice(1)).concat(b));case 13:case"end":return e.stop()}}),e)}))),hE.apply(this,arguments)}function dE(e){var t=e.config;return t.emulator?kb(t,cE):"https://".concat(t.authDomain,"/").concat(uE)}var pE="webStorageSupport",vE=function(){function e(){v(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uI,this._completeRedirectFn=DS,this._overrideRedirectResult=_S}return g(e,[{key:"_openPopup",value:function(){var e=fe(se().mark((function e(t,n,r,i){var a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pb(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,fE(t,n,r,vb(),i);case 3:return o=e.sent,e.abrupt("return",sE(t,o,fI()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=fe(se().mark((function e(t,n,r,i){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,fE(t,n,r,vb(),i);case 4:return pI(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(pb(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rE(t);case 2:return n=e.sent,r=new jS(t),n.register("authEvent",(function(e){return hb(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(pE,{type:pE},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[pE];void 0!==i&&t(!!i),ob(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return GS.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Aw()||xw()||Nw()}}]),e}(),mE=vE,gE=function(){function e(t){v(this,e),this.factorId=t}return g(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return db("unexpected MultiFactorSessionType")}}}]),e}(),yE=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this,"phone")).credential=e,r}return g(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Ib(e,"POST","/v2/accounts/mfaEnrollment:finalize",xb(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Ib(e,"POST","/v2/accounts/mfaSignIn:finalize",xb(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(gE),kE=function(){function e(){v(this,e)}return g(e,null,[{key:"assertion",value:function(e){return yE._fromCredential(e)}}]),e}();kE.FACTOR_ID="phone";var bE=function(){function e(){v(this,e)}return g(e,null,[{key:"assertionForEnrollment",value:function(e,t){return wE._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return wE._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=fe(se().mark((function e(t){var n,r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hb("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,Jx(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});case 4:return i=e.sent,e.abrupt("return",_E._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();bE.FACTOR_ID="totp";var wE=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return g(n,[{key:"_finalizeEnroll",value:function(){var e=fe(se().mark((function e(t,n,r){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hb("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",Zx(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=fe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hb(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",OI(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(gE),_E=function(){function e(t,n,r,i,a,o,s){v(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return g(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(xE(e)||xE(t))&&(r=!0),r&&(xE(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),xE(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function xE(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var IE="@firebase/auth",SE="1.7.0",EE=function(){function e(t){v(this,e),this.auth=t,this.internalListeners=new Map}return g(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){hb(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var TE;!function(e){var t;null===(t=L())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function CE(){return window}!function(e){Uw=e}({loadJS:function(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=sb("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),TE="Browser",rt(new he("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,s=o.apiKey,u=o.authDomain;hb(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:s,authDomain:u,clientPlatform:TE,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rw(TE)},l=new Mw(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(mw);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),rt(new he("auth-internal",(function(e){return function(e){return new EE(e)}(jw(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),bt(IE,SE,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(TE)),bt(IE,SE,"esm2017");var NE=2e3;function AE(e,t,n){return RE.apply(this,arguments)}function RE(){return RE=fe(se().mark((function e(t,n,r){var i,a,o,s,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=CE(),o=a.BuildInfo,pb(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,jE(n.sessionId);case 4:return s=e.sent,u={},Nw()?u.ibi=o.packageName:Ew()?u.apn=o.packageName:ob(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",fE(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),RE.apply(this,arguments)}function PE(){return PE=fe(se().mark((function e(t){var n,r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=CE(),r=n.BuildInfo,i={},Nw()?i.iosBundleId=r.packageName:Ew()?i.androidPackageName=r.packageName:ob(t,"operation-not-supported-in-this-environment"),e.next=5,VS(t,i);case 5:case"end":return e.stop()}}),e)}))),PE.apply(this,arguments)}function DE(e){var t=CE().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function OE(e,t,n){return LE.apply(this,arguments)}function LE(){return LE=fe(se().mark((function e(t,n,r){var i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=CE(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(sb(t,"redirect-cancelled-by-user"))}),NE))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),Ew()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),LE.apply(this,arguments)}function ME(e){var t,n,r,i,a,o,s,u,c,l,f=CE();hb("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),hb("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),hb("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),hb("function"===typeof(null===(u=null===(s=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),hb("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function jE(e){return FE.apply(this,arguments)}function FE(){return(FE=fe(se().mark((function e(t){var n,r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=UE(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function UE(e){if(pb(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var VE=20,zE=function(e){w(n,e);var t=S(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return g(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Ht(_(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(jS);function BE(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:HE(),postBody:null,tenantId:e.tenantId,error:sb(e,"no-auth-event")}}function qE(e,t){return QE()._set(YE(e),t)}function GE(e){return KE.apply(this,arguments)}function KE(){return KE=fe(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,QE()._get(YE(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,QE()._remove(YE(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),KE.apply(this,arguments)}function WE(e,t){var n,r,i=function(e){var t=$E(e),n=t.link?decodeURIComponent(t.link):void 0,r=$E(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return $E(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=$E(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?sb(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function HE(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<VE;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function QE(){return mw(oI)}function YE(e){return kw("authEvent",e.config.apiKey,e.name)}function $E(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||ue(t)||s(t)||u();r[0];return te(r.slice(1).join("?"))}var XE=function(){function e(){v(this,e),this._redirectPersistence=uI,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=DS,this._overrideRedirectResult=_S}return g(e,[{key:"_initialize",value:function(){var e=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new zE(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){ob(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=fe(se().mark((function e(t,n,r,i){var a,o,s,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ME(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),mS.clear(),e.next=10,this._originValidation(t);case 10:return o=BE(t,r,i),e.next=13,qE(t,o);case 13:return e.next=15,AE(t,o,n);case 15:return s=e.sent,e.next=18,DE(s);case 18:return u=e.sent,e.abrupt("return",OE(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return PE.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=CE(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(fe(se().mark((function n(){return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,GE(e);case 2:t.onEvent(ZE());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=fe(se().mark((function n(r){var i,a;return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,GE(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=WE(i,r.url)),t.onEvent(a||ZE());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");CE().handleOpenURL=function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),JE=XE;function ZE(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:sb("no-auth-event")}}var eT=1e3;function tT(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function nT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return!("file:"!==tT()&&"ionic:"!==tT()&&"capacitor:"!==tT()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function rT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return G()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/Edge\/\d+/.test(e)}(e)}function iT(){try{var e=self.localStorage,t=fI();if(e)return e.setItem(t,"1"),e.removeItem(t),!rT()||W()}catch(n){return aT()&&W()}return!1}function aT(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function oT(){return("http:"===tT()||"https:"===tT()||B()||nT())&&!(q()||V())&&iT()&&!aT()}function sT(){return nT()&&"undefined"!==typeof document}function uT(){return cT.apply(this,arguments)}function cT(){return(cT=fe(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(sT()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),eT);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lT={LOCAL:"local",NONE:"none",SESSION:"session"},fT=hb,hT="persistence";function dT(e,t){fT(Object.values(lT).includes(t),e,"invalid-persistence-type"),q()?fT(t!==lT.SESSION,e,"unsupported-persistence-type"):V()?fT(t===lT.NONE,e,"unsupported-persistence-type"):aT()?fT(t===lT.NONE||t===lT.LOCAL&&W(),e,"unsupported-persistence-type"):fT(t===lT.NONE||iT(),e,"unsupported-persistence-type")}function pT(e){return vT.apply(this,arguments)}function vT(){return vT=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=mT(),r=kw(hT,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),vT.apply(this,arguments)}function mT(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var gT=hb,yT=function(){function e(){v(this,e),this.browserResolver=mw(mE),this.cordovaResolver=mw(JE),this.underlyingResolver=null,this._redirectPersistence=uI,this._completeRedirectFn=DS,this._overrideRedirectResult=_S}return g(e,[{key:"_initialize",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=fe(se().mark((function e(t,n,r,i){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=fe(se().mark((function e(t,n,r,i){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return sT()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return gT(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=fe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,uT();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function kT(e){return e.unwrap()}function bT(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new ST(e,function(e,t){var n,r=oe(e),i=t;return hb(t.customData.operationType,r,"argument-error"),hb(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),$x._fromError(r,i)}(e,t));else if(r){var i=wT(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function wT(e){var t=(e instanceof H?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof H)&&"temporaryProof"in t&&"phoneNumber"in t)return eS.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Wk.PASSWORD)return null;switch(r){case Wk.GOOGLE:n=F_;break;case Wk.FACEBOOK:n=j_;break;case Wk.GITHUB:n=U_;break;case Wk.TWITTER:n=B_;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?V_._create(r,s):I_._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new M_(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof H?n.credentialFromError(e):n.credentialFromResult(e)}function _T(e,t){return t.catch((function(t){throw t instanceof H&&bT(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,wT(t)),additionalUserInfo:Qx(e),user:ET.getOrCreate(r)}}))}function xT(e,t){return IT.apply(this,arguments)}function IT(){return IT=fe(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return _T(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),IT.apply(this,arguments)}var ST=function(){function e(t,n){v(this,e),this.resolver=n,this.auth=t.wrapped()}return g(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return _T(kT(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),ET=function(){function e(t){v(this,e),this._delegate=t,this.multiFactor=function(e){var t=oe(e);return nI.has(t)||nI.set(t,tI._fromUser(t)),nI.get(t)}(t)}return g(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_T(this.auth,cx(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xT(this.auth,QI(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_T(this.auth,hS(this._delegate,t,yT)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pT(jw(this.auth));case 2:return e.abrupt("return",NS(this._delegate,t,yT));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_T(this.auth,fx(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return xT(this.auth,function(e,t,n){return $I.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return _T(this.auth,function(e,t,n){return fS.apply(this,arguments)}(this._delegate,e,yT))}},{key:"reauthenticateWithRedirect",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pT(jw(this.auth));case 2:return e.abrupt("return",TS(this._delegate,t,yT));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Lx.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X_(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){var n=oe(e);return st(n.auth.app)?Promise.reject(cb(n.auth)):Vx(n,t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Vx(oe(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return ZI.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Ux.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Mx.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();ET.USER_MAP=new WeakMap;var TT=hb,CT=function(){function e(t,n){if(v(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;TT(r,"invalid-api-key",{appName:t.name}),TT(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?yT:void 0;this._delegate=n.initialize({options:{persistence:AT(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(eb),this.linkUnderlyingAuth()}return g(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?ET.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Hw(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Ix.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Sx(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return xx.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=fe(se().mark((function e(t,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_T(this._delegate,Cx(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Ox.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=P_.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=fe(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return TT(oT(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,RS(this._delegate,yT);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",_T(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){jw(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=NT(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=NT(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ax.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return _x.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=fe(se().mark((function e(t){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:dT(this._delegate,t),e.t0=t,e.next=e.t0===lT.SESSION?4:e.t0===lT.LOCAL?6:e.t0===lT.NONE?11:13;break;case 4:return n=uI,e.abrupt("break",14);case 6:return e.next=8,mw(PI)._isAvailable();case 8:return r=e.sent,n=r?PI:oI,e.abrupt("break",14);case 11:return n=yw,e.abrupt("break",14);case 13:return e.abrupt("return",ob("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return _T(this._delegate,function(e){return H_.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return _T(this._delegate,sx(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return _T(this._delegate,function(e,t){return vx.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return _T(this._delegate,function(e,t,n){return st(e.app)?Promise.reject(cb(e)):sx(oe(e),D_.credential(t,n)).catch(function(){var t=fe(se().mark((function t(n){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&bx(e),n;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return _T(this._delegate,function(e,t,n){return Rx.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return xT(this._delegate,function(e,t,n){return HI.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return TT(oT(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",_T(this._delegate,cS(this._delegate,t,yT)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=fe(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return TT(oT(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,pT(this._delegate);case 3:return e.abrupt("return",SS(this._delegate,t,yT));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Tx.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function NT(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&ET.getOrCreate(e))},error:t,complete:n}}function AT(e,t){var n=function(e,t){var n=mT();if(!n)return[];var r=kw(hT,e,t);switch(n.getItem(r)){case lT.NONE:return[yw];case lT.LOCAL:return[PI,uI];case lT.SESSION:return[uI];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(PI)||n.push(PI),"undefined"!==typeof window)for(var r=0,i=[oI,uI];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(yw)||n.push(yw),n}CT.Persistence=lT;var RT=function(){function e(){v(this,e),this.providerId="phone",this._delegate=new eS(kT(Wt.auth()))}return g(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return eS.credential(e,t)}}]),e}();RT.PHONE_SIGN_IN_METHOD=eS.PHONE_SIGN_IN_METHOD,RT.PROVIDER_ID=eS.PROVIDER_ID;var PT=hb,DT=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wt.app();v(this,e),PT(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new GI(i.auth(),t,n),this.type=this._delegate.type}return g(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new he("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new CT(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Hk,PASSWORD_RESET:Qk,RECOVER_EMAIL:Yk,REVERT_SECOND_FACTOR_ADDITION:$k,VERIFY_AND_CHANGE_EMAIL:Xk,VERIFY_EMAIL:Jk}},EmailAuthProvider:D_,FacebookAuthProvider:j_,GithubAuthProvider:U_,GoogleAuthProvider:F_,OAuthProvider:M_,SAMLAuthProvider:z_,PhoneAuthProvider:RT,PhoneMultiFactorGenerator:kE,RecaptchaVerifier:DT,TwitterAuthProvider:B_,Auth:CT,AuthCredential:$w,Error:H}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.5.5")}(Wt);var OT,LT="firebasestorage.googleapis.com",MT="storageBucket",jT=function(e){w(n,e);var t=S(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return v(this,n),(i=t.call(this,FT(e),"Firebase Storage: ".concat(r," (").concat(FT(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(k(i),n.prototype),i}return g(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return FT(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(H);function FT(e){return"storage/"+e}function UT(){return new jT(OT.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function VT(){return new jT(OT.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zT(){return new jT(OT.CANCELED,"User canceled the upload/download.")}function BT(){return new jT(OT.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qT(e){return new jT(OT.INVALID_ARGUMENT,e)}function GT(){return new jT(OT.APP_DELETED,"The Firebase app was deleted.")}function KT(e){return new jT(OT.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function WT(e,t){return new jT(OT.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function HT(e){throw new jT(OT.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(OT||(OT={}));var QT,YT=function(){function e(t,n){v(this,e),this.bucket=t,this.path_=n}return g(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new jT(OT.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===LT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new jT(OT.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),$T=function(){function e(t){v(this,e),this.promise_=Promise.reject(t)}return g(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function XT(e){return"string"===typeof e||e instanceof String}function JT(e){return ZT()&&e instanceof Blob}function ZT(){return"undefined"!==typeof Blob}function eC(e,t,n,r){if(r<t)throw qT("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw qT("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function tC(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function nC(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function rC(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(QT||(QT={}));var iC=function(){function e(t,n,r,i,a,o,s,u,c,l,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];v(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return g(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){i(u)}else if(null!==a){var s=UT();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?GT():zT());else i(VT())}};this.canceled_?t(0,new aC(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(s=2),clearTimeout(i),f(0)):e||(s=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new aC(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===QT.NO_ERROR,a=r.getStatus();if(!n||rC(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===QT.ABORT;t(!1,new aC(!1,null,o))}else{var s=-1!==e.successCodes_.indexOf(a);t(!0,new aC(s,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),aC=g((function e(t,n,r){v(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function oC(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function sC(){for(var e=oC(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(ZT())return new Blob(n);throw new jT(OT.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function uC(e){if("undefined"===typeof atob)throw t="base-64",new jT(OT.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var cC={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},lC=g((function e(t,n){v(this,e),this.data=t,this.contentType=n||null}));function fC(e,t){switch(e){case cC.RAW:return new lC(hC(t));case cC.BASE64:case cC.BASE64URL:return new lC(dC(e,t));case cC.DATA_URL:return new lC(function(e){var t=new pC(e);return t.base64?dC(cC.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw WT(cC.DATA_URL,"Malformed data URL.")}return hC(t)}(t.rest)}(t),new pC(t).contentType)}throw UT()}function hC(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function dC(e,t){switch(e){case cC.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw WT(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case cC.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw WT(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=uC(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw WT(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var pC=g((function e(t){v(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw WT(cC.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var vC=function(){function e(t,n){v(this,e);var r=0,i="";JT(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return g(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(JT(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(ZT()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(sC.apply(null,i))}var a=n.map((function(e){return XT(e)?fC(cC.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function mC(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function gC(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function yC(e,t){return t}var kC=g((function e(t,n,r,i){v(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||yC})),bC=null;function wC(){if(bC)return bC;var e=[];e.push(new kC("bucket")),e.push(new kC("generation")),e.push(new kC("metageneration")),e.push(new kC("name","fullPath",!0));var t=new kC("name");t.xform=function(e,t){return function(e){return!XT(e)||e.length<2?e:gC(e)}(t)},e.push(t);var n=new kC("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new kC("timeCreated")),e.push(new kC("updated")),e.push(new kC("md5Hash",null,!0)),e.push(new kC("cacheControl",null,!0)),e.push(new kC("contentDisposition",null,!0)),e.push(new kC("contentEncoding",null,!0)),e.push(new kC("contentLanguage",null,!0)),e.push(new kC("contentType",null,!0)),e.push(new kC("metadata","customMetadata",!0)),bC=e}function _C(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new YT(n,r);return t._makeStorageReference(i)}})}(r,e),r}function xC(e,t,n){var r=mC(t);return null===r?null:_C(e,r,n)}function IC(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var SC="prefixes",EC="items";function TC(e,t,n){var r=mC(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[SC]){var i,a=y(n[SC]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),s=e._makeStorageReference(new YT(t,o));r.prefixes.push(s)}}catch(h){a.e(h)}finally{a.f()}}if(n[EC]){var u,c=y(n[EC]);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=e._makeStorageReference(new YT(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var CC=g((function e(t,n,r,i){v(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function NC(e){if(!e)throw UT()}function AC(e,t){return function(n,r){var i=xC(e,r,t);return NC(null!==i),i}}function RC(e,t){return function(n,r){var i=xC(e,r,t);return NC(null!==i),function(e,t,n,r){var i=mC(t);if(null===i)return null;if(!XT(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent,s=a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return tC("/b/"+o(i)+"/o/"+o(a),n,r)+nC({alt:"media",token:t})}));return s[0]}(i,r,e.host,e._protocol)}}function PC(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new jT(OT.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new jT(OT.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new jT(OT.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new jT(OT.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function DC(e){var t=PC(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new jT(OT.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function OC(e,t,n){var r=tC(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new CC(r,"GET",AC(e,n),i);return a.errorHandler=DC(t),a}function LC(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=tC(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new CC(o,"GET",function(e,t){return function(n,r){var i=TC(e,t,r);return NC(null!==i),i}}(e,t.bucket),s);return u.urlParams=a,u.errorHandler=PC(t),u}function MC(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function jC(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=MC(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+IC(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",f=vC.getBlob(c,r,l);if(null===f)throw BT();var h={name:u.fullPath},d=tC(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new CC(d,"POST",AC(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=PC(t),v}var FC=g((function e(t,n,r,i){v(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function UC(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){NC(!1)}return NC(!!n&&-1!==(t||["active"]).indexOf(n)),n}var VC=262144;function zC(e,t,n,r,i,a,o,s){var u=new FC(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new jT(OT.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var f=u.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=r.slice(f,h);if(null===p)throw BT();var v=t.maxUploadRetryTime,m=new CC(n,"POST",(function(e,n){var i,o=UC(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===o?AC(t,a)(e,n):null,new FC(s,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=s||null,m.errorHandler=PC(e),m}var BC={STATE_CHANGED:"state_changed"},qC={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function GC(e){switch(e){case"running":case"pausing":case"canceling":return qC.RUNNING;case"paused":return qC.PAUSED;case"success":return qC.SUCCESS;case"canceled":return qC.CANCELED;default:return qC.ERROR}}var KC=g((function e(t,n,r){v(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function WC(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var HC=null,QC=function(){function e(){var t=this;v(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=QT.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=QT.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=QT.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return g(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw HT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw HT("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw HT("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw HT("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw HT("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),YC=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(QC);function $C(){return HC?HC():new YC}var XC=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;v(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=wC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(OT.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(rC(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=VT()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(OT.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return g(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=c(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=MC(t,r,i),s={name:o.fullPath},u=tC(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=IC(o,n),f=e.maxUploadRetryTime,h=new CC(u,"POST",(function(e){var t;UC(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){NC(!1)}return NC(XT(t)),t}),f);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=PC(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,$C,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new CC(n,"POST",(function(e){var t=UC(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){NC(!1)}n||NC(!1);var i=Number(n);return NC(!isNaN(i)),new FC(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=PC(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,$C,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=VC*this._chunkMultiplier,n=new FC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=zC(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(o,$C,i,a,!1);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(VC*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=OC(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,$C,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=jC(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,$C,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=zT(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=GC(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new KC(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(GC(this._state)){case qC.SUCCESS:WC(this._resolve.bind(null,this.snapshot))();break;case qC.CANCELED:case qC.ERROR:WC(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(GC(this._state)){case qC.RUNNING:case qC.PAUSED:e.next&&WC(e.next.bind(e,this.snapshot))();break;case qC.SUCCESS:e.complete&&WC(e.complete.bind(e))();break;default:e.error&&WC(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),JC=function(){function e(t,n){v(this,e),this._service=t,this._location=n instanceof YT?n:YT.makeFromUrl(n,t.host)}return g(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new YT(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return gC(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new YT(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw KT(e)}}]),e}();function ZC(e,t,n){return eN.apply(this,arguments)}function eN(){return(eN=fe(se().mark((function e(t,n,r){var i,a,o,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,tN(t,o);case 3:if(s=e.sent,(i=n.prefixes).push.apply(i,ce(s.prefixes)),(a=n.items).push.apply(a,ce(s.items)),null==s.nextPageToken){e.next=9;break}return e.next=9,ZC(t,n,s.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tN(e,t){null!=t&&"number"===typeof t.maxResults&&eC("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=LC(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,$C)}function nN(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=tC(t.fullServerUrl(),e.host,e._protocol),a=IC(n,r),o=e.maxOperationRetryTime,s=new CC(i,"PATCH",AC(e,r),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=a,s.errorHandler=DC(t),s}(e.storage,e._location,t,wC());return e.storage.makeRequestWithTokens(n,$C)}function rN(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=tC(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new CC(r,"GET",RC(e,n),i);return a.errorHandler=DC(t),a}(e.storage,e._location,wC());return e.storage.makeRequestWithTokens(t,$C).then((function(e){if(null===e)throw new jT(OT.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function iN(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=tC(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new CC(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=DC(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,$C)}function aN(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new YT(e._location.bucket,n);return new JC(e.storage,r)}function oN(e,t){if(e instanceof cN){var n=e;if(null==n._bucket)throw new jT(OT.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+MT+"' property when initializing the app?");var r=new JC(n,n._bucket);return null!=t?oN(r,t):r}return void 0!==t?aN(e,t):e}function sN(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof cN)return new JC(e,t);throw qT("To use ref(service, url), the first argument must be a Storage instance.")}return oN(e,t)}function uN(e,t){var n=null===t||void 0===t?void 0:t[MT];return null==n?null:YT.makeFromBucketSpec(n,e)}var cN=function(){function e(t,n,r,i,a){v(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=LT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?YT.makeFromBucketSpec(i,this._host):uN(this._host,this.app.options)}return g(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=YT.makeFromBucketSpec(this._url,e):this._bucket=uN(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){eC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){eC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=fe(se().mark((function e(){var t,n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=fe(se().mark((function e(){var t,n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new JC(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new $T(GT());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=nC(e.urlParams),u=e.url+s,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new iC(u,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=fe(se().mark((function e(t,n){var r,i,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=c(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),lN="@firebase/storage",fN="0.12.3",hN="storage";function dN(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new XC(e,new vC(t),n)}(e=oe(e),t,n)}function pN(e){return function(e){e._throwIfRoot("getMetadata");var t=OC(e.storage,e._location,wC());return e.storage.makeRequestWithTokens(t,$C)}(e=oe(e))}function vN(e){return function(e){var t={prefixes:[],items:[]};return ZC(e,t).then((function(){return t}))}(e=oe(e))}function mN(e,t){return sN(e=oe(e),t)}function gN(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:F(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function yN(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new cN(r,i,a,n,dt)}rt(new he(hN,yN,"PUBLIC").setMultipleInstances(!0)),bt(lN,fN,""),bt(lN,fN,"esm2017");var kN=function(){function e(t,n,r){v(this,e),this._delegate=t,this.task=n,this.ref=r}return g(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),bN=function(){function e(t,n){v(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return g(e,[{key:"snapshot",get:function(){return new kN(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new kN(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new kN(e,i,i._ref))}:{next:t.next?function(e){return t.next(new kN(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),wN=function(){function e(t,n){v(this,e),this._delegate=t,this._service=n}return g(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new _N(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new _N(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),_N=function(){function e(t,n){v(this,e),this._delegate=t,this.storage=n}return g(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return aN(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new bN(dN(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cC.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=fC(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new bN(new XC(this._delegate,new vC(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return vN(this._delegate).then((function(t){return new wN(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return tN(e=oe(e),t)}(this._delegate,e||void 0).then((function(e){return new wN(e,t.storage)}))}},{key:"getMetadata",value:function(){return pN(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return nN(e=oe(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return rN(oe(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),iN(oe(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw KT(e)}}]),e}(),xN=function(){function e(t,n){v(this,e),this.app=t,this._delegate=n}return g(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(IN(e))throw qT("ref() expected a child path but got a URL, use refFromURL instead.");return new _N(mN(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!IN(e))throw qT("refFromURL() expected a full URL but got a child path, use ref() instead.");try{YT.makeFromUrl(e,this._delegate.host)}catch(t){throw qT("refFromUrl() expected a valid full URL but got an invalid one.")}return new _N(mN(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};gN(this._delegate,e,t,n)}}]),e}();function IN(e){return/^[A-Za-z]+:\/\//.test(e)}function SN(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new xN(r,i)}!function(e){var t={TaskState:qC,TaskEvent:BC,StringFormat:cC,Storage:xN,Reference:_N};e.INTERNAL.registerComponent(new he("storage-compat",SN,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.6")}(Wt);var EN=Wt.initializeApp({apiKey:"AIzaSyD8sJ_1ZtzkZn7MCDEvoJh5YsWdbglrYwU",authDomain:"socialmediaapp1606.firebaseapp.com",projectId:"socialmediaapp1606",storageBucket:"socialmediaapp1606.appspot.com",messagingSenderId:"365951333286",appId:"1:365951333286:web:d4ede0856df09d1fc41567",measurementId:"G-8WH7VJBRX8"}).firestore(),TN=Wt.auth(),CN=Wt.storage();var NN=function(e){var n=c((0,t.useState)(""),2),r=n[0],i=n[1],a=c((0,t.useState)(""),2),o=a[0],s=a[1],u=c((0,t.useState)(""),2),f=u[0],h=u[1],d=c((0,t.useState)(!1),2),p=d[0],v=d[1],m=c((0,t.useState)(!1),2),g=m[0],y=m[1],k=c((0,t.useState)(!1),2),b=k[0],w=k[1],_=c((0,t.useState)(!1),2),x=_[0],I=_[1],S=c((0,t.useState)([]),2),E=S[0],T=S[1];(0,t.useEffect)((function(){EN.collection("users").onSnapshot((function(e){T(e.docs.map((function(e){return e.data()})))}))}),[]),(0,t.useEffect)((function(){var e=setTimeout((function(){console.log("Checking form validity!"),v(o.includes("@")&&f.trim().length>=8&&r&&!E.map((function(e){return e.username})).includes(r))}),500);return function(){console.log("CLEANUP"),clearTimeout(e)}}),[r,o,f,E]);var C=function(){console.log("login btn clicked"),e.onLoginClicked()};return(0,l.jsxs)("div",{className:"register__div",children:[(0,l.jsxs)("nav",{className:"mobile__nav",children:[(0,l.jsx)("h1",{className:"nav__logo",children:"Ur'sBook"}),(0,l.jsx)("button",{onClick:C,children:"Login"})]}),(0,l.jsx)("div",{className:"login-container",children:(0,l.jsxs)("div",{className:"card",children:[(0,l.jsxs)("div",{className:"card-left",children:[(0,l.jsxs)("h1",{children:["Ur's.",(0,l.jsx)("br",{}),"BOOK"]}),(0,l.jsx)("p",{children:"Share your memories. Chat with your friends, Like and Comment on their post."}),(0,l.jsx)("span",{children:"Already have an account?"}),(0,l.jsx)("button",{onClick:C,children:"Login"})]}),(0,l.jsxs)("div",{className:"card-right",children:[(0,l.jsx)("h1",{children:"Register"}),(0,l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.onRegister(r,o,f)},children:[(0,l.jsxs)("div",{className:"input ".concat(x?"invalidUsername":""),children:[(0,l.jsx)("input",{type:"text",placeholder:"Username",value:r,onChange:function(e){i(e.target.value)},onBlur:function(){r&&!E.map((function(e){return e.username})).includes(r)||I(!0)}}),(0,l.jsxs)("p",{className:"error ".concat(x?"errorUsernameMsg":""),children:[!r&&"Username is required.",E.map((function(e){return e.username})).includes(r)&&"Username already exists."]})]}),(0,l.jsxs)("div",{className:"input ".concat(g?"invalidEmail":""),children:[(0,l.jsx)("input",{type:"email",placeholder:"Email",value:o,onChange:function(e){s(e.target.value)},onBlur:function(){o.includes("@")||y(!0)}}),(0,l.jsx)("p",{className:"error ".concat(g?"errorEmailMsg":""),children:"Please enter a valid email adress."})]}),(0,l.jsxs)("div",{className:"input ".concat(b?"invalidPassword":""),children:[(0,l.jsx)("input",{type:"password",placeholder:"Password",value:f,onChange:function(e){h(e.target.value)},onBlur:function(){f.trim().length>=8||w(!0)}}),(0,l.jsx)("p",{className:"error ".concat(b?"errorPasswordMsg":""),children:"Password must have atleast 8 characters."})]}),(0,l.jsx)("button",{disabled:!p,type:"submit",children:"Register"})]})]})]})})]})};var AN=function(e){var n=c((0,t.useState)(!1),2),r=n[0],i=n[1],a=c((0,t.useState)(""),2),o=a[0],s=a[1],u=(0,t.useRef)();(0,t.useEffect)((function(){var e=function(e){u.current.contains(e.target)||i(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]);var f=function(){e.onLogout()};return(0,l.jsx)("div",{children:(0,l.jsxs)("nav",{className:"Navbar",ref:u,children:[(0,l.jsxs)("div",{className:"navElements__left",children:[(0,l.jsx)("h1",{className:"nav__logo",onClick:f,children:"l'sBook"}),(0,l.jsxs)("div",{className:"search__container",children:[(0,l.jsx)("input",{className:"nav__search",type:"text",placeholder:"Search",value:o,onChange:function(e){s(e.target.value)}}),(0,l.jsx)("button",{className:"search__btn",disabled:!o,onClick:function(){o&&(e.searchedProfile(o),s(""))},children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=25&id=59878&format=png",alt:""})})]})]}),(0,l.jsxs)("div",{className:"navElements__right",children:[(0,l.jsx)("img",{className:"nav__icons",src:"https://img.icons8.com/?size=30&id=20419&format=png",alt:""}),(0,l.jsx)("img",{className:"nav__icons",src:"https://img.icons8.com/?size=30&id=17317&format=png",alt:""}),(0,l.jsx)("img",{className:"nav__icons",src:"https://img.icons8.com/?size=32&id=kDoeg22e5jUY&format=png",alt:"",onClick:function(){i(!r)}})]}),r&&(0,l.jsxs)("div",{className:"nav__profile",children:[(0,l.jsx)("div",{className:"nav__profileIcons nav__profileUser",onClick:function(){e.profileClicked()},children:(0,l.jsxs)("div",{className:"test",children:[(0,l.jsx)("img",{className:"nav__profileIcon",src:"https://img.icons8.com/?size=25&id=ABBSjQJK83zf&format=png",alt:""}),(0,l.jsx)("h3",{children:e.username.displayName})]})}),(0,l.jsxs)("div",{className:"nav__profileIcons",children:[(0,l.jsxs)("div",{className:"test",children:[(0,l.jsx)("img",{className:"nav__profileIcon",src:"https://img.icons8.com/?size=25&id=2969&format=png",alt:""}),(0,l.jsx)("h3",{children:"Settings & privacy"})]}),(0,l.jsx)("span",{children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=25&id=7849&format=png",alt:""})})]}),(0,l.jsxs)("div",{className:"nav__profileIcons",children:[(0,l.jsxs)("div",{className:"test",children:[(0,l.jsx)("img",{className:"nav__profileIcon",src:"https://img.icons8.com/?size=25&id=2908&format=png",alt:""}),(0,l.jsx)("h3",{children:"Help & support"})]}),(0,l.jsx)("span",{children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=25&id=7849&format=png",alt:""})})]}),(0,l.jsxs)("div",{className:"nav__profileIcons",onClick:f,children:[(0,l.jsxs)("div",{className:"test",children:[(0,l.jsx)("img",{className:"nav__profileIcon",src:"https://img.icons8.com/?size=25&id=dJ1Prw5a5mj4&format=png",alt:""}),(0,l.jsx)("h3",{children:"Log out"})]}),(0,l.jsx)("span",{children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=25&id=7849&format=png",alt:""})})]})]})]})})};function RN(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function PN(){return PN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PN.apply(this,arguments)}function DN(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=DN(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var ON=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=DN(e))&&(r&&(r+=" "),r+=t);return r};function LN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){if(r){var i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}function MN(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var jN=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,FN=MN((function(e){return jN.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var UN=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),VN=Math.abs,zN=String.fromCharCode,BN=Object.assign;function qN(e){return e.trim()}function GN(e,t,n){return e.replace(t,n)}function KN(e,t){return e.indexOf(t)}function WN(e,t){return 0|e.charCodeAt(t)}function HN(e,t,n){return e.slice(t,n)}function QN(e){return e.length}function YN(e){return e.length}function $N(e,t){return t.push(e),e}var XN=1,JN=1,ZN=0,eA=0,tA=0,nA="";function rA(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:XN,column:JN,length:o,return:""}}function iA(e,t){return BN(rA("",null,null,"",null,null,0),e,{length:-e.length},t)}function aA(){return tA=eA>0?WN(nA,--eA):0,JN--,10===tA&&(JN=1,XN--),tA}function oA(){return tA=eA<ZN?WN(nA,eA++):0,JN++,10===tA&&(JN=1,XN++),tA}function sA(){return WN(nA,eA)}function uA(){return eA}function cA(e,t){return HN(nA,e,t)}function lA(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function fA(e){return XN=JN=1,ZN=QN(nA=e),eA=0,[]}function hA(e){return nA="",e}function dA(e){return qN(cA(eA-1,mA(91===e?e+2:40===e?e+1:e)))}function pA(e){for(;(tA=sA())&&tA<33;)oA();return lA(e)>2||lA(tA)>3?"":" "}function vA(e,t){for(;--t&&oA()&&!(tA<48||tA>102||tA>57&&tA<65||tA>70&&tA<97););return cA(e,uA()+(t<6&&32==sA()&&32==oA()))}function mA(e){for(;oA();)switch(tA){case e:return eA;case 34:case 39:34!==e&&39!==e&&mA(tA);break;case 40:41===e&&mA(e);break;case 92:oA()}return eA}function gA(e,t){for(;oA()&&e+tA!==57&&(e+tA!==84||47!==sA()););return"/*"+cA(t,eA-1)+"*"+zN(47===e?e:oA())}function yA(e){for(;!lA(sA());)oA();return cA(e,eA)}var kA="-ms-",bA="-moz-",wA="-webkit-",_A="comm",xA="rule",IA="decl",SA="@keyframes";function EA(e,t){for(var n="",r=YN(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function TA(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case IA:return e.return=e.return||e.value;case _A:return"";case SA:return e.return=e.value+"{"+EA(e.children,r)+"}";case xA:e.value=e.props.join(",")}return QN(n=EA(e.children,r))?e.return=e.value+"{"+n+"}":""}function CA(e){return function(t){t.root||(t=t.return)&&e(t)}}function NA(e){return hA(AA("",null,null,null,[""],e=fA(e),0,[0],e))}function AA(e,t,n,r,i,a,o,s,u){for(var c=0,l=0,f=o,h=0,d=0,p=0,v=1,m=1,g=1,y=0,k="",b=i,w=a,_=r,x=k;m;)switch(p=y,y=oA()){case 40:if(108!=p&&58==WN(x,f-1)){-1!=KN(x+=GN(dA(y),"&","&\f"),"&\f")&&(g=-1);break}case 34:case 39:case 91:x+=dA(y);break;case 9:case 10:case 13:case 32:x+=pA(p);break;case 92:x+=vA(uA()-1,7);continue;case 47:switch(sA()){case 42:case 47:$N(PA(gA(oA(),uA()),t,n),u);break;default:x+="/"}break;case 123*v:s[c++]=QN(x)*g;case 125*v:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+l:-1==g&&(x=GN(x,/\f/g,"")),d>0&&QN(x)-f&&$N(d>32?DA(x+";",r,n,f-1):DA(GN(x," ","")+";",r,n,f-2),u);break;case 59:x+=";";default:if($N(_=RA(x,t,n,c,l,i,s,k,b=[],w=[],f),a),123===y)if(0===l)AA(x,t,_,_,b,a,f,s,w);else switch(99===h&&110===WN(x,3)?100:h){case 100:case 108:case 109:case 115:AA(e,_,_,r&&$N(RA(e,_,_,0,0,i,s,k,i,b=[],f),w),i,w,f,s,r?b:w);break;default:AA(x,_,_,_,[""],w,0,s,w)}}c=l=d=0,v=g=1,k=x="",f=o;break;case 58:f=1+QN(x),d=p;default:if(v<1)if(123==y)--v;else if(125==y&&0==v++&&125==aA())continue;switch(x+=zN(y),y*v){case 38:g=l>0?1:(x+="\f",-1);break;case 44:s[c++]=(QN(x)-1)*g,g=1;break;case 64:45===sA()&&(x+=dA(oA())),h=sA(),l=f=QN(k=x+=yA(uA())),y++;break;case 45:45===p&&2==QN(x)&&(v=0)}}return a}function RA(e,t,n,r,i,a,o,s,u,c,l){for(var f=i-1,h=0===i?a:[""],d=YN(h),p=0,v=0,m=0;p<r;++p)for(var g=0,y=HN(e,f+1,f=VN(v=o[p])),k=e;g<d;++g)(k=qN(v>0?h[g]+" "+y:GN(y,/&\f/g,h[g])))&&(u[m++]=k);return rA(e,t,n,0===i?xA:s,u,c,l)}function PA(e,t,n){return rA(e,t,n,_A,zN(tA),HN(e,2,-2),0)}function DA(e,t,n,r){return rA(e,t,n,IA,HN(e,0,r),HN(e,r+1,-1),r)}var OA=function(e,t,n){for(var r=0,i=0;r=i,i=sA(),38===r&&12===i&&(t[n]=1),!lA(i);)oA();return cA(e,eA)},LA=function(e,t){return hA(function(e,t){var n=-1,r=44;do{switch(lA(r)){case 0:38===r&&12===sA()&&(t[n]=1),e[n]+=OA(eA-1,t,n);break;case 2:e[n]+=dA(r);break;case 4:if(44===r){e[++n]=58===sA()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=zN(r)}}while(r=oA());return e}(fA(e),t))},MA=new WeakMap,jA=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||MA.get(n))&&!r){MA.set(e,!0);for(var i=[],a=LA(t,i),o=n.props,s=0,u=0;s<a.length;s++)for(var c=0;c<o.length;c++,u++)e.props[u]=i[s]?a[s].replace(/&\f/g,o[c]):o[c]+" "+a[s]}}},FA=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function UA(e,t){switch(function(e,t){return 45^WN(e,0)?(((t<<2^WN(e,0))<<2^WN(e,1))<<2^WN(e,2))<<2^WN(e,3):0}(e,t)){case 5103:return wA+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return wA+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return wA+e+bA+e+kA+e+e;case 6828:case 4268:return wA+e+kA+e+e;case 6165:return wA+e+kA+"flex-"+e+e;case 5187:return wA+e+GN(e,/(\w+).+(:[^]+)/,wA+"box-$1$2"+kA+"flex-$1$2")+e;case 5443:return wA+e+kA+"flex-item-"+GN(e,/flex-|-self/,"")+e;case 4675:return wA+e+kA+"flex-line-pack"+GN(e,/align-content|flex-|-self/,"")+e;case 5548:return wA+e+kA+GN(e,"shrink","negative")+e;case 5292:return wA+e+kA+GN(e,"basis","preferred-size")+e;case 6060:return wA+"box-"+GN(e,"-grow","")+wA+e+kA+GN(e,"grow","positive")+e;case 4554:return wA+GN(e,/([^-])(transform)/g,"$1"+wA+"$2")+e;case 6187:return GN(GN(GN(e,/(zoom-|grab)/,wA+"$1"),/(image-set)/,wA+"$1"),e,"")+e;case 5495:case 3959:return GN(e,/(image-set\([^]*)/,wA+"$1$`$1");case 4968:return GN(GN(e,/(.+:)(flex-)?(.*)/,wA+"box-pack:$3"+kA+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+wA+e+e;case 4095:case 3583:case 4068:case 2532:return GN(e,/(.+)-inline(.+)/,wA+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(QN(e)-1-t>6)switch(WN(e,t+1)){case 109:if(45!==WN(e,t+4))break;case 102:return GN(e,/(.+:)(.+)-([^]+)/,"$1"+wA+"$2-$3$1"+bA+(108==WN(e,t+3)?"$3":"$2-$3"))+e;case 115:return~KN(e,"stretch")?UA(GN(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==WN(e,t+1))break;case 6444:switch(WN(e,QN(e)-3-(~KN(e,"!important")&&10))){case 107:return GN(e,":",":"+wA)+e;case 101:return GN(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+wA+(45===WN(e,14)?"inline-":"")+"box$3$1"+wA+"$2$3$1"+kA+"$2box$3")+e}break;case 5936:switch(WN(e,t+11)){case 114:return wA+e+kA+GN(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return wA+e+kA+GN(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return wA+e+kA+GN(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return wA+e+kA+e+e}return e}var VA=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case IA:e.return=UA(e.value,e.length);break;case SA:return EA([iA(e,{value:GN(e.value,"@","@"+wA)})],r);case xA:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return EA([iA(e,{props:[GN(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return EA([iA(e,{props:[GN(t,/:(plac\w+)/,":"+wA+"input-$1")]}),iA(e,{props:[GN(t,/:(plac\w+)/,":-moz-$1")]}),iA(e,{props:[GN(t,/:(plac\w+)/,kA+"input-$1")]})],r)}return""}))}}],zA=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||VA;var i,a,o={},s=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;s.push(e)}));var u=[jA,FA];var c,l=[TA,CA((function(e){c.insert(e)}))],f=function(e){var t=YN(e);return function(n,r,i,a){for(var o="",s=0;s<t;s++)o+=e[s](n,r,i,a)||"";return o}}(u.concat(r,l));a=function(e,t,n,r){c=n,EA(NA(e?e+"{"+t.styles+"}":t.styles),f),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new UN({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:a};return h.sheet.hydrate(s),h};var BA={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},qA=/[A-Z]|^ms/g,GA=/_EMO_([^_]+?)_([^]*?)_EMO_/g,KA=function(e){return 45===e.charCodeAt(1)},WA=function(e){return null!=e&&"boolean"!==typeof e},HA=MN((function(e){return KA(e)?e:e.replace(qA,"-$&").toLowerCase()})),QA=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(GA,(function(e,t,n){return $A={name:t,styles:n,next:$A},t}))}return 1===BA[e]||KA(e)||"number"!==typeof t||0===t?t:t+"px"};function YA(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return $A={name:n.name,styles:n.styles,next:$A},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)$A={name:r.name,styles:r.styles,next:$A},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=YA(e,t,n[i])+";";else for(var a in n){var o=n[a];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=a+"{"+t[o]+"}":WA(o)&&(r+=HA(a)+":"+QA(a,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=YA(e,t,o);switch(a){case"animation":case"animationName":r+=HA(a)+":"+s+";";break;default:r+=a+"{"+s+"}"}}else for(var u=0;u<o.length;u++)WA(o[u])&&(r+=HA(a)+":"+QA(a,o[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=$A,a=n(e);return $A=i,YA(e,t,a)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var $A,XA=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var JA=!!r.useInsertionEffect&&r.useInsertionEffect,ZA=JA||function(e){return e()},eR=(JA||t.useLayoutEffect,t.createContext("undefined"!==typeof HTMLElement?zA({key:"css"}):null));eR.Provider;var tR=function(e){return(0,t.forwardRef)((function(n,r){var i=(0,t.useContext)(eR);return e(n,i,r)}))};var nR=t.createContext({});var rR=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},iR=FN,aR=function(e){return"theme"!==e},oR=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?iR:aR},sR=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},uR=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return rR(t,n,r),ZA((function(){return function(e,t,n){rR(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)})),null},cR=function e(n,r){var i,a,o=n.__emotion_real===n,s=o&&n.__emotion_base||n;void 0!==r&&(i=r.label,a=r.target);var u=sR(n,r,o),c=u||oR(s),l=!c("as");return function(){var f=arguments,h=o&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==i&&h.push("label:"+i+";"),null==f[0]||void 0===f[0].raw)h.push.apply(h,f);else{0,h.push(f[0][0]);for(var d=f.length,p=1;p<d;p++)h.push(f[p],f[0][p])}var v=tR((function(e,n,r){var i=l&&e.as||s,o="",f=[],d=e;if(null==e.theme){for(var p in d={},e)d[p]=e[p];d.theme=t.useContext(nR)}"string"===typeof e.className?o=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}(n.registered,f,e.className):null!=e.className&&(o=e.className+" ");var v=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";$A=void 0;var a=e[0];null==a||void 0===a.raw?(r=!1,i+=YA(n,t,a)):i+=a[0];for(var o=1;o<e.length;o++)i+=YA(n,t,e[o]),r&&(i+=a[o]);XA.lastIndex=0;for(var s,u="";null!==(s=XA.exec(i));)u+="-"+s[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+u;return{name:c,styles:i,next:$A}}(h.concat(f),n.registered,d);o+=n.key+"-"+v.name,void 0!==a&&(o+=" "+a);var m=l&&void 0===u?oR(i):c,g={};for(var y in e)l&&"as"===y||m(y)&&(g[y]=e[y]);return g.className=o,g.ref=r,t.createElement(t.Fragment,null,t.createElement(uR,{cache:n,serialized:v,isStringTag:"string"===typeof i}),t.createElement(i,g))}));return v.displayName=void 0!==i?i:"Styled("+("string"===typeof s?s:s.displayName||s.name||"Component")+")",v.defaultProps=n.defaultProps,v.__emotion_real=v,v.__emotion_base=s,v.__emotion_styles=h,v.__emotion_forwardProp=u,Object.defineProperty(v,"toString",{value:function(){return"."+a}}),v.withComponent=function(t,n){return e(t,PN({},r,n,{shouldForwardProp:sR(v,n,!0)})).apply(void 0,h)},v}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){cR[e]=cR(e)}));function lR(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function fR(e){if(!lR(e))return e;var t={};return Object.keys(e).forEach((function(n){t[n]=fR(e[n])})),t}function hR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?PN({},e):e;return lR(e)&&lR(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(lR(t[i])&&i in e&&lR(e[i])?r[i]=hR(e[i],t[i],n):n.clone?r[i]=lR(t[i])?fR(t[i]):t[i]:r[i]=t[i])})),r}var dR=["values","unit","step"],pR=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return PN({},e,p({},t.key,t.val))}),{})};var vR={borderRadius:4},mR={xs:0,sm:600,md:900,lg:1200,xl:1536},gR={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(mR[e],"px)")}};function yR(e,t,n){var r=e.theme||{};if(Array.isArray(t)){var i=r.breakpoints||gR;return t.reduce((function(e,r,a){return e[i.up(i.keys[a])]=n(t[a]),e}),{})}if("object"===typeof t){var a=r.breakpoints||gR;return Object.keys(t).reduce((function(e,r){if(-1!==Object.keys(a.values||mR).indexOf(r)){e[a.up(r)]=n(t[r],r)}else{var i=r;e[i]=t[i]}return e}),{})}return n(t)}function kR(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{}))||{}}function bR(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function wR(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function _R(e){if("string"!==typeof e)throw new Error(wR(7));return e.charAt(0).toUpperCase()+e.slice(1)}function xR(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){var r="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=r)return r}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function IR(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:xR(e,n)||i,t&&(r=t(r,i,e)),r}var SR=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,i=e.themeKey,a=e.transform,o=function(e){if(null==e[t])return null;var n=e[t],o=xR(e.theme,i)||{};return yR(e,n,(function(e){var n=IR(o,a,e);return e===n&&"string"===typeof e&&(n=IR(o,a,"".concat(t).concat("default"===e?"":_R(e)),e)),!1===r?n:p({},r,n)}))};return o.propTypes={},o.filterProps=[t],o};var ER=function(e,t){return t?hR(e,t,{clone:!1}):e};var TR={m:"margin",p:"padding"},CR={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},NR={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},AR=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!NR[e])return[e];e=NR[e]}var t=c(e.split(""),2),n=t[0],r=t[1],i=TR[n],a=CR[r]||"";return Array.isArray(a)?a.map((function(e){return i+e})):[i+a]})),RR=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],PR=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],DR=[].concat(RR,PR);function OR(e,t,n,r){var i,a=null!=(i=xR(e,t,!1))?i:n;return"number"===typeof a?function(e){return"string"===typeof e?e:a*e}:Array.isArray(a)?function(e){return"string"===typeof e?e:a[e]}:"function"===typeof a?a:function(){}}function LR(e){return OR(e,"spacing",8)}function MR(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function jR(e,t,n,r){if(-1===t.indexOf(n))return null;var i=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=MR(t,n),e}),{})}}(AR(n),r);return yR(e,e[n],i)}function FR(e,t){var n=LR(e.theme);return Object.keys(e).map((function(r){return jR(e,t,r,n)})).reduce(ER,{})}function UR(e){return FR(e,RR)}function VR(e){return FR(e,PR)}function zR(e){return FR(e,DR)}UR.propTypes={},UR.filterProps=RR,VR.propTypes={},VR.filterProps=PR,zR.propTypes={},zR.filterProps=DR;var BR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?ER(t,r[n](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i};function qR(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var GR=SR({prop:"border",themeKey:"borders",transform:qR}),KR=SR({prop:"borderTop",themeKey:"borders",transform:qR}),WR=SR({prop:"borderRight",themeKey:"borders",transform:qR}),HR=SR({prop:"borderBottom",themeKey:"borders",transform:qR}),QR=SR({prop:"borderLeft",themeKey:"borders",transform:qR}),YR=SR({prop:"borderColor",themeKey:"palette"}),$R=SR({prop:"borderTopColor",themeKey:"palette"}),XR=SR({prop:"borderRightColor",themeKey:"palette"}),JR=SR({prop:"borderBottomColor",themeKey:"palette"}),ZR=SR({prop:"borderLeftColor",themeKey:"palette"}),eP=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=OR(e.theme,"shape.borderRadius",4);return yR(e,e.borderRadius,(function(e){return{borderRadius:MR(t,e)}}))}return null};eP.propTypes={},eP.filterProps=["borderRadius"];BR(GR,KR,WR,HR,QR,YR,$R,XR,JR,ZR,eP);var tP=function(e){if(void 0!==e.gap&&null!==e.gap){var t=OR(e.theme,"spacing",8);return yR(e,e.gap,(function(e){return{gap:MR(t,e)}}))}return null};tP.propTypes={},tP.filterProps=["gap"];var nP=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=OR(e.theme,"spacing",8);return yR(e,e.columnGap,(function(e){return{columnGap:MR(t,e)}}))}return null};nP.propTypes={},nP.filterProps=["columnGap"];var rP=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=OR(e.theme,"spacing",8);return yR(e,e.rowGap,(function(e){return{rowGap:MR(t,e)}}))}return null};rP.propTypes={},rP.filterProps=["rowGap"];BR(tP,nP,rP,SR({prop:"gridColumn"}),SR({prop:"gridRow"}),SR({prop:"gridAutoFlow"}),SR({prop:"gridAutoColumns"}),SR({prop:"gridAutoRows"}),SR({prop:"gridTemplateColumns"}),SR({prop:"gridTemplateRows"}),SR({prop:"gridTemplateAreas"}),SR({prop:"gridArea"}));function iP(e,t){return"grey"===t?t:e}BR(SR({prop:"color",themeKey:"palette",transform:iP}),SR({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:iP}),SR({prop:"backgroundColor",themeKey:"palette",transform:iP}));function aP(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var oP=SR({prop:"width",transform:aP}),sP=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return yR(e,e.maxWidth,(function(t){var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||mR[t]||aP(t)}}))}return null};sP.filterProps=["maxWidth"];var uP=SR({prop:"minWidth",transform:aP}),cP=SR({prop:"height",transform:aP}),lP=SR({prop:"maxHeight",transform:aP}),fP=SR({prop:"minHeight",transform:aP}),hP=(SR({prop:"size",cssProperty:"width",transform:aP}),SR({prop:"size",cssProperty:"height",transform:aP}),BR(oP,sP,uP,cP,lP,fP,SR({prop:"boxSizing"})),{border:{themeKey:"borders",transform:qR},borderTop:{themeKey:"borders",transform:qR},borderRight:{themeKey:"borders",transform:qR},borderBottom:{themeKey:"borders",transform:qR},borderLeft:{themeKey:"borders",transform:qR},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:eP},color:{themeKey:"palette",transform:iP},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:iP},backgroundColor:{themeKey:"palette",transform:iP},p:{style:VR},pt:{style:VR},pr:{style:VR},pb:{style:VR},pl:{style:VR},px:{style:VR},py:{style:VR},padding:{style:VR},paddingTop:{style:VR},paddingRight:{style:VR},paddingBottom:{style:VR},paddingLeft:{style:VR},paddingX:{style:VR},paddingY:{style:VR},paddingInline:{style:VR},paddingInlineStart:{style:VR},paddingInlineEnd:{style:VR},paddingBlock:{style:VR},paddingBlockStart:{style:VR},paddingBlockEnd:{style:VR},m:{style:UR},mt:{style:UR},mr:{style:UR},mb:{style:UR},ml:{style:UR},mx:{style:UR},my:{style:UR},margin:{style:UR},marginTop:{style:UR},marginRight:{style:UR},marginBottom:{style:UR},marginLeft:{style:UR},marginX:{style:UR},marginY:{style:UR},marginInline:{style:UR},marginInlineStart:{style:UR},marginInlineEnd:{style:UR},marginBlock:{style:UR},marginBlockStart:{style:UR},marginBlockEnd:{style:UR},displayPrint:{cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:tP},rowGap:{style:rP},columnGap:{style:nP},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:aP},maxWidth:{style:sP},minWidth:{transform:aP},height:{transform:aP},maxHeight:{transform:aP},minHeight:{transform:aP},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});var dP=function(){function e(e,t,n,r){var i,a=(p(i={},e,t),p(i,"theme",n),i),o=r[e];if(!o)return p({},e,t);var s=o.cssProperty,u=void 0===s?e:s,c=o.themeKey,l=o.transform,f=o.style;if(null==t)return null;if("typography"===c&&"inherit"===t)return p({},e,t);var h=xR(n,c)||{};if(f)return f(a);return yR(a,t,(function(t){var n=IR(h,l,t);return t===n&&"string"===typeof t&&(n=IR(h,l,"".concat(e).concat("default"===t?"":_R(t)),t)),!1===u?n:p({},u,n)}))}return function t(n){var r,i=n||{},a=i.sx,o=i.theme,s=void 0===o?{}:o;if(!a)return null;var u=null!=(r=s.unstable_sxConfig)?r:hP;function c(n){var r=n;if("function"===typeof n)r=n(s);else if("object"!==typeof n)return n;if(!r)return null;var i=kR(s.breakpoints),a=Object.keys(i),o=i;return Object.keys(r).forEach((function(n){var i,a,c=(i=r[n],a=s,"function"===typeof i?i(a):i);if(null!==c&&void 0!==c)if("object"===typeof c)if(u[n])o=ER(o,e(n,c,s,u));else{var l=yR({theme:s},c,(function(e){return p({},n,e)}));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}(l,c)?o=ER(o,l):o[n]=t({sx:c,theme:s})}else o=ER(o,e(n,c,s,u))})),bR(a,o)}return Array.isArray(a)?a.map(c):c(a)}}();dP.filterProps=["sx"];var pP=dP,vP=["breakpoints","palette","spacing","shape"];var mP=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.spacing,o=e.shape,s=void 0===o?{}:o,u=RN(e,vP),c=function(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,r=e.unit,i=void 0===r?"px":r,a=e.step,o=void 0===a?5:a,s=RN(e,dR),u=pR(n),c=Object.keys(u);function l(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function f(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-o/100).concat(i,")")}function h(e,t){var r=c.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[c[r]]?n[c[r]]:t)-o/100).concat(i,")")}return PN({keys:c,values:u,up:l,down:f,between:h,only:function(e){return c.indexOf(e)+1<c.length?h(e,c[c.indexOf(e)+1]):l(e)},not:function(e){var t=c.indexOf(e);return 0===t?l(c[1]):t===c.length-1?f(c[t]):h(e,c[c.indexOf(e)+1]).replace("@media","@media not all and")},unit:i},s)}(n),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=LR({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(a),f=hR({breakpoints:c,direction:"ltr",components:{},palette:PN({mode:"light"},i),spacing:l,shape:PN({},vR,s)},u),h=arguments.length,d=new Array(h>1?h-1:0),p=1;p<h;p++)d[p-1]=arguments[p];return(f=d.reduce((function(e,t){return hR(e,t)}),f)).unstable_sxConfig=PN({},hP,null==u?void 0:u.unstable_sxConfig),f.unstable_sx=function(e){return pP({sx:e,theme:this})},f},gP=["variant"];function yP(e){return 0===e.length}function kP(e){var t=e.variant,n=RN(e,gP),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?yP(r)?e[t]:_R(e[t]):"".concat(yP(r)?t:_R(t)).concat(_R(e[t].toString()))})),r}var bP=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function wP(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var _P=mP();function xP(e){var t,n=e.defaultTheme,r=e.theme,i=e.themeId;return t=r,0===Object.keys(t).length?n:r[i]||r}function IP(e,t){var n;return PN({toolbar:(n={minHeight:56},p(n,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),p(n,e.up("sm"),{minHeight:64}),n)},t)}function SP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function EP(e){if(e.type)return e;if("#"===e.charAt(0))return EP(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(wR(9,e));var r,i=e.substring(t+1,e.length-1);if("color"===n){if(r=(i=i.split(" ")).shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(wR(10,r))}else i=i.split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)})),colorSpace:r}}function TP(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function CP(e){var t="hsl"===(e=EP(e)).type||"hsla"===e.type?EP(function(e){var t=(e=EP(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-a*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),TP({type:s,values:u})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function NP(e,t){if(e=EP(e),t=SP(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return TP(e)}function AP(e,t){if(e=EP(e),t=SP(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return TP(e)}var RP={black:"#000",white:"#fff"},PP={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},DP={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},OP={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},LP={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},MP={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},jP={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},FP={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},UP=["mode","contrastThreshold","tonalOffset"],VP={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:RP.white,default:RP.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},zP={text:{primary:RP.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:RP.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function BP(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=AP(e.main,i):"dark"===t&&(e.dark=NP(e.main,a)))}function qP(e){var t=e.mode,n=void 0===t?"light":t,r=e.contrastThreshold,i=void 0===r?3:r,a=e.tonalOffset,o=void 0===a?.2:a,s=RN(e,UP),u=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:MP[200],light:MP[50],dark:MP[400]}:{main:MP[700],light:MP[400],dark:MP[800]}}(n),c=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:DP[200],light:DP[50],dark:DP[400]}:{main:DP[500],light:DP[300],dark:DP[700]}}(n),l=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:OP[500],light:OP[300],dark:OP[700]}:{main:OP[700],light:OP[400],dark:OP[800]}}(n),f=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:jP[400],light:jP[300],dark:jP[700]}:{main:jP[700],light:jP[500],dark:jP[900]}}(n),h=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:FP[400],light:FP[300],dark:FP[700]}:{main:FP[800],light:FP[500],dark:FP[900]}}(n),d=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:LP[400],light:LP[300],dark:LP[700]}:{main:"#ed6c02",light:LP[500],dark:LP[900]}}(n);function p(e){var t=function(e,t){var n=CP(e),r=CP(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,zP.text.primary)>=i?zP.text.primary:VP.text.primary;return t}var v=function(e){var t=e.color,n=e.name,r=e.mainShade,i=void 0===r?500:r,a=e.lightShade,s=void 0===a?300:a,u=e.darkShade,c=void 0===u?700:u;if(!(t=PN({},t)).main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(wR(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error(wR(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return BP(t,"light",s,o),BP(t,"dark",c,o),t.contrastText||(t.contrastText=p(t.main)),t},m={dark:zP,light:VP};return hR(PN({common:PN({},RP),mode:n,primary:v({color:u,name:"primary"}),secondary:v({color:c,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:v({color:l,name:"error"}),warning:v({color:d,name:"warning"}),info:v({color:f,name:"info"}),success:v({color:h,name:"success"}),grey:PP,contrastThreshold:i,getContrastText:p,augmentColor:v,tonalOffset:o},m[n]),s)}var GP=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var KP={textTransform:"uppercase"},WP='"Roboto", "Helvetica", "Arial", sans-serif';function HP(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,i=void 0===r?WP:r,a=n.fontSize,o=void 0===a?14:a,s=n.fontWeightLight,u=void 0===s?300:s,c=n.fontWeightRegular,l=void 0===c?400:c,f=n.fontWeightMedium,h=void 0===f?500:f,d=n.fontWeightBold,p=void 0===d?700:d,v=n.htmlFontSize,m=void 0===v?16:v,g=n.allVariants,y=n.pxToRem,k=RN(n,GP);var b=o/14,w=y||function(e){return"".concat(e/m*b,"rem")},_=function(e,t,n,r,a){return PN({fontFamily:i,fontWeight:e,fontSize:w(t),lineHeight:n},i===WP?{letterSpacing:"".concat((o=r/t,Math.round(1e5*o)/1e5),"em")}:{},a,g);var o},x={h1:_(u,96,1.167,-1.5),h2:_(u,60,1.2,-.5),h3:_(l,48,1.167,0),h4:_(l,34,1.235,.25),h5:_(l,24,1.334,0),h6:_(h,20,1.6,.15),subtitle1:_(l,16,1.75,.15),subtitle2:_(h,14,1.57,.1),body1:_(l,16,1.5,.15),body2:_(l,14,1.43,.15),button:_(h,14,1.75,.4,KP),caption:_(l,12,1.66,.4),overline:_(l,12,2.66,1,KP),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return hR(PN({htmlFontSize:m,pxToRem:w,fontFamily:i,fontSize:o,fontWeightLight:u,fontWeightRegular:l,fontWeightMedium:h,fontWeightBold:p},x),k,{clone:!1})}function QP(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var YP=["none",QP(0,2,1,-1,0,1,1,0,0,1,3,0),QP(0,3,1,-2,0,2,2,0,0,1,5,0),QP(0,3,3,-2,0,3,4,0,0,1,8,0),QP(0,2,4,-1,0,4,5,0,0,1,10,0),QP(0,3,5,-1,0,5,8,0,0,1,14,0),QP(0,3,5,-1,0,6,10,0,0,1,18,0),QP(0,4,5,-2,0,7,10,1,0,2,16,1),QP(0,5,5,-3,0,8,10,1,0,3,14,2),QP(0,5,6,-3,0,9,12,1,0,3,16,2),QP(0,6,6,-3,0,10,14,1,0,4,18,3),QP(0,6,7,-4,0,11,15,1,0,4,20,3),QP(0,7,8,-4,0,12,17,2,0,5,22,4),QP(0,7,8,-4,0,13,19,2,0,5,24,4),QP(0,7,9,-4,0,14,21,2,0,5,26,4),QP(0,8,9,-5,0,15,22,2,0,6,28,5),QP(0,8,10,-5,0,16,24,2,0,6,30,5),QP(0,8,11,-5,0,17,26,2,0,6,32,5),QP(0,9,11,-5,0,18,28,2,0,7,34,6),QP(0,9,12,-6,0,19,29,2,0,7,36,6),QP(0,10,13,-6,0,20,31,3,0,8,38,7),QP(0,10,13,-6,0,21,33,3,0,8,40,7),QP(0,10,14,-6,0,22,35,3,0,8,42,7),QP(0,11,14,-7,0,23,36,3,0,9,44,8),QP(0,11,15,-7,0,24,38,3,0,9,46,8)],$P=["duration","easing","delay"],XP={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},JP={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function ZP(e){return"".concat(Math.round(e),"ms")}function eD(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function tD(e){var t=PN({},XP,e.easing),n=PN({},JP,e.duration);return PN({getAutoHeightDuration:eD,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.duration,a=void 0===i?n.standard:i,o=r.easing,s=void 0===o?t.easeInOut:o,u=r.delay,c=void 0===u?0:u;RN(r,$P);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof a?a:ZP(a)," ").concat(s," ").concat("string"===typeof c?c:ZP(c))})).join(",")}},e,{easing:t,duration:n})}var nD={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},rD=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function iD(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.transitions,o=void 0===a?{}:a,s=e.typography,u=void 0===s?{}:s,c=RN(e,rD);if(e.vars)throw new Error(wR(18));var l=qP(i),f=mP(e),h=hR(f,{mixins:IP(f.breakpoints,n),palette:l,shadows:YP.slice(),typography:HP(l,u),transitions:tD(o),zIndex:PN({},nD)});h=hR(h,c);for(var d=arguments.length,p=new Array(d>1?d-1:0),v=1;v<d;v++)p[v-1]=arguments[v];return(h=p.reduce((function(e,t){return hR(e,t)}),h)).unstable_sxConfig=PN({},hP,null==c?void 0:c.unstable_sxConfig),h.unstable_sx=function(e){return pP({sx:e,theme:this})},h}var aD=iD(),oD="$$material",sD=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.themeId,n=e.defaultTheme,r=void 0===n?_P:n,i=e.rootShouldForwardProp,a=void 0===i?wP:i,o=e.slotShouldForwardProp,s=void 0===o?wP:o,u=function(e){return pP(PN({},e,{theme:xP(PN({},e,{defaultTheme:r,themeId:t}))}))};return u.__mui_systemSx=!0,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var i=n.name,o=n.slot,l=n.skipVariantsResolver,f=n.skipSx,h=n.overridesResolver,d=RN(n,bP),p=void 0!==l?l:o&&"Root"!==o||!1,v=f||!1;var m=wP;"Root"===o?m=a:o?m=s:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(m=void 0);var g=function(e,t){return cR(e,t)}(e,PN({shouldForwardProp:m,label:undefined},d)),y=function(n){for(var a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];var l=o?o.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(n){return e(PN({},n,{theme:xP(PN({},n,{defaultTheme:r,themeId:t}))}))}:e})):[],f=n;i&&h&&l.push((function(e){var n=xP(PN({},e,{defaultTheme:r,themeId:t})),a=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null}(i,n);if(a){var o={};return Object.entries(a).forEach((function(t){var r=c(t,2),i=r[0],a=r[1];o[i]="function"===typeof a?a(PN({},e,{theme:n})):a})),h(e,o)}return null})),i&&!p&&l.push((function(e){var n=xP(PN({},e,{defaultTheme:r,themeId:t}));return function(e,t,n,r){var i,a,o=e.ownerState,s=void 0===o?{}:o,u=[],c=null==n||null==(i=n.components)||null==(a=i[r])?void 0:a.variants;return c&&c.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&u.push(t[kP(n.props)])})),u}(e,function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=kP(e.props);r[t]=e.style})),r}(i,n),n,i)})),v||l.push(u);var d=l.length-o.length;if(Array.isArray(n)&&d>0){var m=new Array(d).fill("");(f=[].concat(ce(n),ce(m))).raw=[].concat(ce(n.raw),ce(m))}else"function"===typeof n&&n.__emotion_real!==n&&(f=function(e){return n(PN({},e,{theme:xP(PN({},e,{defaultTheme:r,themeId:t}))}))});var y=g.apply(void 0,[f].concat(ce(l)));return e.muiName&&(y.muiName=e.muiName),y};return g.withConfig&&(y.withConfig=g.withConfig),y}}({themeId:oD,defaultTheme:aD,rootShouldForwardProp:function(e){return wP(e)&&"classes"!==e}}),uD=sD;function cD(e,t){var n=PN({},t);return Object.keys(e).forEach((function(r){if(r.toString().match(/^(components|slots)$/))n[r]=PN({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){var i=e[r]||{},a=t[r];n[r]={},a&&Object.keys(a)?i&&Object.keys(i)?(n[r]=PN({},a),Object.keys(i).forEach((function(e){n[r][e]=cD(i[e],a[e])}))):n[r]=a:n[r]=i}else void 0===n[r]&&(n[r]=e[r])})),n}function lD(e){var t=e.theme,n=e.name,r=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?cD(t.components[n].defaultProps,r):r}var fD=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=t.useContext(nR);return r&&(e=r,0!==Object.keys(e).length)?r:n},hD=mP();var dD=function(){return fD(arguments.length>0&&void 0!==arguments[0]?arguments[0]:hD)};function pD(e){return function(e){var t=e.props,n=e.name,r=e.defaultTheme,i=e.themeId,a=dD(r);return i&&(a=a[i]||a),lD({theme:a,name:n,props:t})}({props:e.props,name:e.name,defaultTheme:aD,themeId:oD})}var vD=_R,mD=function(e){return e},gD=function(){var e=mD;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=mD}}}(),yD={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function kD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r=yD[t];return r?"".concat(n,"-").concat(r):"".concat(gD.generate(e),"-").concat(t)}function bD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r={};return t.forEach((function(t){r[t]=kD(e,t,n)})),r}function wD(e){return kD("MuiSvgIcon",e)}bD("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var _D=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],xD=uD("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat(vD(n.color))],t["fontSize".concat(vD(n.fontSize))]]}})((function(e){var t,n,r,i,a,o,s,u,c,l,f,h,d,p,v,m,g,y=e.theme,k=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:k.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(t=y.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=y.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(a=y.typography)||null==(o=a.pxToRem)?void 0:o.call(a,20))||"1.25rem",medium:(null==(s=y.typography)||null==(u=s.pxToRem)?void 0:u.call(s,24))||"1.5rem",large:(null==(c=y.typography)||null==(l=c.pxToRem)?void 0:l.call(c,35))||"2.1875rem"}[k.fontSize],color:null!=(f=null==(h=(y.vars||y).palette)||null==(d=h[k.color])?void 0:d.main)?f:{action:null==(p=(y.vars||y).palette)||null==(v=p.action)?void 0:v.active,disabled:null==(m=(y.vars||y).palette)||null==(g=m.action)?void 0:g.disabled,inherit:void 0}[k.color]}})),ID=t.forwardRef((function(e,n){var r=pD({props:e,name:"MuiSvgIcon"}),i=r.children,a=r.className,o=r.color,s=void 0===o?"inherit":o,u=r.component,c=void 0===u?"svg":u,f=r.fontSize,h=void 0===f?"medium":f,d=r.htmlColor,p=r.inheritViewBox,v=void 0!==p&&p,m=r.titleAccess,g=r.viewBox,y=void 0===g?"0 0 24 24":g,k=RN(r,_D),b=t.isValidElement(i)&&"svg"===i.type,w=PN({},r,{color:s,component:c,fontSize:h,instanceFontSize:e.fontSize,inheritViewBox:v,viewBox:y,hasSvgAsChild:b}),_={};v||(_.viewBox=y);var x=function(e){var t=e.color,n=e.fontSize,r=e.classes;return LN({root:["root","inherit"!==t&&"color".concat(vD(t)),"fontSize".concat(vD(n))]},wD,r)}(w);return(0,l.jsxs)(xD,PN({as:c,className:ON(x.root,a),focusable:"false",color:d,"aria-hidden":!m||void 0,role:m?"img":void 0,ref:n},_,k,b&&i.props,{ownerState:w,children:[b?i.props.children:i,m?(0,l.jsx)("title",{children:m}):null]}))}));ID.muiName="SvgIcon";var SD=ID;var ED=function(e,n){function r(t,r){return(0,l.jsx)(SD,PN({"data-testid":"".concat(n,"Icon"),ref:r},t,{children:e}))}return r.muiName=SD.muiName,t.memo(t.forwardRef(r))}((0,l.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function TD(e){return kD("MuiAvatar",e)}bD("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var CD=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],ND=uD("div",{name:"MuiAvatar",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})((function(e){var t=e.theme,n=e.ownerState;return PN({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===n.variant&&{borderRadius:(t.vars||t).shape.borderRadius},"square"===n.variant&&{borderRadius:0},n.colorDefault&&PN({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600]}))})),AD=uD("img",{name:"MuiAvatar",slot:"Img",overridesResolver:function(e,t){return t.img}})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),RD=uD(ED,{name:"MuiAvatar",slot:"Fallback",overridesResolver:function(e,t){return t.fallback}})({width:"75%",height:"75%"});var PD=t.forwardRef((function(e,n){var r=pD({props:e,name:"MuiAvatar"}),i=r.alt,a=r.children,o=r.className,s=r.component,u=void 0===s?"div":s,f=r.imgProps,h=r.sizes,d=r.src,p=r.srcSet,v=r.variant,m=void 0===v?"circular":v,g=RN(r,CD),y=null,k=function(e){var n=e.crossOrigin,r=e.referrerPolicy,i=e.src,a=e.srcSet,o=c(t.useState(!1),2),s=o[0],u=o[1];return t.useEffect((function(){if(i||a){u(!1);var e=!0,t=new Image;return t.onload=function(){e&&u("loaded")},t.onerror=function(){e&&u("error")},t.crossOrigin=n,t.referrerPolicy=r,t.src=i,a&&(t.srcset=a),function(){e=!1}}}),[n,r,i,a]),s}(PN({},f,{src:d,srcSet:p})),b=d||p,w=b&&"error"!==k,_=PN({},r,{colorDefault:!w,component:u,variant:m}),x=function(e){var t=e.classes;return LN({root:["root",e.variant,e.colorDefault&&"colorDefault"],img:["img"],fallback:["fallback"]},TD,t)}(_);return y=w?(0,l.jsx)(AD,PN({alt:i,src:d,srcSet:p,sizes:h,ownerState:_,className:x.img},f)):null!=a?a:b&&i?i[0]:(0,l.jsx)(RD,{ownerState:_,className:x.fallback}),(0,l.jsx)(ND,PN({as:u,ownerState:_,className:ON(x.root,o),ref:n},g,{children:y}))})),DD=PD;var OD=function(e){return(0,l.jsx)("div",{children:(0,l.jsxs)("nav",{className:"leftNavbar",children:[e.username&&(0,l.jsxs)("div",{id:"userProfile",className:"nav__elements",onClick:function(){e.profileClicked()},children:[(0,l.jsx)(DD,{alt:e.username.displayName,src:"apf.jpg"}),(0,l.jsx)("h3",{children:e.username.displayName})]}),(0,l.jsxs)("div",{id:"home",className:"nav__elements",onClick:function(){e.homeClicked()},children:[(0,l.jsx)("img",{src:"https://img.icons8.com/?size=40&id=12229&format=png",alt:""}),(0,l.jsx)("h3",{children:"Home"})]}),(0,l.jsxs)("div",{className:"nav__elements",children:[(0,l.jsx)("img",{className:"nav__icon",src:"https://img.icons8.com/?size=40&id=55460&format=png",alt:""}),(0,l.jsx)("h3",{children:"Friends"})]}),(0,l.jsxs)("div",{className:"nav__elements",children:[(0,l.jsx)("img",{src:"https://img.icons8.com/?size=40&id=13652&format=png",alt:""}),(0,l.jsx)("h3",{children:"Groups"})]}),(0,l.jsxs)("div",{className:"nav__elements",children:[(0,l.jsx)("img",{src:"https://img.icons8.com/?size=40&id=uNToIe0zQRBV&format=png",alt:""}),(0,l.jsx)("h3",{children:"Watch"})]}),(0,l.jsxs)("div",{className:"nav__elements",children:[(0,l.jsx)("img",{src:"https://img.icons8.com/?size=40&id=EYOe5z0CyyYB&format=png",alt:""}),(0,l.jsx)("h3",{children:"Pages"})]}),(0,l.jsxs)("div",{className:"nav__elements",children:[(0,l.jsx)("img",{src:"https://img.icons8.com/?size=40&id=26089&format=png",alt:""}),(0,l.jsx)("h3",{children:"Saved"})]}),(0,l.jsxs)("div",{className:"nav__elements",children:[(0,l.jsx)("img",{src:"https://img.icons8.com/?size=40&id=12784&format=png",alt:""}),(0,l.jsx)("h3",{children:"Settings"})]}),(0,l.jsx)("div",{className:"copyright",children:(0,l.jsx)("p",{children:"@LM. All rights reserved. 2023."})})]})})},LD=t.createContext({users:[],posts:[]});var MD=function(e){var n=(0,t.useContext)(LD),r=c((0,t.useState)([]),2),i=r[0],a=r[1],o=c((0,t.useState)(""),2),s=o[0],u=o[1],f=c((0,t.useState)(!1),2),h=f[0],d=f[1];return(0,t.useEffect)((function(){var t;return e.postID&&(t=EN.collection("posts").doc(e.postID).collection("comments").onSnapshot((function(e){a(e.docs.map((function(e){return{id:e.id,comment:e.data()}})))}))),function(){t()}}),[e.postID]),(0,l.jsxs)("div",{children:[h&&(0,l.jsxs)("div",{className:"delete__post",children:[(0,l.jsxs)("div",{className:"delete__text",children:[(0,l.jsx)("h1",{children:"Delete Post?"}),(0,l.jsx)("p",{children:"Are you sure you want to delete this post?"})]}),(0,l.jsx)("button",{className:"delete__btn",onClick:function(){EN.collection("posts").doc(e.postID).delete(),d(!1),window.onscroll=function(){}},children:"Delete"}),(0,l.jsx)("button",{className:"cancel__btn",onClick:function(){d(!1),window.onscroll=function(){}},children:"Cancel"})]}),(0,l.jsxs)("div",{className:"post",children:[(0,l.jsxs)("div",{className:"post__header",children:[(0,l.jsxs)("div",{className:"postheader__name",children:[(0,l.jsx)(DD,{className:"post__avatar",alt:e.userProfile[0].profile.username,src:"abc.jpg"}),(0,l.jsx)("h1",{className:"profile__username",children:e.userProfile[0].profile.username})]}),e.userProfile[0].profile.username===e.user.displayName&&(0,l.jsx)("button",{className:"delete",onClick:function(){d(!0);var e=window.scrollY||document.documentElement.scrollTop,t=window.scrollX||document.documentElement.scrollLeft;window.onscroll=function(){window.scrollTo(t,e)}},children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=20&id=67884&format=png",alt:""})})]}),(0,l.jsx)("div",{className:"post__caption",children:(0,l.jsx)("p",{children:e.caption})}),(0,l.jsx)("img",{className:"post__img",src:e.img,alt:""}),(0,l.jsxs)("div",{className:"post__comments",children:[(0,l.jsx)("p",{children:(0,l.jsx)("strong",{children:"Comments:"})}),i.map((function(e){e.id;var t,r=e.comment;return(0,l.jsx)("div",{className:"comment",children:(0,l.jsxs)("p",{children:[(0,l.jsxs)("strong",{children:[(t=r.userID,n.users.filter((function(e){e.id;var n=e.profile;return t===n.userID}))[0].profile.username),":"]})," ",r.text]})})}))]}),e.user&&(0,l.jsxs)("form",{className:"post__commentBox",children:[(0,l.jsx)("input",{className:"post__input",type:"text",placeholder:"Add a comment...",value:s,onChange:function(e){return u(e.target.value)}}),(0,l.jsx)("button",{disabled:!s,className:"post__button",type:"submit",onClick:function(t){t.preventDefault(),EN.collection("posts").doc(e.postID).collection("comments").add({text:s,userID:n.users.filter((function(t){t.id;var n=t.profile;return e.user.displayName===n.username}))[0].profile.userID,timeStamp:Wt.firestore.FieldValue.serverTimestamp()}),u("")},children:"Post"})]})]})]})};var jD=function(){return(0,l.jsxs)("div",{className:"rightbar",children:[(0,l.jsxs)("div",{className:"friends",children:[(0,l.jsx)("h3",{children:"Friends"}),(0,l.jsxs)("div",{className:"friend",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(DD,{className:"friend__avatar",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/106/962/482/death-note-lawliet-l-black-background-simple-wallpaper-preview.jpg"}),(0,l.jsx)("p",{children:"L"}),(0,l.jsx)("img",{src:"https://img.icons8.com/?size=18&id=2sZ0sdlG9kWP&format=png",alt:""})]}),(0,l.jsx)("div",{className:"online"})]}),(0,l.jsxs)("div",{className:"friend",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(DD,{className:"friend__avatar",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/93/409/220/anime-death-note-shinigami-ryuk-wallpaper-thumb.jpg"}),(0,l.jsx)("p",{children:"shinigami"})]}),(0,l.jsx)("div",{className:"online"})]}),(0,l.jsxs)("div",{className:"friend",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(DD,{className:"friend__avatar",alt:"username",src:"https://c1.wallpaperflare.com/preview/182/936/1023/hacker-silhouette-hack-anonymous.jpg"}),(0,l.jsx)("p",{children:"hacker_tom"})]}),(0,l.jsx)("div",{className:"online"})]}),(0,l.jsxs)("div",{className:"friend",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(DD,{className:"friend__avatar",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/439/19/825/sono-bisque-doll-wa-koi-wo-suru-kitagawa-marin-cosplay-hd-wallpaper-preview.jpg"}),(0,l.jsx)("p",{children:"scarlett.77"})]}),(0,l.jsx)("div",{className:"online"})]}),(0,l.jsxs)("div",{className:"friend",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(DD,{className:"friend__avatar",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/596/276/906/anime-ssss-gridman-akane-shinjou-hd-wallpaper-preview.jpg"}),(0,l.jsx)("p",{children:"akane_rin"})]}),(0,l.jsx)("div",{className:"online"})]})]}),(0,l.jsxs)("div",{className:"suggestions",children:[(0,l.jsx)("h3",{children:"Suggested for you:"}),(0,l.jsxs)("div",{className:"suggestion",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(DD,{className:"friend__avatar",alt:"username",src:"https://images.unsplash.com/photo-1513364776144-60967b0f800f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1171&q=80"}),(0,l.jsx)("p",{children:"Art_World"}),(0,l.jsx)("img",{src:"https://img.icons8.com/?size=18&id=2sZ0sdlG9kWP&format=png",alt:""})]}),(0,l.jsx)("div",{className:"follow",children:"follow"})]}),(0,l.jsxs)("div",{className:"suggestion",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(DD,{className:"friend__avatar",alt:"username",src:"https://images.unsplash.com/photo-1621768216002-5ac171876625?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8YXBwbGUlMjBsb2dvfGVufDB8fDB8fHww&auto=format&fit=crop&w=500&q=60"}),(0,l.jsx)("p",{children:"Apple Inc."}),(0,l.jsx)("img",{src:"https://img.icons8.com/?size=18&id=2sZ0sdlG9kWP&format=png",alt:""})]}),(0,l.jsx)("div",{className:"follow",children:"follow"})]}),(0,l.jsxs)("div",{className:"suggestion",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(DD,{className:"friend__avatar",alt:"username",src:"https://wallpapercave.com/dwp1x/wp9029030.jpg"}),(0,l.jsx)("p",{children:"ufotable.Inc."}),(0,l.jsx)("img",{src:"https://img.icons8.com/?size=18&id=2sZ0sdlG9kWP&format=png",alt:""})]}),(0,l.jsx)("div",{className:"follow",children:"follow"})]}),(0,l.jsxs)("div",{className:"suggestion",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(DD,{className:"friend__avatar",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/186/380/857/your-name-sky-stars-kimi-no-na-wa-wallpaper-preview.jpg"}),(0,l.jsx)("p",{children:"anime.Official"}),(0,l.jsx)("img",{src:"https://img.icons8.com/?size=18&id=2sZ0sdlG9kWP&format=png",alt:""})]}),(0,l.jsx)("div",{className:"follow",children:"follow"})]}),(0,l.jsxs)("div",{className:"suggestion",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(DD,{className:"friend__avatar",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/269/278/550/anime-attack-on-titan-scouting-legion-wings-of-dom-hd-wallpaper-preview.jpg"}),(0,l.jsx)("p",{children:"Isayama_Hajime"}),(0,l.jsx)("img",{src:"https://img.icons8.com/?size=18&id=2sZ0sdlG9kWP&format=png",alt:""})]}),(0,l.jsx)("div",{className:"follow",children:"follow"})]}),(0,l.jsxs)("div",{className:"suggestion",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(DD,{className:"friend__avatar",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/237/534/454/google-general-atomics-mq-9-reaper-simple-background-logo-wallpaper-preview.jpg"}),(0,l.jsx)("p",{children:"Google"}),(0,l.jsx)("img",{src:"https://img.icons8.com/?size=18&id=2sZ0sdlG9kWP&format=png",alt:""})]}),(0,l.jsx)("div",{className:"follow",children:"follow"})]}),(0,l.jsxs)("div",{className:"suggestion",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(DD,{className:"friend__avatar",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/535/151/730/minimalism-logo-logo-studio-wallpaper-preview.jpg"}),(0,l.jsx)("p",{children:"MARVEL"}),(0,l.jsx)("img",{src:"https://img.icons8.com/?size=18&id=2sZ0sdlG9kWP&format=png",alt:""})]}),(0,l.jsx)("div",{className:"follow",children:"follow"})]})]})]})};var FD=function(){var e=c((0,t.useState)(!1),2),n=e[0],r=e[1],i=(0,t.useRef)();return(0,t.useEffect)((function(){var e=function(e){i.current.contains(e.target)||(r(!1),window.onscroll=function(){})};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]),(0,l.jsxs)("div",{ref:i,children:[n&&(0,l.jsxs)("div",{className:"story__upload",id:"story__upload",children:[(0,l.jsx)("input",{type:"file",id:"story__img"}),(0,l.jsxs)("label",{for:"story__img",children:[(0,l.jsx)("img",{src:"https://img.icons8.com/?size=30&id=57212&format=png",alt:""}),"Add Image"]}),(0,l.jsxs)("div",{className:"story__caption",children:[(0,l.jsx)("input",{type:"text",placeholder:"Add a caption..."}),(0,l.jsx)("button",{children:"Add"})]})]}),(0,l.jsxs)("div",{className:"stories",children:[(0,l.jsxs)("div",{className:"story",children:[(0,l.jsx)("button",{className:"add__story",onClick:function(){r(!n);var e=window.scrollY||document.documentElement.scrollTop,t=window.scrollX||document.documentElement.scrollLeft;window.onscroll=function(){window.scrollTo(t,e)}},children:"+"}),(0,l.jsx)("p",{className:"user__name",children:"Add to Story"})]}),(0,l.jsxs)("div",{className:"story",children:[(0,l.jsx)(DD,{className:"user__image",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/106/962/482/death-note-lawliet-l-black-background-simple-wallpaper-preview.jpg"}),(0,l.jsx)("p",{className:"user__name",children:"L"})]}),(0,l.jsxs)("div",{className:"story",children:[(0,l.jsx)(DD,{className:"user__image",alt:"username",src:"https://img.freepik.com/premium-photo/cute-anime-girl-kawaiistyle-cartoon-anime-style-girl-ai-generated_755721-14204.jpg?size=626&ext=jpg&ga=GA1.1.553828089.1687008485&semt=ais"}),(0,l.jsx)("p",{className:"user__name",children:"smiley.me"})]}),(0,l.jsxs)("div",{className:"story",children:[(0,l.jsx)(DD,{className:"user__image",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/439/19/825/sono-bisque-doll-wa-koi-wo-suru-kitagawa-marin-cosplay-hd-wallpaper-preview.jpg"}),(0,l.jsx)("p",{className:"user__name",children:"scarlett.77"})]}),(0,l.jsxs)("div",{className:"story",children:[(0,l.jsx)(DD,{className:"user__image",alt:"username",src:"https://img.freepik.com/free-photo/galaxy-nature-aesthetic-background-starry-sky-mountain-remixed-media_53876-126761.jpg?size=626&ext=jpg&ga=GA1.1.553828089.1687008485&semt=sph"}),(0,l.jsx)("p",{className:"user__name",children:"Nyx"})]}),(0,l.jsxs)("div",{className:"story",children:[(0,l.jsx)(DD,{className:"user__image",alt:"username",src:"https://img.freepik.com/free-photo/closeup-multicolored-wooden-pencils-drawing-isolated_169016-19939.jpg?size=626&ext=jpg&ga=GA1.1.553828089.1687008485&semt=sph"}),(0,l.jsx)("p",{className:"user__name",children:"sketchify99"})]}),(0,l.jsxs)("div",{className:"story",children:[(0,l.jsx)(DD,{className:"user__image",alt:"username",src:"https://img.freepik.com/premium-photo/digital-artwork_456341-2249.jpg?size=626&ext=jpg&ga=GA1.1.553828089.1687008485&semt=sph"}),(0,l.jsx)("p",{className:"user__name",children:"light.yagami"})]}),(0,l.jsxs)("div",{className:"story",children:[(0,l.jsx)(DD,{className:"user__image",alt:"username",src:"https://img.freepik.com/free-photo/red-black-brush-stroke-banner-background-perfect-canva_1361-3597.jpg?size=626&ext=jpg&ga=GA1.2.553828089.1687008485&semt=sph"}),(0,l.jsx)("p",{className:"user__name",children:"shin"})]})]})]})};var UD=function(e){return(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"nav__bottomElements",children:[(0,l.jsx)("div",{className:"nav__bottomElement",onClick:function(){e.homeClicked()},children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=30&id=73&format=png",alt:""})}),(0,l.jsx)("div",{className:"nav__bottomElement",children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=30&id=132&format=png",alt:""})}),(0,l.jsx)("div",{className:"nav__bottomElement",children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=30&id=24717&format=png",alt:""})}),(0,l.jsx)("div",{className:"nav__bottomElement",children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=30&id=PxI9IPCyBAOD&format=png",alt:""})}),(0,l.jsx)("div",{className:"nav__bottomElement",onClick:function(){e.profileClicked()},children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=30&id=uOoIUTYvxnso&format=png",alt:""})})]})})};var VD=function(e){var n=(0,t.useContext)(LD),r=c((0,t.useState)([]),2),i=r[0],a=r[1],o=c((0,t.useState)(!1),2),s=o[0],u=o[1],f=c((0,t.useState)(e.username),2),h=f[0],d=f[1],p=c((0,t.useState)(e.userbio),2),v=p[0],m=p[1];return(0,t.useEffect)((function(){a(n.posts.filter((function(t){t.id;var n=t.post;return e.userID===n.userID})))}),[n,e]),(0,l.jsxs)("div",{children:[s&&(0,l.jsxs)("div",{className:"update__profile",children:[(0,l.jsx)("button",{className:"cancel__update",onClick:function(){u(!1),window.onscroll=function(){}},children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=18&id=8112&format=png",alt:""})}),(0,l.jsx)("input",{type:"file",className:"update__img",id:"update__img"}),(0,l.jsx)("label",{for:"update__img",children:(0,l.jsx)(DD,{className:"userimg",alt:e.username,src:e.username})}),(0,l.jsx)("input",{className:"update__info",type:"text",value:h,placeholder:"Usernme",onChange:function(e){d(e.target.value)}}),(0,l.jsx)("input",{className:"update__info",type:"text",placeholder:"Bio",value:v,onChange:function(e){m(e.target.value)}}),(0,l.jsx)("button",{className:"update__btn",onClick:function(){u(!1),window.onscroll=function(){},setTimeout((function(){document.getElementById("userProfile").click()}),1e3)},children:"Update"})]}),(0,l.jsx)("div",{className:"update__container"}),(0,l.jsxs)("div",{className:"user__profile",children:[(0,l.jsxs)("div",{className:"profileheader",children:[(0,l.jsx)(DD,{className:"profileheader__left",alt:e.username,src:e.userimg}),(0,l.jsxs)("div",{className:"profileheader__right",children:[(0,l.jsxs)("div",{className:"profile__details",children:[(0,l.jsx)("h1",{className:"profile__username",children:e.username}),e.user.displayName===e.username?(0,l.jsx)("button",{className:"edit__profile",onClick:function(){u(!0);var e=window.scrollY||document.documentElement.scrollTop,t=window.scrollX||document.documentElement.scrollLeft;window.onscroll=function(){window.scrollTo(t,e)}},children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=25&id=111452&format=png",alt:""})}):(0,l.jsx)("div",{})]}),(0,l.jsxs)("div",{className:"profile__details",children:[1===i.length?(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"1"})," post"]}):(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:i.length})," posts"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"0"})," followers"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"0"})," following"]})]})]})]}),(0,l.jsx)("div",{className:"profile__bio",children:(0,l.jsx)("p",{children:e.userbio})}),(0,l.jsxs)("div",{className:"profile__posts",children:[(0,l.jsx)("h1",{children:"POSTS"}),i.map((function(t){var n=t.id,r=t.post;return(0,l.jsx)(MD,{id:n,postID:n,user:e.user,currentUser:e.userProfile,userProfile:e.userProfile,username:r.username,caption:r.caption,img:r.img})}))]})]})]})};var zD=function(e){var n=(0,t.useContext)(LD),r=c((0,t.useState)(""),2),i=r[0],a=r[1],o=c((0,t.useState)(null),2),s=o[0],u=o[1],f=c((0,t.useState)(0),2),h=f[0],d=f[1],p=c((0,t.useState)(!1),2),v=p[0],m=p[1],g=c((0,t.useState)([]),2),y=g[0],k=g[1],b=function(){m(!0);var t=n.users.filter((function(t){t.id;var n=t.profile;return e.user.displayName===n.username}));k(t),console.log(y[0])},w=function(){m(!1),window.onscroll=function(){}};return(0,l.jsxs)("div",{children:[(0,l.jsx)(AN,{username:e.user,onLogout:function(){e.onLogOut()},profileClicked:b,searchedProfile:function(e){m(!0),k(n.users.filter((function(t){t.id;var n=t.profile;return e===n.username})))}}),(0,l.jsx)(OD,{username:e.user,profileClicked:b,homeClicked:w}),(0,l.jsx)(UD,{profileClicked:b,homeClicked:w}),v&&y.map((function(t){var n=t.id,r=t.profile;return(0,l.jsx)(VD,{docID:n,userID:r.userID,user:e.user,userProfile:y,username:r.username,userimg:r.userimg,userbio:r.userbio},n)})),!v&&(0,l.jsx)(jD,{}),!v&&(0,l.jsxs)("div",{className:"home__container",children:[(0,l.jsx)(FD,{}),(0,l.jsxs)("div",{className:"new__post",children:[(0,l.jsx)("h1",{children:"Create a new post..."}),(0,l.jsx)("progress",{className:"imageupload__progress",value:h,max:"100"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{className:"post__caption",type:"text",placeholder:"enter a caption...",onChange:function(e){a(e.target.value)}}),(0,l.jsxs)("div",{className:"post__opt",children:[(0,l.jsxs)("div",{className:"post__image",children:[(0,l.jsx)("input",{id:"img__input",type:"file",placeholder:"Image",onChange:function(e){e.target.files[0]&&u(e.target.files[0])}}),(0,l.jsx)("img",{src:"https://img.icons8.com/?size=40&id=80584&format=png",alt:""}),(0,l.jsx)("label",{for:"img__input",children:"Select file"})]}),(0,l.jsx)("button",{disabled:!s,className:"post__btn",type:"submit",onClick:function(){var t=n.users.filter((function(t){t.id;var n=t.profile;return e.user.displayName===n.username}));CN.ref("images/".concat(s.name)).put(s).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);d(t)}),(function(e){console.log(e),alert(e.message)}),(function(){CN.ref("images").child(s.name).getDownloadURL().then((function(e){EN.collection("posts").add({timestamp:Wt.firestore.FieldValue.serverTimestamp(),postID:Date.now()+Math.floor(1e5*Math.random()),caption:i,img:e,userID:t[0].profile.userID}),d(0),a(""),u(null)}))}))},children:"POST"})]})]})]}),n.posts.map((function(t){var r=t.id,i=t.post;return(0,l.jsx)(MD,{postID:r,postUser:i.userID,user:e.user,currentUser:n.users.filter((function(t){t.id;var n=t.profile;return e.user.displayName===n.username})),userProfile:n.users.filter((function(e){e.id;return e.profile.userID===i.userID})),caption:i.caption,img:i.img},r)}))]})]})};var BD=function(){var e=c((0,t.useState)(!1),2),n=e[0],r=e[1],i=c((0,t.useState)(!0),2),a=i[0],o=i[1],s=c((0,t.useState)(!1),2),u=s[0],h=s[1],d=c((0,t.useState)(null),2),p=d[0],v=d[1],m=c((0,t.useState)([]),2),g=m[0],y=m[1],k=c((0,t.useState)([]),2),b=k[0],w=k[1];(0,t.useEffect)((function(){EN.collection("users").onSnapshot((function(e){y(e.docs.map((function(e){return{id:e.id,profile:e.data()}})))}))}),[]),(0,t.useEffect)((function(){EN.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){w(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),(0,t.useEffect)((function(){var e=TN.onAuthStateChanged((function(e){e?(console.log(e),v(e)):v(null)}));return function(){e()}}),[p]),(0,t.useEffect)((function(){var e=localStorage.getItem("login"),t=localStorage.getItem("home");"1"===e&&(r(!0),h(!1),o(!1)),"1"===t&&(h(!0),o(!1),r(!1))}),[u,n,a]),(0,t.useEffect)((function(){}));var _=function(){v(null),h(!1),r(!1),o(!0),localStorage.removeItem("home"),localStorage.removeItem("login"),console.log(p)};return(0,l.jsx)(LD.Provider,{value:{users:g,posts:b},children:(0,l.jsxs)("div",{className:"App",children:[a&&(0,l.jsx)(NN,{onRegister:function(e,t,n){TN.createUserWithEmailAndPassword(t,n).then((function(t){t.user.updateProfile({displayName:e}),EN.collection("users").add({userID:Date.now()+Math.floor(1e5*Math.random()),username:e,userimg:"url",userbio:"Your bio"}),v(t),h(!0),r(!1),o(!1),localStorage.setItem("home","1")})).catch((function(e){alert(e.message)}))},onLoginClicked:function(){v(null),h(!1),r(!0),o(!1),localStorage.setItem("login","1")}}),n&&(0,l.jsx)(f,{onLogin:function(e,t){TN.signInWithEmailAndPassword(e,t).then((function(e){v(e),h(!0),r(!1),o(!1),localStorage.setItem("home","1")})).catch((function(e){alert(e.message)}))},onRegisterClicked:_}),u&&(0,l.jsx)(zD,{onLogOut:_,user:p})]})})};i.createRoot(document.getElementById("root")).render((0,l.jsx)(t.StrictMode,{children:(0,l.jsx)(BD,{})}))}()}();
//# sourceMappingURL=main.b1d824e4.js.map